<?xml version="1.0" encoding="utf-8" ?>
<otrs_package version="1.1">
    <Name>MyTicketsDashlet</Name>
    <Version>0.0.10</Version>
    <Vendor>MAWOH GmbH</Vendor>
    <URL>http://www.mawoh.de/</URL>
    <License>GNU AFFERO GENERAL PUBLIC LICENSE Version 3, November 2007</License>
    <ChangeLog Date="2014-02-17 22:00:00" Version="0.0.3">First release.</ChangeLog>
    <ChangeLog Date="2014-03-18 14:20:00" Version="0.0.4">add translations, fix default settings in sysconfig xml</ChangeLog>
    <ChangeLog Date="2014-03-18 15:00:00" Version="0.0.5">add missing translation file</ChangeLog>
    <ChangeLog Date="2014-04-03 16:40:00" Version="0.0.6">add tabs for reminder and pending tickets</ChangeLog>
    <ChangeLog Date="2014-04-03 16:40:00" Version="0.0.7">increase column width</ChangeLog>
    <ChangeLog Date="2015-03-12 16:00:00" Version="0.0.8">fix search filter and README</ChangeLog>
    <ChangeLog Date="2015-03-17 14:00:00" Version="0.0.9">first version for OTRS 4</ChangeLog>
    <ChangeLog Date="2015-03-17 14:00:00" Version="0.0.10">first version for OTRS 5. Show more info about customer (e.g. customer company name) in dashboard. Thanks to Renée Bäcker.</ChangeLog>
    <Description Lang="en">MyTicketsDashlet provides a dashboard widget that shows all tickets of an agent..</Description>
    <Description Lang="de">MyTicketsDashlet stellt ein Dashboard Widget zur Verfügung, welches alle Tickets des angemeldeten Agenten anzeigt.</Description>
    <Framework>5.0.x</Framework>
    <IntroInstall Lang="en" Title="Install Information" Type="pre">

        &lt;br/&gt;
        &lt;strong&gt;WELCOME&lt;/strong&gt;
        &lt;br/&gt;
        &lt;br/&gt;
        You are about to INSTALL the MyTicketsDashlet OTRS module.&lt;br/&gt;
        &lt;br/&gt;
        &lt;br/&gt;
        &lt;br/&gt;
        MAWOH - secure your company&lt;br/&gt;
        &lt;br/&gt;
    </IntroInstall>
    <IntroInstall Lang="en" Title="Install Information" Type="pre">

        &lt;br/&gt;
        &lt;strong&gt;Willkommen&lt;/strong&gt;
        &lt;br/&gt;
        &lt;br/&gt;
        Sie sind im Begriff das OTRS-Paket MyTicketsDashlet zu installieren.&lt;br/&gt;
        &lt;br/&gt;
        &lt;br/&gt;
        &lt;br/&gt;
        MAWOH - secure your company&lt;br/&gt;
        &lt;br/&gt;
    </IntroInstall>
    <IntroInstall Lang="en" Title="Install Information" Type="post">

        &lt;br/&gt;
        &lt;strong&gt;WELCOME&lt;/strong&gt;
        &lt;br/&gt;
        &lt;br/&gt;
        Thank you for choosing the MyTicketsDashlet module.
        &lt;br/&gt;
        &lt;br/&gt;
        &lt;br/&gt;
        MAWOH - secure your company&lt;br/&gt;
        &lt;br/&gt;
    </IntroInstall>
    <IntroInstall Lang="en" Title="Install Information" Type="post">

        &lt;br/&gt;
        &lt;strong&gt;Willkommen&lt;/strong&gt;
        &lt;br/&gt;
        &lt;br/&gt;
        Vielen Dank fuer die Auswahl des MyTicketsDashlet Modules.
        &lt;br/&gt;
        &lt;br/&gt;
        &lt;br/&gt;
        MAWOH - secure your company&lt;br/&gt;
        &lt;br/&gt;
    </IntroInstall>
    <IntroUninstall Lang="en" Title="Uninstall Information" Type="pre">

        &lt;br/&gt;
        &lt;strong&gt;WELCOME&lt;/strong&gt;
        &lt;br/&gt;
        &lt;br/&gt;
        You are about to UNINSTALL the MyTicketsDashlet OTRS module.&lt;br/&gt;
        &lt;br/&gt;
        &lt;br/&gt;
        &lt;br/&gt;
        MAWOH - secure your company&lt;br/&gt;
        &lt;br/&gt;
    </IntroUninstall>
    <IntroUninstall Lang="en" Title="Uninstall Information" Type="pre">

        &lt;br/&gt;
        &lt;strong&gt;Willkommen&lt;/strong&gt;
        &lt;br/&gt;
        &lt;br/&gt;
        Sie sind im Begriff das OTRS-Paket MyTicketsDashlet zu aktualisieren.&lt;br/&gt;
        &lt;br/&gt;
        &lt;br/&gt;
        &lt;br/&gt;
        MAWOH - secure your company&lt;br/&gt;
        &lt;br/&gt;
    </IntroUninstall>
    <IntroUninstall Lang="en" Title="Uninstall Information" Type="post">

        &lt;br/&gt;
        &lt;strong&gt;WELCOME&lt;/strong&gt;
        &lt;br/&gt;
        &lt;br/&gt;
        Thank you for choosing the MyTicketsDashlet module.
        &lt;br/&gt;
        &lt;br/&gt;
        &lt;br/&gt;
        MAWOH - secure your company&lt;br/&gt;
        &lt;br/&gt;
    </IntroUninstall>
    <IntroUninstall Lang="en" Title="Uninstall Information" Type="post">

        &lt;br/&gt;
        &lt;strong&gt;Willkommen&lt;/strong&gt;
        &lt;br/&gt;
        &lt;br/&gt;
        Vielen Dank fuer die Auswahl des MyTicketsDashlet Modules.
        &lt;br/&gt;
        &lt;br/&gt;
        &lt;br/&gt;
        MAWOH - secure your company&lt;br/&gt;
        &lt;br/&gt;
    </IntroUninstall>
    <IntroUpgrade Lang="en" Title="Upgrade Information" Type="pre">

        &lt;br/&gt;
        &lt;strong&gt;WELCOME&lt;/strong&gt;
        &lt;br/&gt;
        &lt;br/&gt;
        You are about to UPGRADE the MyTicketsDashlet OTRS module.&lt;br/&gt;
        &lt;br/&gt;
        &lt;br/&gt;
        &lt;br/&gt;
        MAWOH - secure your company&lt;br/&gt;
        &lt;br/&gt;
    </IntroUpgrade>
    <IntroUpgrade Lang="en" Title="Upgrade Information" Type="pre">

        &lt;br/&gt;
        &lt;strong&gt;Willkommen&lt;/strong&gt;
        &lt;br/&gt;
        &lt;br/&gt;
        Sie sind im Begriff das OTRS-Paket MyTicketsDashlet zu deinstallieren.&lt;br/&gt;
        &lt;br/&gt;
        &lt;br/&gt;
        &lt;br/&gt;
        MAWOH - secure your company&lt;br/&gt;
        &lt;br/&gt;
    </IntroUpgrade>
    <IntroUpgrade Lang="en" Title="Upgrade Information" Type="post">

        &lt;br/&gt;
        &lt;strong&gt;WELCOME&lt;/strong&gt;
        &lt;br/&gt;
        &lt;br/&gt;
        Thank you for choosing the MyTicketsDashlet module.
        &lt;br/&gt;
        &lt;br/&gt;
        &lt;br/&gt;
        MAWOH - secure your company&lt;br/&gt;
        &lt;br/&gt;
    </IntroUpgrade>
    <IntroUpgrade Lang="en" Title="Upgrade Information" Type="post">

        &lt;br/&gt;
        &lt;strong&gt;Willkommen&lt;/strong&gt;
        &lt;br/&gt;
        &lt;br/&gt;
        Vielen Dank fuer die Auswahl des MyTicketsDashlet Modules.
        &lt;br/&gt;
        &lt;br/&gt;
        &lt;br/&gt;
        MAWOH - secure your company&lt;br/&gt;
        &lt;br/&gt;
    </IntroUpgrade>
    <BuildDate>2016-02-12 10:26:24</BuildDate>
    <BuildHost>dev.int.mawoh.de</BuildHost>
    <Filelist>
        <File Location="Kernel/Config/Files/MyTicketsDashlet.xml" Permission="644" Encode="Base64">PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPG90cnNfY29uZmlnIHZlcnNpb249IjEuMCIgaW5pdD0iQXBwbGljYXRpb24iPgogICAgPENvbmZpZ0l0ZW0gTmFtZT0iRGFzaGJvYXJkQmFja2VuZCMjIzAwOTAtTXlUaWNrZXRzRGFzaGxldCIgUmVxdWlyZWQ9IjAiIFZhbGlkPSIxIj4KICAgICAgICA8RGVzY3JpcHRpb24gVHJhbnNsYXRhYmxlPSIxIj5QYXJhbWV0ZXJzIGZvciB0aGUgZGFzaGJvYXJkIGJhY2tlbmQgb2YgdGhlICJNeSBvcGVuIFRpY2tldCIgb3ZlcnZpZXcgb2YgdGhlIGFnZW50IGludGVyZmFjZS4gIkxpbWl0IiBpcyB0aGUgbnVtYmVyIG9mIGVudHJpZXMgc2hvd24gYnkgZGVmYXVsdC4gIkdyb3VwIiBpcyB1c2VkIHRvIHJlc3RyaWN0IHRoZSBhY2Nlc3MgdG8gdGhlIHBsdWdpbiAoZS4gZy4gR3JvdXA6IGFkbWluO2dyb3VwMTtncm91cDI7KS4gIkRlZmF1bHQiIGRldGVybWluZXMgaWYgdGhlIHBsdWdpbiBpcyBlbmFibGVkIGJ5IGRlZmF1bHQgb3IgaWYgdGhlIHVzZXIgbmVlZHMgdG8gZW5hYmxlIGl0IG1hbnVhbGx5LiAiQ2FjaGVUVExMb2NhbCIgaXMgdGhlIGNhY2hlIHRpbWUgaW4gbWludXRlcyBmb3IgdGhlIHBsdWdpbi48L0Rlc2NyaXB0aW9uPgogICAgICAgIDxHcm91cD5UaWNrZXQ8L0dyb3VwPgogICAgICAgIDxTdWJHcm91cD5Gcm9udGVuZDo6QWdlbnQ6OkRhc2hib2FyZDwvU3ViR3JvdXA+CiAgICAgICAgPFNldHRpbmc+CiAgICAgICAgICAgIDxIYXNoPgogICAgICAgICAgICAgICAgPEl0ZW0gS2V5PSJNb2R1bGUiPktlcm5lbDo6T3V0cHV0OjpIVE1MOjpEYXNoYm9hcmQ6OlRpY2tldE15VGlja2V0c0Rhc2hsZXQ8L0l0ZW0+CiAgICAgICAgICAgICAgICA8SXRlbSBLZXk9IlRpdGxlIj5NeSBUaWNrZXRzPC9JdGVtPgogICAgICAgICAgICAgICAgPEl0ZW0gS2V5PSJEZXNjcmlwdGlvbiI+QWxsIG15IHRpY2tldHM8L0l0ZW0+CiAgICAgICAgICAgICAgICA8SXRlbSBLZXk9IkF0dHJpYnV0ZXMiPjwvSXRlbT4KICAgICAgICAgICAgICAgIDxJdGVtIEtleT0iRmlsdGVyIj5PcGVuPC9JdGVtPgogICAgICAgICAgICAgICAgPEl0ZW0gS2V5PSJUaW1lIj5BZ2U8L0l0ZW0+CiAgICAgICAgICAgICAgICA8SXRlbSBLZXk9IkxpbWl0Ij4yNTwvSXRlbT4KICAgICAgICAgICAgICAgIDxJdGVtIEtleT0iUGVybWlzc2lvbiI+cnc8L0l0ZW0+CiAgICAgICAgICAgICAgICA8SXRlbSBLZXk9IkJsb2NrIj5Db250ZW50TGFyZ2U8L0l0ZW0+CiAgICAgICAgICAgICAgICA8SXRlbSBLZXk9Ikdyb3VwIj48L0l0ZW0+CiAgICAgICAgICAgICAgICA8SXRlbSBLZXk9IkRlZmF1bHQiPjE8L0l0ZW0+CiAgICAgICAgICAgICAgICA8SXRlbSBLZXk9IkNhY2hlVFRMTG9jYWwiPjAuNTwvSXRlbT4KICAgICAgICAgICAgICAgIDxJdGVtIEtleT0iRGVmYXVsdENvbHVtbnMiPgogICAgICAgICAgICAgICAgICAgIDxIYXNoPgogICAgICAgICAgICAgICAgICAgICAgICA8SXRlbSBLZXk9IkFnZSI+MjwvSXRlbT4KICAgICAgICAgICAgICAgICAgICAgICAgPEl0ZW0gS2V5PSJDaGFuZ2VkIj4xPC9JdGVtPgogICAgICAgICAgICAgICAgICAgICAgICA8SXRlbSBLZXk9IkN1c3RvbWVySUQiPjE8L0l0ZW0+CiAgICAgICAgICAgICAgICAgICAgICAgIDxJdGVtIEtleT0iQ3VzdG9tZXJOYW1lIj4xPC9JdGVtPgogICAgICAgICAgICAgICAgICAgICAgICA8SXRlbSBLZXk9IkN1c3RvbWVyVXNlcklEIj4xPC9JdGVtPgogICAgICAgICAgICAgICAgICAgICAgICA8SXRlbSBLZXk9IkVzY2FsYXRpb25SZXNwb25zZVRpbWUiPjE8L0l0ZW0+CiAgICAgICAgICAgICAgICAgICAgICAgIDxJdGVtIEtleT0iRXNjYWxhdGlvblNvbHV0aW9uVGltZSI+MTwvSXRlbT4KICAgICAgICAgICAgICAgICAgICAgICAgPEl0ZW0gS2V5PSJFc2NhbGF0aW9uVGltZSI+MTwvSXRlbT4KICAgICAgICAgICAgICAgICAgICAgICAgPEl0ZW0gS2V5PSJFc2NhbGF0aW9uVXBkYXRlVGltZSI+MTwvSXRlbT4KICAgICAgICAgICAgICAgICAgICAgICAgPEl0ZW0gS2V5PSJUaWNrZXROdW1iZXIiPjI8L0l0ZW0+CiAgICAgICAgICAgICAgICAgICAgICAgIDxJdGVtIEtleT0iTG9jayI+MTwvSXRlbT4KICAgICAgICAgICAgICAgICAgICAgICAgPEl0ZW0gS2V5PSJPd25lciI+MTwvSXRlbT4KICAgICAgICAgICAgICAgICAgICAgICAgPEl0ZW0gS2V5PSJQZW5kaW5nVGltZSI+MTwvSXRlbT4KICAgICAgICAgICAgICAgICAgICAgICAgPEl0ZW0gS2V5PSJRdWV1ZSI+MjwvSXRlbT4KICAgICAgICAgICAgICAgICAgICAgICAgPEl0ZW0gS2V5PSJSZXNwb25zaWJsZSI+MTwvSXRlbT4KICAgICAgICAgICAgICAgICAgICAgICAgPEl0ZW0gS2V5PSJQcmlvcml0eSI+MTwvSXRlbT4KICAgICAgICAgICAgICAgICAgICAgICAgPEl0ZW0gS2V5PSJTZXJ2aWNlIj4xPC9JdGVtPgogICAgICAgICAgICAgICAgICAgICAgICA8SXRlbSBLZXk9IlN0YXRlIj4xPC9JdGVtPgogICAgICAgICAgICAgICAgICAgICAgICA8SXRlbSBLZXk9IlNMQSI+MTwvSXRlbT4KICAgICAgICAgICAgICAgICAgICAgICAgPEl0ZW0gS2V5PSJUaXRsZSI+MjwvSXRlbT4KICAgICAgICAgICAgICAgICAgICAgICAgPEl0ZW0gS2V5PSJUeXBlIj4xPC9JdGVtPgogICAgICAgICAgICAgICAgICAgIDwvSGFzaD4KICAgICAgICAgICAgICAgIDwvSXRlbT4KICAgICAgICAgICAgPC9IYXNoPgogICAgICAgIDwvU2V0dGluZz4KICAgIDwvQ29uZmlnSXRlbT4KPC9vdHJzX2NvbmZpZz4KCg==</File>
        <File Location="Kernel/Language/de_MyTicketsDashlet.pm" Permission="644" Encode="Base64">IyAtLQojIEtlcm5lbC9MYW5ndWFnZS9kZV9NeVRpY2tldHNEYXNobGV0LnBtIC0gdHJhbnNsYXRpb24gZmlsZQojIC0tCiMgVGhpcyBzb2Z0d2FyZSBjb21lcyB3aXRoIEFCU09MVVRFTFkgTk8gV0FSUkFOVFkuIEZvciBkZXRhaWxzLCBzZWUKIyB0aGUgZW5jbG9zZWQgZmlsZSBDT1BZSU5HIGZvciBsaWNlbnNlIGluZm9ybWF0aW9uIChBR1BMKS4gSWYgeW91CiMgZGlkIG5vdCByZWNlaXZlIHRoaXMgZmlsZSwgc2VlIGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy9hZ3BsLnR4dC4KIyAtLQoKcGFja2FnZSBLZXJuZWw6Okxhbmd1YWdlOjpkZV9NeVRpY2tldHNEYXNobGV0OwoKdXNlIHN0cmljdDsKdXNlIHdhcm5pbmdzOwoKc3ViIERhdGEgewogICAgbXkgJFNlbGYgPSBzaGlmdDsKCiAgICAjIFRlbXBsYXRlOiBBQUFJVFNNQ29uZmlnSXRlbQogICAgJFNlbGYtPntUcmFuc2xhdGlvbn0tPnsnTXkgVGlja2V0cyd9ID0gJ01laW5lIFRpY2tldHMnOwogICAgJFNlbGYtPntUcmFuc2xhdGlvbn0tPnsnT3BlbiB0aWNrZXRzJ30gPSAnb2ZmZW5lbiBUaWNrZXRzJzsKICAgICRTZWxmLT57VHJhbnNsYXRpb259LT57J1JlbWluZGVyIHRpY2tldHMnfSA9ICdFcmlubmVydW5nc3RpY2tldHMnOwogICAgJFNlbGYtPntUcmFuc2xhdGlvbn0tPnsnUGVuZGluZyB0aWNrZXRzJ30gPSAnV2FydGVudGlja2V0cyc7Cgp9CgoxOwoK</File>
        <File Location="Kernel/Output/HTML/Dashboard/TicketMyTicketsDashlet.pm" Permission="644" Encode="Base64">IyAtLQojIEtlcm5lbC9PdXRwdXQvSFRNTC9EYXNoYm9hcmQvVGlja2V0TXlUaWNrZXRzRGFzaGxldC5wbQojIC0tCiMgVGhpcyBzb2Z0d2FyZSBjb21lcyB3aXRoIEFCU09MVVRFTFkgTk8gV0FSUkFOVFkuIEZvciBkZXRhaWxzLCBzZWUKIyB0aGUgZW5jbG9zZWQgZmlsZSBDT1BZSU5HIGZvciBsaWNlbnNlIGluZm9ybWF0aW9uIChBR1BMKS4gSWYgeW91CiMgZGlkIG5vdCByZWNlaXZlIHRoaXMgZmlsZSwgc2VlIGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy9hZ3BsLnR4dC4KIyAtLQoKcGFja2FnZSBLZXJuZWw6Ok91dHB1dDo6SFRNTDo6RGFzaGJvYXJkOjpUaWNrZXRNeVRpY2tldHNEYXNobGV0OwoKdXNlIHN0cmljdDsKdXNlIHdhcm5pbmdzOwoKdXNlIEtlcm5lbDo6U3lzdGVtOjpWYXJpYWJsZUNoZWNrIHF3KDphbGwpOwoKb3VyICRPYmplY3RNYW5hZ2VyRGlzYWJsZWQgPSAxOwoKc3ViIG5ldyB7CiAgICBteSAoICRUeXBlLCAlUGFyYW0gKSA9IEBfOwoKICAgICMgYWxsb2NhdGUgbmV3IGhhc2ggZm9yIG9iamVjdAogICAgbXkgJFNlbGYgPSB7JVBhcmFtfTsKICAgIGJsZXNzKCAkU2VsZiwgJFR5cGUgKTsKCiAgICAjIGdldCBuZWVkZWQgcGFyYW1ldGVycwogICAgZm9yIG15ICRJdGVtIChxdyhDb25maWcgTmFtZSBVc2VySUQpKSB7CiAgICAgICAgZGllICJHb3Qgbm8gJEl0ZW0hIiBpZiAoICEkU2VsZi0+eyRJdGVtfSApOwogICAgfQoKICAgICMgZ2V0IHBhcmFtIG9iamVjdAogICAgbXkgJFBhcmFtT2JqZWN0ID0gJEtlcm5lbDo6T00tPkdldCgnS2VybmVsOjpTeXN0ZW06OldlYjo6UmVxdWVzdCcpOwoKICAgIG15ICRSZW1vdmVGaWx0ZXJzID0gJFBhcmFtT2JqZWN0LT5HZXRQYXJhbSggUGFyYW0gPT4gJ1JlbW92ZUZpbHRlcnMnICkKICAgICAgICB8fCAkUGFyYW17UmVtb3ZlRmlsdGVyc30KICAgICAgICB8fCAwOwoKICAgICMgZ2V0IHNvcnRpbmcgcGFyYW1zCiAgICBmb3IgbXkgJEl0ZW0gKHF3KFNvcnRCeSBPcmRlckJ5KSkgewogICAgICAgICRTZWxmLT57JEl0ZW19ID0gJFBhcmFtT2JqZWN0LT5HZXRQYXJhbSggUGFyYW0gPT4gJEl0ZW0gKSB8fCAkUGFyYW17JEl0ZW19OwogICAgfQoKICAgICMgc2V0IGZpbHRlciBzZXR0aW5ncwogICAgZm9yIG15ICRJdGVtIChxdyhDb2x1bW5GaWx0ZXIgR2V0Q29sdW1uRmlsdGVyIEdldENvbHVtbkZpbHRlclNlbGVjdCkpIHsKICAgICAgICAkU2VsZi0+eyRJdGVtfSA9ICRQYXJhbXskSXRlbX07CiAgICB9CgogICAgIyBzYXZlIGNvbHVtbiBmaWx0ZXJzCiAgICAkU2VsZi0+e1ByZWZLZXlDb2x1bW5GaWx0ZXJzfSAgICAgICAgID0gJ1VzZXJEYXNoYm9hcmRUaWNrZXRNeVRpY2tldHNDb2x1bW5GaWx0ZXJzJyAuICRTZWxmLT57TmFtZX07CiAgICAkU2VsZi0+e1ByZWZLZXlDb2x1bW5GaWx0ZXJzUmVhbEtleXN9ID0gJ1VzZXJEYXNoYm9hcmRUaWNrZXRNeVRpY2tldHNDb2x1bW5GaWx0ZXJzUmVhbEtleXMnIC4gJFNlbGYtPntOYW1lfTsKCiAgICAjIGdldCBuZWVkZWQgb2JqZWN0cwogICAgbXkgJEpTT05PYmplY3QgICA9ICRLZXJuZWw6Ok9NLT5HZXQoJ0tlcm5lbDo6U3lzdGVtOjpKU09OJyk7CiAgICBteSAkQ29uZmlnT2JqZWN0ID0gJEtlcm5lbDo6T00tPkdldCgnS2VybmVsOjpDb25maWcnKTsKICAgIG15ICRVc2VyT2JqZWN0ICAgPSAkS2VybmVsOjpPTS0+R2V0KCdLZXJuZWw6OlN5c3RlbTo6VXNlcicpOwoKICAgIGlmICgkUmVtb3ZlRmlsdGVycykgewogICAgICAgICRVc2VyT2JqZWN0LT5TZXRQcmVmZXJlbmNlcygKICAgICAgICAgICAgVXNlcklEID0+ICRTZWxmLT57VXNlcklEfSwKICAgICAgICAgICAgS2V5ICAgID0+ICRTZWxmLT57UHJlZktleUNvbHVtbkZpbHRlcnN9LAogICAgICAgICAgICBWYWx1ZSAgPT4gJycsCiAgICAgICAgKTsKICAgICAgICAkVXNlck9iamVjdC0+U2V0UHJlZmVyZW5jZXMoCiAgICAgICAgICAgIFVzZXJJRCA9PiAkU2VsZi0+e1VzZXJJRH0sCiAgICAgICAgICAgIEtleSAgICA9PiAkU2VsZi0+e1ByZWZLZXlDb2x1bW5GaWx0ZXJzUmVhbEtleXN9LAogICAgICAgICAgICBWYWx1ZSAgPT4gJycsCiAgICAgICAgKTsKICAgIH0KCiAgICAjIGp1c3QgaW4gY2FzZSBuZXcgZmlsdGVyIHZhbHVlcyBhcnJpdmUKICAgIGVsc2lmICgKICAgICAgICBJc0hhc2hSZWZXaXRoRGF0YSggJFNlbGYtPntHZXRDb2x1bW5GaWx0ZXJ9ICkKICAgICAgICAmJiBJc0hhc2hSZWZXaXRoRGF0YSggJFNlbGYtPntHZXRDb2x1bW5GaWx0ZXJTZWxlY3R9ICkKICAgICAgICAmJiBJc0hhc2hSZWZXaXRoRGF0YSggJFNlbGYtPntDb2x1bW5GaWx0ZXJ9ICkKICAgICAgICApCiAgICB7CgogICAgICAgIGlmICggISRDb25maWdPYmplY3QtPkdldCgnRGVtb1N5c3RlbScpICkgewoKICAgICAgICAgICAgIyBjaGVjayBpZiB0aGUgdXNlciBoYXMgZmlsdGVyIHByZWZlcmVuY2VzIGZvciB0aGlzIHdpZGdldAogICAgICAgICAgICBteSAlUHJlZmVyZW5jZXMgPSAkVXNlck9iamVjdC0+R2V0UHJlZmVyZW5jZXMoCiAgICAgICAgICAgICAgICBVc2VySUQgPT4gJFNlbGYtPntVc2VySUR9LAogICAgICAgICAgICApOwogICAgICAgICAgICBteSAkQ29sdW1uUHJlZlZhbHVlczsKICAgICAgICAgICAgaWYgKCAkUHJlZmVyZW5jZXN7ICRTZWxmLT57UHJlZktleUNvbHVtbkZpbHRlcnN9IH0gKSB7CiAgICAgICAgICAgICAgICAkQ29sdW1uUHJlZlZhbHVlcyA9ICRKU09OT2JqZWN0LT5EZWNvZGUoCiAgICAgICAgICAgICAgICAgICAgRGF0YSA9PiAkUHJlZmVyZW5jZXN7ICRTZWxmLT57UHJlZktleUNvbHVtbkZpbHRlcnN9IH0sCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICB9CgogICAgICAgICAgICBQUkVGVkFMVUVTOgogICAgICAgICAgICBmb3IgbXkgJENvbHVtbiAoIHNvcnQga2V5cyAleyAkU2VsZi0+e0dldENvbHVtbkZpbHRlclNlbGVjdH0gfSApIHsKICAgICAgICAgICAgICAgIGlmICggJFNlbGYtPntHZXRDb2x1bW5GaWx0ZXJTZWxlY3R9LT57JENvbHVtbn0gZXEgJ0RlbGV0ZUZpbHRlcicgKSB7CiAgICAgICAgICAgICAgICAgICAgZGVsZXRlICRDb2x1bW5QcmVmVmFsdWVzLT57JENvbHVtbn07CiAgICAgICAgICAgICAgICAgICAgbmV4dCBQUkVGVkFMVUVTOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgJENvbHVtblByZWZWYWx1ZXMtPnskQ29sdW1ufSA9ICRTZWxmLT57R2V0Q29sdW1uRmlsdGVyU2VsZWN0fS0+eyRDb2x1bW59OwogICAgICAgICAgICB9CgogICAgICAgICAgICAkVXNlck9iamVjdC0+U2V0UHJlZmVyZW5jZXMoCiAgICAgICAgICAgICAgICBVc2VySUQgPT4gJFNlbGYtPntVc2VySUR9LAogICAgICAgICAgICAgICAgS2V5ICAgID0+ICRTZWxmLT57UHJlZktleUNvbHVtbkZpbHRlcnN9LAogICAgICAgICAgICAgICAgVmFsdWUgID0+ICRKU09OT2JqZWN0LT5FbmNvZGUoIERhdGEgPT4gJENvbHVtblByZWZWYWx1ZXMgKSwKICAgICAgICAgICAgKTsKCiAgICAgICAgICAgICMgc2F2ZSByZWFsIGtleSdzIG5hbWUKICAgICAgICAgICAgbXkgJENvbHVtblByZWZSZWFsS2V5c1ZhbHVlczsKICAgICAgICAgICAgaWYgKCAkUHJlZmVyZW5jZXN7ICRTZWxmLT57UHJlZktleUNvbHVtbkZpbHRlcnNSZWFsS2V5c30gfSApIHsKICAgICAgICAgICAgICAgICRDb2x1bW5QcmVmUmVhbEtleXNWYWx1ZXMgPSAkSlNPTk9iamVjdC0+RGVjb2RlKAogICAgICAgICAgICAgICAgICAgIERhdGEgPT4gJFByZWZlcmVuY2VzeyAkU2VsZi0+e1ByZWZLZXlDb2x1bW5GaWx0ZXJzUmVhbEtleXN9IH0sCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICB9CiAgICAgICAgICAgIFJFQUxLRVlWQUxVRVM6CiAgICAgICAgICAgIGZvciBteSAkQ29sdW1uICggc29ydCBrZXlzICV7ICRTZWxmLT57Q29sdW1uRmlsdGVyfSB9ICkgewogICAgICAgICAgICAgICAgbmV4dCBSRUFMS0VZVkFMVUVTIGlmICEkQ29sdW1uOwoKICAgICAgICAgICAgICAgIG15ICREZWxldGVGaWx0ZXIgPSAwOwogICAgICAgICAgICAgICAgaWYgKCBJc0FycmF5UmVmV2l0aERhdGEoICRTZWxmLT57Q29sdW1uRmlsdGVyfS0+eyRDb2x1bW59ICkgKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCBncmVwIHsgJF8gZXEgJ0RlbGV0ZUZpbHRlcicgfSBAeyAkU2VsZi0+e0NvbHVtbkZpbHRlcn0tPnskQ29sdW1ufSB9ICkgewogICAgICAgICAgICAgICAgICAgICAgICAkRGVsZXRlRmlsdGVyID0gMTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNpZiAoIElzSGFzaFJlZldpdGhEYXRhKCAkU2VsZi0+e0NvbHVtbkZpbHRlcn0tPnskQ29sdW1ufSApICkgewoKICAgICAgICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAgICAgICAgIGdyZXAgeyAkU2VsZi0+e0NvbHVtbkZpbHRlcn0tPnskQ29sdW1ufS0+eyRffSBlcSAnRGVsZXRlRmlsdGVyJyB9CiAgICAgICAgICAgICAgICAgICAgICAgIGtleXMgJXsgJFNlbGYtPntDb2x1bW5GaWx0ZXJ9LT57JENvbHVtbn0gfQogICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAkRGVsZXRlRmlsdGVyID0gMTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKCREZWxldGVGaWx0ZXIpIHsKICAgICAgICAgICAgICAgICAgICBkZWxldGUgJENvbHVtblByZWZSZWFsS2V5c1ZhbHVlcy0+eyRDb2x1bW59OwogICAgICAgICAgICAgICAgICAgIGRlbGV0ZSAkU2VsZi0+e0NvbHVtbkZpbHRlcn0tPnskQ29sdW1ufTsKICAgICAgICAgICAgICAgICAgICBuZXh0IFJFQUxLRVlWQUxVRVM7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAkQ29sdW1uUHJlZlJlYWxLZXlzVmFsdWVzLT57JENvbHVtbn0gPSAkU2VsZi0+e0NvbHVtbkZpbHRlcn0tPnskQ29sdW1ufTsKICAgICAgICAgICAgfQogICAgICAgICAgICAkVXNlck9iamVjdC0+U2V0UHJlZmVyZW5jZXMoCiAgICAgICAgICAgICAgICBVc2VySUQgPT4gJFNlbGYtPntVc2VySUR9LAogICAgICAgICAgICAgICAgS2V5ICAgID0+ICRTZWxmLT57UHJlZktleUNvbHVtbkZpbHRlcnNSZWFsS2V5c30sCiAgICAgICAgICAgICAgICBWYWx1ZSAgPT4gJEpTT05PYmplY3QtPkVuY29kZSggRGF0YSA9PiAkQ29sdW1uUHJlZlJlYWxLZXlzVmFsdWVzICksCiAgICAgICAgICAgICk7CgogICAgICAgIH0KICAgIH0KCiAgICAjIGNoZWNrIGlmIHRoZSB1c2VyIGhhcyBmaWx0ZXIgcHJlZmVyZW5jZXMgZm9yIHRoaXMgd2lkZ2V0CiAgICBteSAlUHJlZmVyZW5jZXMgPSAkVXNlck9iamVjdC0+R2V0UHJlZmVyZW5jZXMoCiAgICAgICAgVXNlcklEID0+ICRTZWxmLT57VXNlcklEfSwKICAgICk7CgogICAgIyBnZXQgY29sdW1uIG5hbWVzIGZyb20gUHJlZmVyZW5jZXMKICAgIG15ICRQcmVmZXJlbmNlc0NvbHVtbkZpbHRlcnM7CiAgICBpZiAoICRQcmVmZXJlbmNlc3sgJFNlbGYtPntQcmVmS2V5Q29sdW1uRmlsdGVyc30gfSApIHsKICAgICAgICAkUHJlZmVyZW5jZXNDb2x1bW5GaWx0ZXJzID0gJEpTT05PYmplY3QtPkRlY29kZSgKICAgICAgICAgICAgRGF0YSA9PiAkUHJlZmVyZW5jZXN7ICRTZWxmLT57UHJlZktleUNvbHVtbkZpbHRlcnN9IH0sCiAgICAgICAgKTsKICAgIH0KCiAgICBpZiAoJFByZWZlcmVuY2VzQ29sdW1uRmlsdGVycykgewogICAgICAgICRTZWxmLT57R2V0Q29sdW1uRmlsdGVyU2VsZWN0fSA9ICRQcmVmZXJlbmNlc0NvbHVtbkZpbHRlcnM7CiAgICAgICAgbXkgQENvbHVtbkZpbHRlcnMgPSBrZXlzICV7JFByZWZlcmVuY2VzQ29sdW1uRmlsdGVyc307ICAgICMjIG5vIGNyaXRpYwogICAgICAgIGZvciBteSAkRmllbGQgKEBDb2x1bW5GaWx0ZXJzKSB7CiAgICAgICAgICAgICRTZWxmLT57R2V0Q29sdW1uRmlsdGVyfS0+eyAkRmllbGQgLiAkU2VsZi0+e05hbWV9IH0gPSAkUHJlZmVyZW5jZXNDb2x1bW5GaWx0ZXJzLT57JEZpZWxkfTsKICAgICAgICB9CiAgICB9CgogICAgIyBnZXQgY29sdW1uIHJlYWwgbmFtZXMgZnJvbSBQcmVmZXJlbmNlcwogICAgbXkgJFByZWZlcmVuY2VzQ29sdW1uRmlsdGVyc1JlYWxLZXlzOwogICAgaWYgKCAkUHJlZmVyZW5jZXN7ICRTZWxmLT57UHJlZktleUNvbHVtbkZpbHRlcnNSZWFsS2V5c30gfSApIHsKICAgICAgICAkUHJlZmVyZW5jZXNDb2x1bW5GaWx0ZXJzUmVhbEtleXMgPSAkSlNPTk9iamVjdC0+RGVjb2RlKAogICAgICAgICAgICBEYXRhID0+ICRQcmVmZXJlbmNlc3sgJFNlbGYtPntQcmVmS2V5Q29sdW1uRmlsdGVyc1JlYWxLZXlzfSB9LAogICAgICAgICk7CiAgICB9CgogICAgaWYgKCRQcmVmZXJlbmNlc0NvbHVtbkZpbHRlcnNSZWFsS2V5cykgewogICAgICAgIG15IEBDb2x1bW5GaWx0ZXJzUmVhbCA9IGtleXMgJXskUHJlZmVyZW5jZXNDb2x1bW5GaWx0ZXJzUmVhbEtleXN9OyAgICAjIyBubyBjcml0aWMKICAgICAgICBmb3IgbXkgJEZpZWxkIChAQ29sdW1uRmlsdGVyc1JlYWwpIHsKICAgICAgICAgICAgJFNlbGYtPntDb2x1bW5GaWx0ZXJ9LT57JEZpZWxkfSA9ICRQcmVmZXJlbmNlc0NvbHVtbkZpbHRlcnNSZWFsS2V5cy0+eyRGaWVsZH07CiAgICAgICAgfQogICAgfQoKICAgICMgZ2V0IGN1cnJlbnQgZmlsdGVyCiAgICBteSAkTmFtZSA9ICRQYXJhbU9iamVjdC0+R2V0UGFyYW0oIFBhcmFtID0+ICdOYW1lJyApIHx8ICcnOwogICAgbXkgJFByZWZlcmVuY2VzS2V5ID0gJ1VzZXJEYXNoYm9hcmRUaWNrZXRNeVRpY2tldHNGaWx0ZXInIC4gJFNlbGYtPntOYW1lfTsKICAgIGlmICggJFNlbGYtPntOYW1lfSBlcSAkTmFtZSApIHsKICAgICAgICAkU2VsZi0+e0ZpbHRlcn0gPSAkUGFyYW1PYmplY3QtPkdldFBhcmFtKCBQYXJhbSA9PiAnRmlsdGVyJyApIHx8ICcnOwogICAgfQoKICAgICMgcmVtZW1iZXIgZmlsdGVyCiAgICBpZiAoICRTZWxmLT57RmlsdGVyfSApIHsKCiAgICAgICAgIyB1cGRhdGUgc2Vzc2lvbgogICAgICAgICRLZXJuZWw6Ok9NLT5HZXQoJ0tlcm5lbDo6U3lzdGVtOjpBdXRoU2Vzc2lvbicpLT5VcGRhdGVTZXNzaW9uSUQoCiAgICAgICAgICAgIFNlc3Npb25JRCA9PiAkU2VsZi0+e1Nlc3Npb25JRH0sCiAgICAgICAgICAgIEtleSAgICAgICA9PiAkUHJlZmVyZW5jZXNLZXksCiAgICAgICAgICAgIFZhbHVlICAgICA9PiAkU2VsZi0+e0ZpbHRlcn0sCiAgICAgICAgKTsKCiAgICAgICAgIyB1cGRhdGUgcHJlZmVyZW5jZXMKICAgICAgICBpZiAoICEkQ29uZmlnT2JqZWN0LT5HZXQoJ0RlbW9TeXN0ZW0nKSApIHsKICAgICAgICAgICAgJFVzZXJPYmplY3QtPlNldFByZWZlcmVuY2VzKAogICAgICAgICAgICAgICAgVXNlcklEID0+ICRTZWxmLT57VXNlcklEfSwKICAgICAgICAgICAgICAgIEtleSAgICA9PiAkUHJlZmVyZW5jZXNLZXksCiAgICAgICAgICAgICAgICBWYWx1ZSAgPT4gJFNlbGYtPntGaWx0ZXJ9LAogICAgICAgICAgICApOwogICAgICAgIH0KICAgIH0KICAgIGVsc2UgewogICAgICAgICRTZWxmLT57RmlsdGVyfSA9ICRTZWxmLT57JFByZWZlcmVuY2VzS2V5fSB8fCAkU2VsZi0+e0NvbmZpZ30tPntGaWx0ZXJ9IHx8ICdBbGwnOwogICAgfQoKICAgICRTZWxmLT57UHJlZktleVNob3dufSAgID0gJ1VzZXJEYXNoYm9hcmRQcmVmJyAuICRTZWxmLT57TmFtZX0gLiAnLVNob3duJzsKICAgICRTZWxmLT57UHJlZktleUNvbHVtbnN9ID0gJ1VzZXJEYXNoYm9hcmRQcmVmJyAuICRTZWxmLT57TmFtZX0gLiAnLUNvbHVtbnMnOwogICAgJFNlbGYtPntQYWdlU2hvd259ICAgICAgPSAkS2VybmVsOjpPTS0+R2V0KCdLZXJuZWw6Ok91dHB1dDo6SFRNTDo6TGF5b3V0JyktPnsgJFNlbGYtPntQcmVmS2V5U2hvd259IH0KICAgICAgICB8fCAkU2VsZi0+e0NvbmZpZ30tPntMaW1pdH07CiAgICAkU2VsZi0+e1N0YXJ0SGl0fSA9IGludCggJFBhcmFtT2JqZWN0LT5HZXRQYXJhbSggUGFyYW0gPT4gJ1N0YXJ0SGl0JyApIHx8IDEgKTsKCiAgICAjIGRlZmluZSBmaWx0ZXJhYmxlIGNvbHVtbnMKICAgICRTZWxmLT57VmFsaWRGaWx0ZXJhYmxlQ29sdW1uc30gPSB7CiAgICAgICAgJ093bmVyJyAgICAgICAgICA9PiAxLAogICAgICAgICdSZXNwb25zaWJsZScgICAgPT4gMSwKICAgICAgICAnQ3VzdG9tZXJJRCcgICAgID0+IDEsCiAgICAgICAgJ0N1c3RvbWVyVXNlcklEJyA9PiAxLAogICAgICAgICdTdGF0ZScgICAgICAgICAgPT4gMSwKICAgICAgICAnUXVldWUnICAgICAgICAgID0+IDEsCiAgICAgICAgJ1ByaW9yaXR5JyAgICAgICA9PiAxLAogICAgICAgICdUeXBlJyAgICAgICAgICAgPT4gMSwKICAgICAgICAnTG9jaycgICAgICAgICAgID0+IDEsCiAgICAgICAgJ1NlcnZpY2UnICAgICAgICA9PiAxLAogICAgICAgICdTTEEnICAgICAgICAgICAgPT4gMSwKICAgIH07CgogICAgIyBoYXNoIHdpdGggYWxsIHZhbGlkIHNvcnRhYmxlIGNvbHVtbnMgKHRha2VuIGZyb20gVGlja2V0U2VhcmNoKQogICAgIyBTb3J0QnkgID0+ICdBZ2UnLCAgICMgT3duZXJ8UmVzcG9uc2libGV8Q3VzdG9tZXJJRHxTdGF0ZXxUaWNrZXROdW1iZXJ8UXVldWUKICAgICMgfFByaW9yaXR5fFR5cGV8TG9ja3xUaXRsZXxTZXJ2aWNlfFNMQXxDaGFuZ2VkfFBlbmRpbmdUaW1lfEVzY2FsYXRpb25UaW1lCiAgICAjIHwgRXNjYWxhdGlvblVwZGF0ZVRpbWV8RXNjYWxhdGlvblJlc3BvbnNlVGltZXxFc2NhbGF0aW9uU29sdXRpb25UaW1lCiAgICAkU2VsZi0+e1ZhbGlkU29ydGFibGVDb2x1bW5zfSA9IHsKICAgICAgICAnQWdlJyAgICAgICAgICAgICAgICAgICAgPT4gMSwKICAgICAgICAnT3duZXInICAgICAgICAgICAgICAgICAgPT4gMSwKICAgICAgICAnUmVzcG9uc2libGUnICAgICAgICAgICAgPT4gMSwKICAgICAgICAnQ3VzdG9tZXJJRCcgICAgICAgICAgICAgPT4gMSwKICAgICAgICAnU3RhdGUnICAgICAgICAgICAgICAgICAgPT4gMSwKICAgICAgICAnVGlja2V0TnVtYmVyJyAgICAgICAgICAgPT4gMSwKICAgICAgICAnUXVldWUnICAgICAgICAgICAgICAgICAgPT4gMSwKICAgICAgICAnUHJpb3JpdHknICAgICAgICAgICAgICAgPT4gMSwKICAgICAgICAnVHlwZScgICAgICAgICAgICAgICAgICAgPT4gMSwKICAgICAgICAnTG9jaycgICAgICAgICAgICAgICAgICAgPT4gMSwKICAgICAgICAnVGl0bGUnICAgICAgICAgICAgICAgICAgPT4gMSwKICAgICAgICAnU2VydmljZScgICAgICAgICAgICAgICAgPT4gMSwKICAgICAgICAnQ2hhbmdlZCcgICAgICAgICAgICAgICAgPT4gMSwKICAgICAgICAnU0xBJyAgICAgICAgICAgICAgICAgICAgPT4gMSwKICAgICAgICAnUGVuZGluZ1RpbWUnICAgICAgICAgICAgPT4gMSwKICAgICAgICAnRXNjYWxhdGlvblRpbWUnICAgICAgICAgPT4gMSwKICAgICAgICAnRXNjYWxhdGlvblVwZGF0ZVRpbWUnICAgPT4gMSwKICAgICAgICAnRXNjYWxhdGlvblJlc3BvbnNlVGltZScgPT4gMSwKICAgICAgICAnRXNjYWxhdGlvblNvbHV0aW9uVGltZScgPT4gMSwKICAgIH07CgogICAgIyByZW1vdmUgQ3VzdG9tZXJJRCBpZiBDdXN0b21lciBJbmZvcm1hdGlvbiBDZW50ZXIKICAgIGlmICggJFNlbGYtPntBY3Rpb259IGVxICdBZ2VudEN1c3RvbWVySW5mb3JtYXRpb25DZW50ZXInICkgewogICAgICAgIGRlbGV0ZSAkU2VsZi0+e0NvbHVtbkZpbHRlcn0tPntDdXN0b21lcklEfTsKICAgICAgICBkZWxldGUgJFNlbGYtPntHZXRDb2x1bW5GaWx0ZXJ9LT57Q3VzdG9tZXJJRH07CiAgICAgICAgZGVsZXRlICRTZWxmLT57R2V0Q29sdW1uRmlsdGVyU2VsZWN0fS0+e0N1c3RvbWVySUR9OwogICAgICAgIGRlbGV0ZSAkU2VsZi0+e1ZhbGlkRmlsdGVyYWJsZUNvbHVtbnN9LT57Q3VzdG9tZXJJRH07CiAgICAgICAgZGVsZXRlICRTZWxmLT57VmFsaWRTb3J0YWJsZUNvbHVtbnN9LT57Q3VzdG9tZXJJRH07CiAgICB9CgogICAgJFNlbGYtPntVc2VUaWNrZXRTZXJ2aWNlfSA9ICRDb25maWdPYmplY3QtPkdldCgnVGlja2V0OjpTZXJ2aWNlJykgfHwgMDsKCiAgICBpZiAoICRTZWxmLT57Q29uZmlnfS0+e0lzUHJvY2Vzc1dpZGdldH0gKSB7CgogICAgICAgICMgZ2V0IHByb2Nlc3MgbWFuYWdlbWVudCBjb25maWd1cmF0aW9uCiAgICAgICAgJFNlbGYtPntQcm9jZXNzTWFuYWdlbWVudFByb2Nlc3NJRH0KICAgICAgICAgICAgPSAkS2VybmVsOjpPTS0+R2V0KCdLZXJuZWw6OkNvbmZpZycpLT5HZXQoJ1Byb2Nlc3M6OkR5bmFtaWNGaWVsZFByb2Nlc3NNYW5hZ2VtZW50UHJvY2Vzc0lEJyk7CiAgICAgICAgJFNlbGYtPntQcm9jZXNzTWFuYWdlbWVudEFjdGl2aXR5SUR9CiAgICAgICAgICAgID0gJEtlcm5lbDo6T00tPkdldCgnS2VybmVsOjpDb25maWcnKS0+R2V0KCdQcm9jZXNzOjpEeW5hbWljRmllbGRQcm9jZXNzTWFuYWdlbWVudEFjdGl2aXR5SUQnKTsKCiAgICAgICAgIyBnZXQgdGhlIGxpc3Qgb2YgcHJvY2Vzc2VzIGluIHRoZSBzeXN0ZW0KICAgICAgICBteSAkUHJvY2Vzc0xpc3RIYXNoID0gJEtlcm5lbDo6T00tPkdldCgnS2VybmVsOjpTeXN0ZW06OlByb2Nlc3NNYW5hZ2VtZW50OjpQcm9jZXNzJyktPlByb2Nlc3NMaXN0KAogICAgICAgICAgICBQcm9jZXNzU3RhdGUgPT4gWyAnQWN0aXZlJywgJ0ZhZGVBd2F5JywgJ0luYWN0aXZlJyBdLAogICAgICAgICAgICBJbnRlcmZhY2UgICAgPT4gJ2FsbCcsCiAgICAgICAgICAgIFNpbGVudCAgICAgICA9PiAxLAogICAgICAgICk7CgogICAgICAgICMgdXNlIG9ubHkgdGhlIHByb2Nlc3MgRW50aXR5SURzCiAgICAgICAgQHsgJFNlbGYtPntQcm9jZXNzTGlzdH0gfSA9IHNvcnQga2V5cyAleyRQcm9jZXNzTGlzdEhhc2h9OwogICAgfQoKICAgIHJldHVybiAkU2VsZjsKfQoKc3ViIFByZWZlcmVuY2VzIHsKICAgIG15ICggJFNlbGYsICVQYXJhbSApID0gQF87CgogICAgIyBjb25maWd1cmUgY29sdW1ucwogICAgbXkgQENvbHVtbnNFbmFibGVkOwogICAgbXkgQENvbHVtbnNBdmFpbGFibGU7CiAgICBteSBAQ29sdW1uc0F2YWlsYWJsZU5vdEVuYWJsZWQ7CgogICAgIyBjaGVjayBmb3IgZGVmYXVsdCBzZXR0aW5ncwogICAgaWYgKAogICAgICAgICRTZWxmLT57Q29uZmlnfS0+e0RlZmF1bHRDb2x1bW5zfQogICAgICAgICYmIElzSGFzaFJlZldpdGhEYXRhKCAkU2VsZi0+e0NvbmZpZ30tPntEZWZhdWx0Q29sdW1uc30gKQogICAgICAgICkKICAgIHsKICAgICAgICBAQ29sdW1uc0F2YWlsYWJsZSA9IGdyZXAgeyAkU2VsZi0+e0NvbmZpZ30tPntEZWZhdWx0Q29sdW1uc30tPnskX30gfQogICAgICAgICAgICBrZXlzICV7ICRTZWxmLT57Q29uZmlnfS0+e0RlZmF1bHRDb2x1bW5zfSB9OwogICAgICAgIEBDb2x1bW5zRW5hYmxlZCA9IGdyZXAgeyAkU2VsZi0+e0NvbmZpZ30tPntEZWZhdWx0Q29sdW1uc30tPnskX30gZXEgJzInIH0KICAgICAgICAgICAga2V5cyAleyAkU2VsZi0+e0NvbmZpZ30tPntEZWZhdWx0Q29sdW1uc30gfTsKICAgIH0KCiAgICAjIGNoZWNrIGlmIHRoZSB1c2VyIGhhcyBmaWx0ZXIgcHJlZmVyZW5jZXMgZm9yIHRoaXMgd2lkZ2V0CiAgICBteSAlUHJlZmVyZW5jZXMgPSAkS2VybmVsOjpPTS0+R2V0KCdLZXJuZWw6OlN5c3RlbTo6VXNlcicpLT5HZXRQcmVmZXJlbmNlcygKICAgICAgICBVc2VySUQgPT4gJFNlbGYtPntVc2VySUR9LAogICAgKTsKCiAgICAjIGdldCBKU09OIG9iamVjdAogICAgbXkgJEpTT05PYmplY3QgPSAkS2VybmVsOjpPTS0+R2V0KCdLZXJuZWw6OlN5c3RlbTo6SlNPTicpOwoKICAgICMgaWYgcHJlZmVyZW5jZSBzZXR0aW5ncyBhcmUgYXZhaWxhYmxlLCB0YWtlIHRoZW0KICAgIGlmICggJFByZWZlcmVuY2VzeyAkU2VsZi0+e1ByZWZLZXlDb2x1bW5zfSB9ICkgewoKICAgICAgICBteSAkQ29sdW1uc0VuYWJsZWQgPSAkSlNPTk9iamVjdC0+RGVjb2RlKAogICAgICAgICAgICBEYXRhID0+ICRLZXJuZWw6Ok9NLT5HZXQoJ0tlcm5lbDo6T3V0cHV0OjpIVE1MOjpMYXlvdXQnKS0+eyAkU2VsZi0+e1ByZWZLZXlDb2x1bW5zfSB9LAogICAgICAgICk7CgogICAgICAgIEBDb2x1bW5zRW5hYmxlZCA9IGdyZXAgeyAkQ29sdW1uc0VuYWJsZWQtPntDb2x1bW5zfS0+eyRffSA9PSAxIH0KICAgICAgICAgICAga2V5cyAleyAkQ29sdW1uc0VuYWJsZWQtPntDb2x1bW5zfSB9OwoKICAgICAgICBpZiAoICRDb2x1bW5zRW5hYmxlZC0+e09yZGVyfSAmJiBAeyAkQ29sdW1uc0VuYWJsZWQtPntPcmRlcn0gfSApIHsKICAgICAgICAgICAgQENvbHVtbnNFbmFibGVkID0gQHsgJENvbHVtbnNFbmFibGVkLT57T3JkZXJ9IH07CiAgICAgICAgfQogICAgfQoKICAgIG15ICVDb2x1bW5zOwogICAgZm9yIG15ICRDb2x1bW5OYW1lICggc29ydCB7ICRhIGNtcCAkYiB9IEBDb2x1bW5zQXZhaWxhYmxlICkgewogICAgICAgICRDb2x1bW5ze0NvbHVtbnN9LT57JENvbHVtbk5hbWV9ID0gKCBncmVwIHsgJENvbHVtbk5hbWUgZXEgJF8gfSBAQ29sdW1uc0VuYWJsZWQgKSA/IDEgOiAwOwogICAgICAgIGlmICggIWdyZXAgeyAkXyBlcSAkQ29sdW1uTmFtZSB9IEBDb2x1bW5zRW5hYmxlZCApIHsKICAgICAgICAgICAgcHVzaCBAQ29sdW1uc0F2YWlsYWJsZU5vdEVuYWJsZWQsICRDb2x1bW5OYW1lOwogICAgICAgIH0KICAgIH0KCiAgICAjIHJlbW92ZSBDdXN0b21lcklEIGlmIEN1c3RvbWVyIEluZm9ybWF0aW9uIENlbnRlcgogICAgaWYgKCAkU2VsZi0+e0FjdGlvbn0gZXEgJ0FnZW50Q3VzdG9tZXJJbmZvcm1hdGlvbkNlbnRlcicgKSB7CiAgICAgICAgZGVsZXRlICRDb2x1bW5ze0NvbHVtbnN9LT57Q3VzdG9tZXJJRH07CiAgICAgICAgQENvbHVtbnNFbmFibGVkICAgICAgICAgICAgID0gZ3JlcCB7ICRfIG5lICdDdXN0b21lcklEJyB9IEBDb2x1bW5zRW5hYmxlZDsKICAgICAgICBAQ29sdW1uc0F2YWlsYWJsZU5vdEVuYWJsZWQgPSBncmVwIHsgJF8gbmUgJ0N1c3RvbWVySUQnIH0gQENvbHVtbnNBdmFpbGFibGVOb3RFbmFibGVkOwogICAgfQoKICAgIG15IEBQYXJhbXMgPSAoCiAgICAgICAgewogICAgICAgICAgICBEZXNjICA9PiAnU2hvd24gVGlja2V0cycsCiAgICAgICAgICAgIE5hbWUgID0+ICRTZWxmLT57UHJlZktleVNob3dufSwKICAgICAgICAgICAgQmxvY2sgPT4gJ09wdGlvbicsCiAgICAgICAgICAgIERhdGEgID0+IHsKICAgICAgICAgICAgICAgIDUgID0+ICcgNScsCiAgICAgICAgICAgICAgICAxMCA9PiAnMTAnLAogICAgICAgICAgICAgICAgMTUgPT4gJzE1JywKICAgICAgICAgICAgICAgIDIwID0+ICcyMCcsCiAgICAgICAgICAgICAgICAyNSA9PiAnMjUnLAogICAgICAgICAgICAgICAgNTAgPT4gJzUwJywKICAgICAgICAgICAgICAgIDc1ID0+ICc3NScsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIFNlbGVjdGVkSUQgID0+ICRTZWxmLT57UGFnZVNob3dufSwKICAgICAgICAgICAgVHJhbnNsYXRpb24gPT4gMCwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgICAgRGVzYyAgICAgICAgICAgICA9PiAnU2hvd24gQ29sdW1ucycsCiAgICAgICAgICAgIE5hbWUgICAgICAgICAgICAgPT4gJFNlbGYtPntQcmVmS2V5Q29sdW1uc30sCiAgICAgICAgICAgIEJsb2NrICAgICAgICAgICAgPT4gJ0FsbG9jYXRpb25MaXN0JywKICAgICAgICAgICAgQ29sdW1ucyAgICAgICAgICA9PiAkSlNPTk9iamVjdC0+RW5jb2RlKCBEYXRhID0+IFwlQ29sdW1ucyApLAogICAgICAgICAgICBDb2x1bW5zRW5hYmxlZCAgID0+ICRKU09OT2JqZWN0LT5FbmNvZGUoIERhdGEgPT4gXEBDb2x1bW5zRW5hYmxlZCApLAogICAgICAgICAgICBDb2x1bW5zQXZhaWxhYmxlID0+ICRKU09OT2JqZWN0LT5FbmNvZGUoIERhdGEgPT4gXEBDb2x1bW5zQXZhaWxhYmxlTm90RW5hYmxlZCApLAogICAgICAgICAgICBUcmFuc2xhdGlvbiAgICAgID0+IDEsCiAgICAgICAgfSwKICAgICk7CgogICAgcmV0dXJuIEBQYXJhbXM7Cn0KCnN1YiBDb25maWcgewogICAgbXkgKCAkU2VsZiwgJVBhcmFtICkgPSBAXzsKCiAgICAjIGNoZWNrIGlmIGZyb250ZW5kIG1vZHVsZSBvZiBsaW5rIGlzIHVzZWQKICAgIGlmICggJFNlbGYtPntDb25maWd9LT57TGlua30gJiYgJFNlbGYtPntDb25maWd9LT57TGlua30gPX4gL0FjdGlvbj0oLis/KShbJjtdLis/fCkkLyApIHsKICAgICAgICBteSAkQWN0aW9uID0gJDE7CiAgICAgICAgaWYgKCAhJEtlcm5lbDo6T00tPkdldCgnS2VybmVsOjpDb25maWcnKS0+R2V0KCdGcm9udGVuZDo6TW9kdWxlJyktPnskQWN0aW9ufSApIHsKICAgICAgICAgICAgJFNlbGYtPntDb25maWd9LT57TGlua30gPSAnJzsKICAgICAgICB9CiAgICB9CgogICAgcmV0dXJuICgKICAgICAgICAleyAkU2VsZi0+e0NvbmZpZ30gfSwKCiAgICAgICAgIyBEb24ndCBjYWNoZSB0aGlzIGdsb2JhbGx5IGFzIGl0IGNvbnRhaW5zIEpTIHRoYXQgaXMgbm90IGluc2lkZSBvZiB0aGUgSFRNTC4KICAgICAgICBDYWNoZVRUTCA9PiB1bmRlZiwKICAgICAgICBDYWNoZUtleSA9PiB1bmRlZiwKICAgICk7Cn0KCnN1YiBGaWx0ZXJDb250ZW50IHsKICAgIG15ICggJFNlbGYsICVQYXJhbSApID0gQF87CgogICAgcmV0dXJuIGlmICEkUGFyYW17RmlsdGVyQ29sdW1ufTsKCiAgICBteSAkVGlja2V0SURzOwogICAgbXkgJEhlYWRlckNvbHVtbiA9ICRQYXJhbXtGaWx0ZXJDb2x1bW59OwogICAgbXkgQE9yaWdpbmFsVmlld2FibGVUaWNrZXRzOwoKICAgIGlmICgKICAgICAgICAkS2VybmVsOjpPTS0+R2V0KCdLZXJuZWw6OkNvbmZpZycpLT5HZXQoJ09ubHlWYWx1ZXNPblRpY2tldCcpCiAgICAgICAgfHwgJEhlYWRlckNvbHVtbiBlcSAnQ3VzdG9tZXJJRCcKICAgICAgICB8fCAkSGVhZGVyQ29sdW1uIGVxICdDdXN0b21lclVzZXJJRCcKICAgICAgICApCiAgICB7CiAgICAgICAgbXkgJVNlYXJjaFBhcmFtcyAgICAgICAgPSAkU2VsZi0+X1NlYXJjaFBhcmFtc0dldCglUGFyYW0pOwogICAgICAgIG15ICVUaWNrZXRTZWFyY2ggICAgICAgID0gJXsgJFNlYXJjaFBhcmFtc3tUaWNrZXRTZWFyY2h9IH07CiAgICAgICAgbXkgJVRpY2tldFNlYXJjaFN1bW1hcnkgPSAleyAkU2VhcmNoUGFyYW1ze1RpY2tldFNlYXJjaFN1bW1hcnl9IH07CgogICAgICAgICMgYWRkIHByb2Nlc3MgbWFuYWdlbWVudCBzZWFyY2ggdGVybXMKICAgICAgICBpZiAoICRTZWxmLT57Q29uZmlnfS0+e0lzUHJvY2Vzc1dpZGdldH0gKSB7CiAgICAgICAgICAgICRUaWNrZXRTZWFyY2h7ICdEeW5hbWljRmllbGRfJyAuICRTZWxmLT57UHJvY2Vzc01hbmFnZW1lbnRQcm9jZXNzSUR9IH0gPSB7CiAgICAgICAgICAgICAgICBMaWtlID0+ICRTZWxmLT57UHJvY2Vzc0xpc3R9LAogICAgICAgICAgICB9OwogICAgICAgIH0KCiAgICAgICAgaWYgKAogICAgICAgICAgICAhJFNlbGYtPntDb25maWd9LT57SXNQcm9jZXNzV2lkZ2V0fQogICAgICAgICAgICB8fCBJc0FycmF5UmVmV2l0aERhdGEoICRTZWxmLT57UHJvY2Vzc0xpc3R9ICkKICAgICAgICAgICAgKQogICAgICAgIHsKICAgICAgICAgICAgQE9yaWdpbmFsVmlld2FibGVUaWNrZXRzID0gJEtlcm5lbDo6T00tPkdldCgnS2VybmVsOjpTeXN0ZW06OlRpY2tldCcpLT5UaWNrZXRTZWFyY2goCiAgICAgICAgICAgICAgICAlVGlja2V0U2VhcmNoLAogICAgICAgICAgICAgICAgJXsgJFRpY2tldFNlYXJjaFN1bW1hcnl7ICRTZWxmLT57RmlsdGVyfSB9IH0sCiAgICAgICAgICAgICAgICBSZXN1bHQgPT4gJ0FSUkFZJywKICAgICAgICAgICAgKTsKICAgICAgICB9CiAgICB9CgogICAgaWYgKCAkSGVhZGVyQ29sdW1uID1+IG0vXkR5bmFtaWNGaWVsZF8vICYmICFkZWZpbmVkICRTZWxmLT57RHluYW1pY0ZpZWxkfSApIHsKCiAgICAgICAgIyBnZXQgdGhlIGR5bmFtaWMgZmllbGRzIGZvciB0aGlzIHNjcmVlbgogICAgICAgICRTZWxmLT57RHluYW1pY0ZpZWxkfSA9ICRLZXJuZWw6Ok9NLT5HZXQoJ0tlcm5lbDo6U3lzdGVtOjpEeW5hbWljRmllbGQnKS0+RHluYW1pY0ZpZWxkTGlzdEdldCgKICAgICAgICAgICAgVmFsaWQgICAgICA9PiAwLAogICAgICAgICAgICBPYmplY3RUeXBlID0+IFsnVGlja2V0J10sCiAgICAgICAgKTsKICAgIH0KCiAgICAjIGdldCBjb2x1bW4gdmFsdWVzIGZvciB0byBidWlsZCB0aGUgZmlsdGVycyBsYXRlcgogICAgbXkgJENvbHVtblZhbHVlcyA9ICRTZWxmLT5fR2V0Q29sdW1uVmFsdWVzKAogICAgICAgIE9yaWdpbmFsVGlja2V0SURzID0+IFxAT3JpZ2luYWxWaWV3YWJsZVRpY2tldHMsCiAgICAgICAgSGVhZGVyQ29sdW1uICAgICAgPT4gJEhlYWRlckNvbHVtbiwKICAgICk7CgogICAgIyBtYWtlIHN1cmUgdGhhdCBldmVuIGEgdmFsdWUgb2YgMCBpcyBwYXNzZWQgYXMgYSBTZWxlY3RlZCB2YWx1ZSwgZS5nLiBVbmNoZWNrZWQgdmFsdWUgb2YgYQogICAgIyBjaGVjay1ib3ggZHluYW1pYyBmaWVsZC4KICAgIG15ICRTZWxlY3RlZFZhbHVlID0gZGVmaW5lZCAkU2VsZi0+e0dldENvbHVtbkZpbHRlcn0tPnsgJEhlYWRlckNvbHVtbiAuICRTZWxmLT57TmFtZX0gfQogICAgICAgID8gJFNlbGYtPntHZXRDb2x1bW5GaWx0ZXJ9LT57ICRIZWFkZXJDb2x1bW4gLiAkU2VsZi0+e05hbWV9IH0KICAgICAgICA6ICcnOwoKICAgIG15ICRMYWJlbENvbHVtbiA9ICRIZWFkZXJDb2x1bW47CiAgICBpZiAoICRMYWJlbENvbHVtbiA9fiBteyBcQSBEeW5hbWljRmllbGRfIH14bXMgKSB7CgogICAgICAgIG15ICREeW5hbWljRmllbGRDb25maWc7CiAgICAgICAgJExhYmVsQ29sdW1uID1+IHN7XEEgRHluYW1pY0ZpZWxkXyB9e314bXM7CgogICAgICAgIERZTkFNSUNGSUVMRDoKICAgICAgICBmb3IgbXkgJERGQ29uZmlnICggQHsgJFNlbGYtPntEeW5hbWljRmllbGR9IH0gKSB7CiAgICAgICAgICAgIG5leHQgRFlOQU1JQ0ZJRUxEIGlmICFJc0hhc2hSZWZXaXRoRGF0YSgkREZDb25maWcpOwogICAgICAgICAgICBuZXh0IERZTkFNSUNGSUVMRCBpZiAkREZDb25maWctPntOYW1lfSBuZSAkTGFiZWxDb2x1bW47CgogICAgICAgICAgICAkRHluYW1pY0ZpZWxkQ29uZmlnID0gJERGQ29uZmlnOwogICAgICAgICAgICBsYXN0IERZTkFNSUNGSUVMRDsKICAgICAgICB9CiAgICAgICAgaWYgKCBJc0hhc2hSZWZXaXRoRGF0YSgkRHluYW1pY0ZpZWxkQ29uZmlnKSApIHsKICAgICAgICAgICAgJExhYmVsQ29sdW1uID0gJER5bmFtaWNGaWVsZENvbmZpZy0+e0xhYmVsfTsKICAgICAgICB9CiAgICB9CgogICAgIyB2YXJpYWJsZSB0byBzYXZlIHRoZSBmaWx0ZXIncyBIVE1MIGNvZGUKICAgIG15ICRDb2x1bW5GaWx0ZXJKU09OID0gJFNlbGYtPl9Db2x1bW5GaWx0ZXJKU09OKAogICAgICAgIENvbHVtbk5hbWUgICAgPT4gJEhlYWRlckNvbHVtbiwKICAgICAgICBMYWJlbCAgICAgICAgID0+ICRMYWJlbENvbHVtbiwKICAgICAgICBDb2x1bW5WYWx1ZXMgID0+ICRDb2x1bW5WYWx1ZXMtPnskSGVhZGVyQ29sdW1ufSwKICAgICAgICBTZWxlY3RlZFZhbHVlID0+ICRTZWxlY3RlZFZhbHVlLAogICAgICAgIERhc2hib2FyZE5hbWUgPT4gJFNlbGYtPntOYW1lfSwKICAgICk7CgogICAgcmV0dXJuICRDb2x1bW5GaWx0ZXJKU09OOwoKfQoKc3ViIFJ1biB7CiAgICBteSAoICRTZWxmLCAlUGFyYW0gKSA9IEBfOwoKICAgIG15ICVTZWFyY2hQYXJhbXMgICAgICAgID0gJFNlbGYtPl9TZWFyY2hQYXJhbXNHZXQoJVBhcmFtKTsKICAgIG15IEBDb2x1bW5zICAgICAgICAgICAgID0gQHsgJFNlYXJjaFBhcmFtc3tDb2x1bW5zfSB9OwogICAgbXkgJVRpY2tldFNlYXJjaCAgICAgICAgPSAleyAkU2VhcmNoUGFyYW1ze1RpY2tldFNlYXJjaH0gfTsKICAgIG15ICVUaWNrZXRTZWFyY2hTdW1tYXJ5ID0gJXsgJFNlYXJjaFBhcmFtc3tUaWNrZXRTZWFyY2hTdW1tYXJ5fSB9OwoKICAgIG15ICRDYWNoZUtleSA9IGpvaW4gJy0nLCAkU2VsZi0+e05hbWV9LAogICAgICAgICRTZWxmLT57QWN0aW9ufSwKICAgICAgICAkU2VsZi0+e1BhZ2VTaG93bn0sCiAgICAgICAgJFNlbGYtPntTdGFydEhpdH0sCiAgICAgICAgJFNlbGYtPntVc2VySUR9OwogICAgbXkgJENhY2hlQ29sdW1ucyA9IGpvaW4oCiAgICAgICAgJywnLAogICAgICAgIG1hcCB7CiAgICAgICAgICAgICRfIC4gJz0+JyAuICRTZWxmLT57R2V0Q29sdW1uRmlsdGVyU2VsZWN0fS0+eyRffQogICAgICAgICAgICB9CiAgICAgICAgICAgIHNvcnQga2V5cyAleyAkU2VsZi0+e0dldENvbHVtbkZpbHRlclNlbGVjdH0gfQogICAgKTsKICAgICRDYWNoZUtleSAuPSAnLScgLiAkQ2FjaGVDb2x1bW5zIGlmICRDYWNoZUNvbHVtbnM7CgogICAgJENhY2hlS2V5IC49ICctJyAuICRTZWxmLT57U29ydEJ5fSAgaWYgZGVmaW5lZCAkU2VsZi0+e1NvcnRCeX07CiAgICAkQ2FjaGVLZXkgLj0gJy0nIC4gJFNlbGYtPntPcmRlckJ5fSBpZiBkZWZpbmVkICRTZWxmLT57T3JkZXJCeX07CgogICAgIyBDdXN0b21lckluZm9ybWF0aW9uQ2VudGVyIHNob3dzIGRhdGEgcGVyIEN1c3RvbWVySUQKICAgIGlmICggJFBhcmFte0N1c3RvbWVySUR9ICkgewogICAgICAgICRDYWNoZUtleSAuPSAnLScgLiAkUGFyYW17Q3VzdG9tZXJJRH07CiAgICB9CgogICAgIyBnZXQgY2FjaGUgb2JqZWN0CiAgICBteSAkQ2FjaGVPYmplY3QgPSAkS2VybmVsOjpPTS0+R2V0KCdLZXJuZWw6OlN5c3RlbTo6Q2FjaGUnKTsKCiAgICAjIGNoZWNrIGNhY2hlCiAgICBteSAkVGlja2V0SURzID0gJENhY2hlT2JqZWN0LT5HZXQoCiAgICAgICAgVHlwZSA9PiAnRGFzaGJvYXJkJywKICAgICAgICBLZXkgID0+ICRDYWNoZUtleSAuICctJyAuICRTZWxmLT57RmlsdGVyfSAuICctTGlzdCcsCiAgICApOwoKICAgICMgZmluZCBhbmQgc2hvdyB0aWNrZXQgbGlzdAogICAgbXkgJENhY2hlVXNlZCA9IDE7CgogICAgIyBnZXQgdGlja2V0IG9iamVjdAogICAgbXkgJFRpY2tldE9iamVjdCA9ICRLZXJuZWw6Ok9NLT5HZXQoJ0tlcm5lbDo6U3lzdGVtOjpUaWNrZXQnKTsKCiAgICBpZiAoICEkVGlja2V0SURzICkgewoKICAgICAgICAjIHF1b3RlIGFsbCBDdXN0b21lcklEcwogICAgICAgIGlmICggJFRpY2tldFNlYXJjaHtDdXN0b21lcklEfSApIHsKICAgICAgICAgICAgJFRpY2tldFNlYXJjaHtDdXN0b21lcklEfSA9ICRLZXJuZWw6Ok9NLT5HZXQoJ0tlcm5lbDo6U3lzdGVtOjpEQicpLT5RdWVyeVN0cmluZ0VzY2FwZSgKICAgICAgICAgICAgICAgIFF1ZXJ5U3RyaW5nID0+ICRUaWNrZXRTZWFyY2h7Q3VzdG9tZXJJRH0sCiAgICAgICAgICAgICk7CiAgICAgICAgfQoKICAgICAgICAjIGFkZCBzb3J0IGJ5IHBhcmFtZXRlciB0byB0aGUgc2VhcmNoCiAgICAgICAgaWYgKAogICAgICAgICAgICAhZGVmaW5lZCAkVGlja2V0U2VhcmNoe1NvcnRCeX0KICAgICAgICAgICAgfHwgISRTZWxmLT57VmFsaWRTb3J0YWJsZUNvbHVtbnN9LT57ICRUaWNrZXRTZWFyY2h7U29ydEJ5fSB9CiAgICAgICAgICAgICkKICAgICAgICB7CiAgICAgICAgICAgIGlmICggJFNlbGYtPntTb3J0Qnl9ICYmICRTZWxmLT57VmFsaWRTb3J0YWJsZUNvbHVtbnN9LT57ICRTZWxmLT57U29ydEJ5fSB9ICkgewogICAgICAgICAgICAgICAgJFRpY2tldFNlYXJjaHtTb3J0Qnl9ID0gJFNlbGYtPntTb3J0Qnl9OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgJFRpY2tldFNlYXJjaHtTb3J0Qnl9ID0gJ0FnZSc7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgICMgYWRkIG9yZGVyIGJ5IHBhcmFtZXRlciB0byB0aGUgc2VhcmNoCiAgICAgICAgaWYgKCAkU2VsZi0+e09yZGVyQnl9ICkgewogICAgICAgICAgICAkVGlja2V0U2VhcmNoe09yZGVyQnl9ID0gJFNlbGYtPntPcmRlckJ5fTsKICAgICAgICB9CgogICAgICAgICMgYWRkIHByb2Nlc3MgbWFuYWdlbWVudCBzZWFyY2ggdGVybXMKICAgICAgICBpZiAoICRTZWxmLT57Q29uZmlnfS0+e0lzUHJvY2Vzc1dpZGdldH0gKSB7CiAgICAgICAgICAgICRUaWNrZXRTZWFyY2h7ICdEeW5hbWljRmllbGRfJyAuICRTZWxmLT57UHJvY2Vzc01hbmFnZW1lbnRQcm9jZXNzSUR9IH0gPSB7CiAgICAgICAgICAgICAgICBMaWtlID0+ICRTZWxmLT57UHJvY2Vzc0xpc3R9LAogICAgICAgICAgICB9OwogICAgICAgIH0KCiAgICAgICAgJENhY2hlVXNlZCA9IDA7CiAgICAgICAgbXkgQFRpY2tldElEc0FycmF5OwogICAgICAgIGlmICgKICAgICAgICAgICAgISRTZWxmLT57Q29uZmlnfS0+e0lzUHJvY2Vzc1dpZGdldH0KICAgICAgICAgICAgfHwgSXNBcnJheVJlZldpdGhEYXRhKCAkU2VsZi0+e1Byb2Nlc3NMaXN0fSApCiAgICAgICAgICAgICkKICAgICAgICB7CiAgICAgICAgICAgIEBUaWNrZXRJRHNBcnJheSA9ICRUaWNrZXRPYmplY3QtPlRpY2tldFNlYXJjaCgKICAgICAgICAgICAgICAgIFJlc3VsdCA9PiAnQVJSQVknLAogICAgICAgICAgICAgICAgJVRpY2tldFNlYXJjaCwKICAgICAgICAgICAgICAgICV7ICRUaWNrZXRTZWFyY2hTdW1tYXJ5eyAkU2VsZi0+e0ZpbHRlcn0gfSB9LAogICAgICAgICAgICAgICAgJXsgJFNlbGYtPntDb2x1bW5GaWx0ZXJ9IH0sCiAgICAgICAgICAgICAgICBMaW1pdCA9PiAkU2VsZi0+e1BhZ2VTaG93bn0gKyAkU2VsZi0+e1N0YXJ0SGl0fSAtIDEsCiAgICAgICAgICAgICk7CiAgICAgICAgfQogICAgICAgICRUaWNrZXRJRHMgPSBcQFRpY2tldElEc0FycmF5OwogICAgfQoKICAgICMgY2hlY2sgY2FjaGUKICAgIG15ICRTdW1tYXJ5ID0gJENhY2hlT2JqZWN0LT5HZXQoCiAgICAgICAgVHlwZSA9PiAnRGFzaGJvYXJkJywKICAgICAgICBLZXkgID0+ICRDYWNoZUtleSAuICctU3VtbWFyeScsCiAgICApOwoKICAgICMgaWYgbm8gY2FjaGUgb3IgbmV3IGxpc3QgcmVzdWx0LCBkbyBjb3VudCBsb29rdXAKICAgIGlmICggISRTdW1tYXJ5IHx8ICEkQ2FjaGVVc2VkICkgewogICAgICAgIFRZUEU6CiAgICAgICAgZm9yIG15ICRUeXBlICggc29ydCBrZXlzICVUaWNrZXRTZWFyY2hTdW1tYXJ5ICkgewogICAgICAgICAgICBuZXh0IFRZUEUgaWYgISRUaWNrZXRTZWFyY2hTdW1tYXJ5eyRUeXBlfTsKCiAgICAgICAgICAgICMgY29weSBvcmlnaW5hbCBjb2x1bW4gZmlsdGVyCiAgICAgICAgICAgIG15ICVDb2x1bW5GaWx0ZXIgPSAleyAkU2VsZi0+e0NvbHVtbkZpbHRlcn0gfHwge30gfTsKCiAgICAgICAgICAgICMgbG9vcCB0aHJvdWdoIGFsbCBjb2x1bW4gZmlsdGVyIGVsZW1lbnRzCiAgICAgICAgICAgIGZvciBteSAkRWxlbWVudCAoIHNvcnQga2V5cyAlQ29sdW1uRmlsdGVyICkgewoKICAgICAgICAgICAgICAgICMgdmVyaWZ5IGlmIGN1cnJlbnQgY29sdW1uIGZpbHRlciBlbGVtZW50IGlzIGFscmVhZHkgcHJlc2VudCBpbiB0aGUgdGlja2V0IHNlYXJjaAogICAgICAgICAgICAgICAgIyBzdW1tYXJ5LCB0byBkZWxldGUgaXQgZnJvbSB0aGUgY29sdW1uIGZpbHRlciBoYXNoCiAgICAgICAgICAgICAgICBpZiAoICRUaWNrZXRTZWFyY2hTdW1tYXJ5eyRUeXBlfS0+eyRFbGVtZW50fSApIHsKICAgICAgICAgICAgICAgICAgICBkZWxldGUgJENvbHVtbkZpbHRlcnskRWxlbWVudH07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICMgYWRkIHByb2Nlc3MgbWFuYWdlbWVudCBzZWFyY2ggdGVybXMKICAgICAgICAgICAgaWYgKCAkU2VsZi0+e0NvbmZpZ30tPntJc1Byb2Nlc3NXaWRnZXR9ICkgewogICAgICAgICAgICAgICAgJFRpY2tldFNlYXJjaHsgJ0R5bmFtaWNGaWVsZF8nIC4gJFNlbGYtPntQcm9jZXNzTWFuYWdlbWVudFByb2Nlc3NJRH0gfSA9IHsKICAgICAgICAgICAgICAgICAgICBMaWtlID0+ICRTZWxmLT57UHJvY2Vzc0xpc3R9LAogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgJFN1bW1hcnktPnskVHlwZX0gPSAwOwoKICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgISRTZWxmLT57Q29uZmlnfS0+e0lzUHJvY2Vzc1dpZGdldH0KICAgICAgICAgICAgICAgIHx8IElzQXJyYXlSZWZXaXRoRGF0YSggJFNlbGYtPntQcm9jZXNzTGlzdH0gKQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkU3VtbWFyeS0+eyRUeXBlfSA9ICRUaWNrZXRPYmplY3QtPlRpY2tldFNlYXJjaCgKICAgICAgICAgICAgICAgICAgICBSZXN1bHQgPT4gJ0NPVU5UJywKICAgICAgICAgICAgICAgICAgICAlVGlja2V0U2VhcmNoLAogICAgICAgICAgICAgICAgICAgICV7ICRUaWNrZXRTZWFyY2hTdW1tYXJ5eyRUeXBlfSB9LAogICAgICAgICAgICAgICAgICAgICV7ICRTZWxmLT57Q29sdW1uRmlsdGVyfSB9LAogICAgICAgICAgICAgICAgICAgICVDb2x1bW5GaWx0ZXIsCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgICMgc2V0IGNhY2hlCiAgICBpZiAoICEkQ2FjaGVVc2VkICYmICRTZWxmLT57Q29uZmlnfS0+e0NhY2hlVFRMTG9jYWx9ICkgewogICAgICAgICRDYWNoZU9iamVjdC0+U2V0KAogICAgICAgICAgICBUeXBlICA9PiAnRGFzaGJvYXJkJywKICAgICAgICAgICAgS2V5ICAgPT4gJENhY2hlS2V5IC4gJy1TdW1tYXJ5JywKICAgICAgICAgICAgVmFsdWUgPT4gJFN1bW1hcnksCiAgICAgICAgICAgIFRUTCAgID0+ICRTZWxmLT57Q29uZmlnfS0+e0NhY2hlVFRMTG9jYWx9ICogNjAsCiAgICAgICAgKTsKICAgICAgICAkQ2FjaGVPYmplY3QtPlNldCgKICAgICAgICAgICAgVHlwZSAgPT4gJ0Rhc2hib2FyZCcsCiAgICAgICAgICAgIEtleSAgID0+ICRDYWNoZUtleSAuICctJyAuICRTZWxmLT57RmlsdGVyfSAuICctTGlzdCcsCiAgICAgICAgICAgIFZhbHVlID0+ICRUaWNrZXRJRHMsCiAgICAgICAgICAgIFRUTCAgID0+ICRTZWxmLT57Q29uZmlnfS0+e0NhY2hlVFRMTG9jYWx9ICogNjAsCiAgICAgICAgKTsKICAgIH0KCiAgICAjIHNldCBjc3MgY2xhc3MKICAgICRTdW1tYXJ5LT57ICRTZWxmLT57RmlsdGVyfSAuICc6OlNlbGVjdGVkJyB9ID0gJ1NlbGVjdGVkJzsKCiAgICAjIGdldCBsYXlvdXQgb2JqZWN0CiAgICBteSAkTGF5b3V0T2JqZWN0ID0gJEtlcm5lbDo6T00tPkdldCgnS2VybmVsOjpPdXRwdXQ6OkhUTUw6OkxheW91dCcpOwoKICAgICMgZ2V0IGZpbHRlciB0aWNrZXQgY291bnRzCiAgICAkTGF5b3V0T2JqZWN0LT5CbG9jaygKICAgICAgICBOYW1lID0+ICdDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljRmlsdGVyJywKICAgICAgICBEYXRhID0+IHsKICAgICAgICAgICAgJVBhcmFtLAogICAgICAgICAgICAleyAkU2VsZi0+e0NvbmZpZ30gfSwKICAgICAgICAgICAgTmFtZSA9PiAkU2VsZi0+e05hbWV9LAogICAgICAgICAgICAleyRTdW1tYXJ5fSwKICAgICAgICB9LAogICAgKTsKCiAgICAjIGdldCBjb25maWcgb2JqZWN0CiAgICBteSAkQ29uZmlnT2JqZWN0ID0gJEtlcm5lbDo6T00tPkdldCgnS2VybmVsOjpDb25maWcnKTsKCiAgICAjIGFkZCBwYWdlIG5hdiBiYXIKICAgIG15ICRUb3RhbCA9ICRTdW1tYXJ5LT57ICRTZWxmLT57RmlsdGVyfSB9IHx8IDA7CgogICAgbXkgJUdldENvbHVtbkZpbHRlciA9ICRTZWxmLT57R2V0Q29sdW1uRmlsdGVyfSA/ICV7ICRTZWxmLT57R2V0Q29sdW1uRmlsdGVyfSB9IDogKCk7CgogICAgbXkgJENvbHVtbkZpbHRlckxpbmsgPSAnJzsKICAgIENPTFVNTk5BTUU6CiAgICBmb3IgbXkgJENvbHVtbk5hbWUgKCBzb3J0IGtleXMgJUdldENvbHVtbkZpbHRlciApIHsKICAgICAgICBuZXh0IENPTFVNTk5BTUUgaWYgISRDb2x1bW5OYW1lOwogICAgICAgIG5leHQgQ09MVU1OTkFNRSBpZiAhJEdldENvbHVtbkZpbHRlcnskQ29sdW1uTmFtZX07CiAgICAgICAgJENvbHVtbkZpbHRlckxpbmsKICAgICAgICAgICAgLj0gJzsnIC4gJExheW91dE9iamVjdC0+QXNjaWkySHRtbCggVGV4dCA9PiAnQ29sdW1uRmlsdGVyJyAuICRDb2x1bW5OYW1lICkKICAgICAgICAgICAgLiAnPScgLiAkTGF5b3V0T2JqZWN0LT5Bc2NpaTJIdG1sKCBUZXh0ID0+ICRHZXRDb2x1bW5GaWx0ZXJ7JENvbHVtbk5hbWV9ICkKICAgIH0KCiAgICBteSAkTGlua1BhZ2UgPQogICAgICAgICdTdWJhY3Rpb249RWxlbWVudDtOYW1lPScgLiAkU2VsZi0+e05hbWV9CiAgICAgICAgLiAnO0ZpbHRlcj0nIC4gJFNlbGYtPntGaWx0ZXJ9CiAgICAgICAgLiAnO1NvcnRCeT0nIC4gICggJFNlbGYtPntTb3J0Qnl9ICB8fCAnJyApCiAgICAgICAgLiAnO09yZGVyQnk9JyAuICggJFNlbGYtPntPcmRlckJ5fSB8fCAnJyApCiAgICAgICAgLiAkQ29sdW1uRmlsdGVyTGluawogICAgICAgIC4gJzsnOwoKICAgIGlmICggJFBhcmFte0N1c3RvbWVySUR9ICkgewogICAgICAgICRMaW5rUGFnZSAuPSAiQ3VzdG9tZXJJRD0kUGFyYW17Q3VzdG9tZXJJRH07IjsKICAgIH0KICAgIG15ICVQYWdlTmF2ID0gJExheW91dE9iamVjdC0+UGFnZU5hdkJhcigKICAgICAgICBTdGFydEhpdCAgICAgICA9PiAkU2VsZi0+e1N0YXJ0SGl0fSwKICAgICAgICBQYWdlU2hvd24gICAgICA9PiAkU2VsZi0+e1BhZ2VTaG93bn0sCiAgICAgICAgQWxsSGl0cyAgICAgICAgPT4gJFRvdGFsIHx8IDEsCiAgICAgICAgQWN0aW9uICAgICAgICAgPT4gJ0FjdGlvbj0nIC4gJExheW91dE9iamVjdC0+e0FjdGlvbn0sCiAgICAgICAgTGluayAgICAgICAgICAgPT4gJExpbmtQYWdlLAogICAgICAgIEFKQVhSZXBsYWNlICAgID0+ICdEYXNoYm9hcmQnIC4gJFNlbGYtPntOYW1lfSwKICAgICAgICBJRFByZWZpeCAgICAgICA9PiAnRGFzaGJvYXJkJyAuICRTZWxmLT57TmFtZX0sCiAgICAgICAgS2VlcFNjcmlwdFRhZ3MgPT4gJFBhcmFte0FKQVh9LAogICAgKTsKICAgICRMYXlvdXRPYmplY3QtPkJsb2NrKAogICAgICAgIE5hbWUgPT4gJ0NvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNGaWx0ZXJOYXZCYXInLAogICAgICAgIERhdGEgPT4gewogICAgICAgICAgICAleyAkU2VsZi0+e0NvbmZpZ30gfSwKICAgICAgICAgICAgTmFtZSA9PiAkU2VsZi0+e05hbWV9LAogICAgICAgICAgICAlUGFnZU5hdiwKICAgICAgICB9LAogICAgKTsKCiAgICAjIHNob3cgdGFibGUgaGVhZGVyCiAgICAkTGF5b3V0T2JqZWN0LT5CbG9jaygKICAgICAgICBOYW1lID0+ICdDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljSGVhZGVyJywKICAgICAgICBEYXRhID0+IHt9LAogICAgKTsKCiAgICAjIGRlZmluZSB3aGljaCBtZXRhIGl0ZW1zIHdpbGwgYmUgc2hvd24KICAgIG15IEBNZXRhSXRlbXMgPSAkTGF5b3V0T2JqZWN0LT5UaWNrZXRNZXRhSXRlbXNDb3VudCgpOwoKICAgICMgc2hvdyBub24tbGFiZWxlZCB0YWJsZSBoZWFkZXJzCiAgICBteSAkQ1NTID0gJyc7CiAgICBteSAkT3JkZXJCeTsKICAgIGZvciBteSAkSXRlbSAoQE1ldGFJdGVtcykgewogICAgICAgICRDU1MgPSAnJzsKICAgICAgICBteSAkVGl0bGUgPSAkSXRlbTsKICAgICAgICBpZiAoICRTZWxmLT57U29ydEJ5fSAmJiAoICRTZWxmLT57U29ydEJ5fSBlcSAkSXRlbSApICkgewogICAgICAgICAgICBpZiAoICRTZWxmLT57T3JkZXJCeX0gJiYgKCAkU2VsZi0+e09yZGVyQnl9IGVxICdVcCcgKSApIHsKICAgICAgICAgICAgICAgICRPcmRlckJ5ID0gJ0Rvd24nOwogICAgICAgICAgICAgICAgJENTUyAuPSAnIFNvcnREZXNjZW5kaW5nTGFyZ2UnOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgJE9yZGVyQnkgPSAnVXAnOwogICAgICAgICAgICAgICAgJENTUyAuPSAnIFNvcnRBc2NlbmRpbmdMYXJnZSc7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICMgc2V0IHRpdGxlIGRlc2NyaXB0aW9uCiAgICAgICAgICAgIG15ICRUaXRsZURlc2MgPSAkT3JkZXJCeSBlcSAnRG93bicgPyAnc29ydGVkIGRlc2NlbmRpbmcnIDogJ3NvcnRlZCBhc2NlbmRpbmcnOwogICAgICAgICAgICAkVGl0bGVEZXNjID0gJExheW91dE9iamVjdC0+e0xhbmd1YWdlT2JqZWN0fS0+VHJhbnNsYXRlKCRUaXRsZURlc2MpOwogICAgICAgICAgICAkVGl0bGUgLj0gJywgJyAuICRUaXRsZURlc2M7CiAgICAgICAgfQoKICAgICAgICAjIGFkZCBzdXJyb3VuZGluZyBjb250YWluZXIKICAgICAgICAkTGF5b3V0T2JqZWN0LT5CbG9jaygKICAgICAgICAgICAgTmFtZSA9PiAnR2VuZXJhbE92ZXJ2aWV3SGVhZGVyJywKICAgICAgICApOwogICAgICAgICRMYXlvdXRPYmplY3QtPkJsb2NrKAogICAgICAgICAgICBOYW1lID0+ICdDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljSGVhZGVyTWV0YScsCiAgICAgICAgICAgIERhdGEgPT4gewogICAgICAgICAgICAgICAgQ1NTID0+ICRDU1MsCiAgICAgICAgICAgIH0sCiAgICAgICAgKTsKCiAgICAgICAgaWYgKCAkSXRlbSBlcSAnTmV3IEFydGljbGUnICkgewoKICAgICAgICAgICAgJExheW91dE9iamVjdC0+QmxvY2soCiAgICAgICAgICAgICAgICBOYW1lID0+ICdDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljSGVhZGVyTWV0YUVtcHR5JywKICAgICAgICAgICAgICAgIERhdGEgPT4gewogICAgICAgICAgICAgICAgICAgIEhlYWRlckNvbHVtbk5hbWUgPT4gJEl0ZW0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICApOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgJExheW91dE9iamVjdC0+QmxvY2soCiAgICAgICAgICAgICAgICBOYW1lID0+ICdDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljSGVhZGVyTWV0YUxpbmsnLAogICAgICAgICAgICAgICAgRGF0YSA9PiB7CiAgICAgICAgICAgICAgICAgICAgJVBhcmFtLAogICAgICAgICAgICAgICAgICAgIE5hbWUgICAgICAgICAgICAgPT4gJFNlbGYtPntOYW1lfSwKICAgICAgICAgICAgICAgICAgICBPcmRlckJ5ICAgICAgICAgID0+ICRPcmRlckJ5IHx8ICdVcCcsCiAgICAgICAgICAgICAgICAgICAgSGVhZGVyQ29sdW1uTmFtZSA9PiAkSXRlbSwKICAgICAgICAgICAgICAgICAgICBUaXRsZSAgICAgICAgICAgID0+ICRUaXRsZSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICk7CiAgICAgICAgfQogICAgfQoKICAgICMgc2hvdyBhbGwgbmVlZGVkIGhlYWRlcnMKICAgIEhFQURFUkNPTFVNTjoKICAgIGZvciBteSAkSGVhZGVyQ29sdW1uIChAQ29sdW1ucykgewoKICAgICAgICAjIHNraXAgQ3VzdG9tZXJJRCBpZiBDdXN0b21lciBJbmZvcm1hdGlvbiBDZW50ZXIKICAgICAgICBpZiAoCiAgICAgICAgICAgICRTZWxmLT57QWN0aW9ufSBlcSAnQWdlbnRDdXN0b21lckluZm9ybWF0aW9uQ2VudGVyJwogICAgICAgICAgICAmJiAkSGVhZGVyQ29sdW1uIGVxICdDdXN0b21lcklEJwogICAgICAgICAgICApCiAgICAgICAgewogICAgICAgICAgICBuZXh0IEhFQURFUkNPTFVNTjsKICAgICAgICB9CgogICAgICAgIGlmICggJEhlYWRlckNvbHVtbiAhfiBte1xBIER5bmFtaWNGaWVsZF99eG1zICkgewoKICAgICAgICAgICAgJENTUyA9ICcnOwogICAgICAgICAgICBteSAkVGl0bGUgPSAkSGVhZGVyQ29sdW1uOwoKICAgICAgICAgICAgaWYgKCAkU2VsZi0+e1NvcnRCeX0gJiYgKCAkU2VsZi0+e1NvcnRCeX0gZXEgJEhlYWRlckNvbHVtbiApICkgewogICAgICAgICAgICAgICAgaWYgKCAkU2VsZi0+e09yZGVyQnl9ICYmICggJFNlbGYtPntPcmRlckJ5fSBlcSAnVXAnICkgKSB7CiAgICAgICAgICAgICAgICAgICAgJE9yZGVyQnkgPSAnRG93bic7CiAgICAgICAgICAgICAgICAgICAgJENTUyAuPSAnIFNvcnREZXNjZW5kaW5nTGFyZ2UnOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgJE9yZGVyQnkgPSAnVXAnOwogICAgICAgICAgICAgICAgICAgICRDU1MgLj0gJyBTb3J0QXNjZW5kaW5nTGFyZ2UnOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICMgYWRkIHRpdGxlIGRlc2NyaXB0aW9uCiAgICAgICAgICAgICAgICBteSAkVGl0bGVEZXNjID0gJE9yZGVyQnkgZXEgJ0Rvd24nID8gJ3NvcnRlZCBkZXNjZW5kaW5nJyA6ICdzb3J0ZWQgYXNjZW5kaW5nJzsKICAgICAgICAgICAgICAgICRUaXRsZURlc2MgPSAkTGF5b3V0T2JqZWN0LT57TGFuZ3VhZ2VPYmplY3R9LT5UcmFuc2xhdGUoJFRpdGxlRGVzYyk7CiAgICAgICAgICAgICAgICAkVGl0bGUgLj0gJywgJyAuICRUaXRsZURlc2M7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICMgdHJhbnNsYXRlIHRoZSBjb2x1bW4gbmFtZSB0byB3cml0ZSBpdCBpbiB0aGUgY3VycmVudCBsYW5ndWFnZQogICAgICAgICAgICBteSAkVHJhbnNsYXRlZFdvcmQ7CiAgICAgICAgICAgIGlmICggJEhlYWRlckNvbHVtbiBlcSAnRXNjYWxhdGlvblRpbWUnICkgewogICAgICAgICAgICAgICAgJFRyYW5zbGF0ZWRXb3JkID0gJExheW91dE9iamVjdC0+e0xhbmd1YWdlT2JqZWN0fS0+VHJhbnNsYXRlKCdTZXJ2aWNlIFRpbWUnKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNpZiAoICRIZWFkZXJDb2x1bW4gZXEgJ0VzY2FsYXRpb25SZXNwb25zZVRpbWUnICkgewogICAgICAgICAgICAgICAgJFRyYW5zbGF0ZWRXb3JkID0gJExheW91dE9iamVjdC0+e0xhbmd1YWdlT2JqZWN0fS0+VHJhbnNsYXRlKCdGaXJzdCBSZXNwb25zZSBUaW1lJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzaWYgKCAkSGVhZGVyQ29sdW1uIGVxICdFc2NhbGF0aW9uU29sdXRpb25UaW1lJyApIHsKICAgICAgICAgICAgICAgICRUcmFuc2xhdGVkV29yZCA9ICRMYXlvdXRPYmplY3QtPntMYW5ndWFnZU9iamVjdH0tPlRyYW5zbGF0ZSgnU29sdXRpb24gVGltZScpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2lmICggJEhlYWRlckNvbHVtbiBlcSAnRXNjYWxhdGlvblVwZGF0ZVRpbWUnICkgewogICAgICAgICAgICAgICAgJFRyYW5zbGF0ZWRXb3JkID0gJExheW91dE9iamVjdC0+e0xhbmd1YWdlT2JqZWN0fS0+VHJhbnNsYXRlKCdVcGRhdGUgVGltZScpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2lmICggJEhlYWRlckNvbHVtbiBlcSAnUGVuZGluZ1RpbWUnICkgewogICAgICAgICAgICAgICAgJFRyYW5zbGF0ZWRXb3JkID0gJExheW91dE9iamVjdC0+e0xhbmd1YWdlT2JqZWN0fS0+VHJhbnNsYXRlKCdQZW5kaW5nIHRpbGwnKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICRUcmFuc2xhdGVkV29yZCA9ICRMYXlvdXRPYmplY3QtPntMYW5ndWFnZU9iamVjdH0tPlRyYW5zbGF0ZSgkSGVhZGVyQ29sdW1uKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgIyBhZGQgc3Vycm91bmRpbmcgY29udGFpbmVyCiAgICAgICAgICAgICRMYXlvdXRPYmplY3QtPkJsb2NrKAogICAgICAgICAgICAgICAgTmFtZSA9PiAnR2VuZXJhbE92ZXJ2aWV3SGVhZGVyJywKICAgICAgICAgICAgKTsKICAgICAgICAgICAgJExheW91dE9iamVjdC0+QmxvY2soCiAgICAgICAgICAgICAgICBOYW1lID0+ICdDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljSGVhZGVyVGlja2V0SGVhZGVyJywKICAgICAgICAgICAgICAgIERhdGEgPT4ge30sCiAgICAgICAgICAgICk7CgogICAgICAgICAgICBpZiAoICRIZWFkZXJDb2x1bW4gZXEgJ1RpY2tldE51bWJlcicgKSB7CiAgICAgICAgICAgICAgICAkTGF5b3V0T2JqZWN0LT5CbG9jaygKICAgICAgICAgICAgICAgICAgICBOYW1lID0+ICdDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljSGVhZGVyVGlja2V0TnVtYmVyQ29sdW1uJywKICAgICAgICAgICAgICAgICAgICBEYXRhID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgJVBhcmFtLAogICAgICAgICAgICAgICAgICAgICAgICBDU1MgPT4gJENTUyB8fCAnJywKICAgICAgICAgICAgICAgICAgICAgICAgTmFtZSAgICA9PiAkU2VsZi0+e05hbWV9LAogICAgICAgICAgICAgICAgICAgICAgICBPcmRlckJ5ID0+ICRPcmRlckJ5IHx8ICdVcCcsCiAgICAgICAgICAgICAgICAgICAgICAgIEZpbHRlciAgPT4gJFNlbGYtPntGaWx0ZXJ9LAogICAgICAgICAgICAgICAgICAgICAgICBUaXRsZSAgID0+ICRUaXRsZSwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIG5leHQgSEVBREVSQ09MVU1OOwogICAgICAgICAgICB9CgogICAgICAgICAgICBteSAkRmlsdGVyVGl0bGUgICAgID0gJEhlYWRlckNvbHVtbjsKICAgICAgICAgICAgbXkgJEZpbHRlclRpdGxlRGVzYyA9ICdmaWx0ZXIgbm90IGFjdGl2ZSc7CiAgICAgICAgICAgIGlmICggJFNlbGYtPntHZXRDb2x1bW5GaWx0ZXJTZWxlY3R9ICYmICRTZWxmLT57R2V0Q29sdW1uRmlsdGVyU2VsZWN0fS0+eyRIZWFkZXJDb2x1bW59ICkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJENTUyAuPSAnIEZpbHRlckFjdGl2ZSc7CiAgICAgICAgICAgICAgICAkRmlsdGVyVGl0bGVEZXNjID0gJ2ZpbHRlciBhY3RpdmUnOwogICAgICAgICAgICB9CiAgICAgICAgICAgICRGaWx0ZXJUaXRsZURlc2MgPSAkTGF5b3V0T2JqZWN0LT57TGFuZ3VhZ2VPYmplY3R9LT5UcmFuc2xhdGUoJEZpbHRlclRpdGxlRGVzYyk7CiAgICAgICAgICAgICRGaWx0ZXJUaXRsZSAuPSAnLCAnIC4gJEZpbHRlclRpdGxlRGVzYzsKCiAgICAgICAgICAgICRMYXlvdXRPYmplY3QtPkJsb2NrKAogICAgICAgICAgICAgICAgTmFtZSA9PiAnQ29udGVudExhcmdlVGlja2V0R2VuZXJpY0hlYWRlckNvbHVtbicsCiAgICAgICAgICAgICAgICBEYXRhID0+IHsKICAgICAgICAgICAgICAgICAgICBIZWFkZXJDb2x1bW5OYW1lICAgICA9PiAkSGVhZGVyQ29sdW1uICAgfHwgJycsCiAgICAgICAgICAgICAgICAgICAgSGVhZGVyTmFtZVRyYW5zbGF0ZWQgPT4gJFRyYW5zbGF0ZWRXb3JkIHx8ICRIZWFkZXJDb2x1bW4sCiAgICAgICAgICAgICAgICAgICAgQ1NTICAgICAgICAgICAgICAgICAgPT4gJENTUyAgICAgICAgICAgIHx8ICcnLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgKTsKCiAgICAgICAgICAgICMgdmVyaWZ5IGlmIGNvbHVtbiBpcyBmaWx0ZXJhYmxlIGFuZCBzb3J0YWJsZQogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAkU2VsZi0+e1ZhbGlkU29ydGFibGVDb2x1bW5zfS0+eyRIZWFkZXJDb2x1bW59CiAgICAgICAgICAgICAgICAmJiAkU2VsZi0+e1ZhbGlkRmlsdGVyYWJsZUNvbHVtbnN9LT57JEhlYWRlckNvbHVtbn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgewoKICAgICAgICAgICAgICAgIG15ICRDc3M7CiAgICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAgICAgJEhlYWRlckNvbHVtbiBlcSAnQ3VzdG9tZXJJRCcKICAgICAgICAgICAgICAgICAgICB8fCAkSGVhZGVyQ29sdW1uIGVxICdSZXNwb25zaWJsZScKICAgICAgICAgICAgICAgICAgICB8fCAkSGVhZGVyQ29sdW1uIGVxICdPd25lcicKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJENzcyA9ICdIaWRkZW4nOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICMgdmFyaWFibGUgdG8gc2F2ZSB0aGUgZmlsdGVyJ3MgaHRtbCBjb2RlCiAgICAgICAgICAgICAgICBteSAkQ29sdW1uRmlsdGVySFRNTCA9ICRTZWxmLT5fSW5pdGlhbENvbHVtbkZpbHRlcigKICAgICAgICAgICAgICAgICAgICBDb2x1bW5OYW1lID0+ICRIZWFkZXJDb2x1bW4sCiAgICAgICAgICAgICAgICAgICAgQ3NzICAgICAgICA9PiAkQ3NzLAogICAgICAgICAgICAgICAgKTsKCiAgICAgICAgICAgICAgICAkTGF5b3V0T2JqZWN0LT5CbG9jaygKICAgICAgICAgICAgICAgICAgICBOYW1lID0+ICdDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljSGVhZGVyQ29sdW1uRmlsdGVyTGluaycsCiAgICAgICAgICAgICAgICAgICAgRGF0YSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICVQYXJhbSwKICAgICAgICAgICAgICAgICAgICAgICAgSGVhZGVyQ29sdW1uTmFtZSAgICAgPT4gJEhlYWRlckNvbHVtbiwKICAgICAgICAgICAgICAgICAgICAgICAgQ1NTICAgICAgICAgICAgICAgICAgPT4gJENTUywKICAgICAgICAgICAgICAgICAgICAgICAgSGVhZGVyTmFtZVRyYW5zbGF0ZWQgPT4gJFRyYW5zbGF0ZWRXb3JkIHx8ICRIZWFkZXJDb2x1bW4sCiAgICAgICAgICAgICAgICAgICAgICAgIENvbHVtbkZpbHRlclN0cmcgICAgID0+ICRDb2x1bW5GaWx0ZXJIVE1MLAogICAgICAgICAgICAgICAgICAgICAgICBPcmRlckJ5ICAgICAgICAgICAgICA9PiAkT3JkZXJCeSB8fCAnVXAnLAogICAgICAgICAgICAgICAgICAgICAgICBTb3J0QnkgICAgICAgICAgICAgICA9PiAkU2VsZi0+e1NvcnRCeX0gfHwgJ0FnZScsCiAgICAgICAgICAgICAgICAgICAgICAgIE5hbWUgICAgICAgICAgICAgICAgID0+ICRTZWxmLT57TmFtZX0sCiAgICAgICAgICAgICAgICAgICAgICAgIFRpdGxlICAgICAgICAgICAgICAgID0+ICRUaXRsZSwKICAgICAgICAgICAgICAgICAgICAgICAgRmlsdGVyVGl0bGUgICAgICAgICAgPT4gJEZpbHRlclRpdGxlLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICApOwoKICAgICAgICAgICAgICAgIGlmICggJEhlYWRlckNvbHVtbiBlcSAnQ3VzdG9tZXJJRCcgKSB7CgogICAgICAgICAgICAgICAgICAgICRMYXlvdXRPYmplY3QtPkJsb2NrKAogICAgICAgICAgICAgICAgICAgICAgICBOYW1lID0+ICdDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljSGVhZGVyQ29sdW1uRmlsdGVyTGlua0N1c3RvbWVySURTZWFyY2gnLAogICAgICAgICAgICAgICAgICAgICAgICBEYXRhID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pblF1ZXJ5TGVuZ3RoICAgICAgPT4gMiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5RGVsYXkgICAgICAgICAgPT4gMTAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4UmVzdWx0c0Rpc3BsYXllZCA9PiAyMCwKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzaWYgKCAkSGVhZGVyQ29sdW1uIGVxICdSZXNwb25zaWJsZScgfHwgJEhlYWRlckNvbHVtbiBlcSAnT3duZXInICkgewoKICAgICAgICAgICAgICAgICAgICAkTGF5b3V0T2JqZWN0LT5CbG9jaygKICAgICAgICAgICAgICAgICAgICAgICAgTmFtZSA9PiAnQ29udGVudExhcmdlVGlja2V0R2VuZXJpY0hlYWRlckNvbHVtbkZpbHRlckxpbmtVc2VyU2VhcmNoJywKICAgICAgICAgICAgICAgICAgICAgICAgRGF0YSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5RdWVyeUxlbmd0aCAgICAgID0+IDIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWVyeURlbGF5ICAgICAgICAgID0+IDEwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heFJlc3VsdHNEaXNwbGF5ZWQgPT4gMjAsCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgIyB2ZXJpZnkgaWYgY29sdW1uIGlzIGp1c3QgZmlsdGVyYWJsZQogICAgICAgICAgICBlbHNpZiAoICRTZWxmLT57VmFsaWRGaWx0ZXJhYmxlQ29sdW1uc30tPnskSGVhZGVyQ29sdW1ufSApIHsKCiAgICAgICAgICAgICAgICBteSAkQ3NzOwogICAgICAgICAgICAgICAgaWYgKCAkSGVhZGVyQ29sdW1uIGVxICdDdXN0b21lclVzZXJJRCcgKSB7CiAgICAgICAgICAgICAgICAgICAgJENzcyA9ICdIaWRkZW4nOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICMgdmFyaWFibGUgdG8gc2F2ZSB0aGUgZmlsdGVyJ3MgaHRtbCBjb2RlCiAgICAgICAgICAgICAgICBteSAkQ29sdW1uRmlsdGVySFRNTCA9ICRTZWxmLT5fSW5pdGlhbENvbHVtbkZpbHRlcigKICAgICAgICAgICAgICAgICAgICBDb2x1bW5OYW1lID0+ICRIZWFkZXJDb2x1bW4sCiAgICAgICAgICAgICAgICAgICAgQ3NzICAgICAgICA9PiAkQ3NzLAogICAgICAgICAgICAgICAgKTsKCiAgICAgICAgICAgICAgICAkTGF5b3V0T2JqZWN0LT5CbG9jaygKICAgICAgICAgICAgICAgICAgICBOYW1lID0+ICdDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljSGVhZGVyQ29sdW1uRmlsdGVyJywKICAgICAgICAgICAgICAgICAgICBEYXRhID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgJVBhcmFtLAogICAgICAgICAgICAgICAgICAgICAgICBIZWFkZXJDb2x1bW5OYW1lICAgICA9PiAkSGVhZGVyQ29sdW1uLAogICAgICAgICAgICAgICAgICAgICAgICBDU1MgICAgICAgICAgICAgICAgICA9PiAkQ1NTLAogICAgICAgICAgICAgICAgICAgICAgICBIZWFkZXJOYW1lVHJhbnNsYXRlZCA9PiAkVHJhbnNsYXRlZFdvcmQgfHwgJEhlYWRlckNvbHVtbiwKICAgICAgICAgICAgICAgICAgICAgICAgQ29sdW1uRmlsdGVyU3RyZyAgICAgPT4gJENvbHVtbkZpbHRlckhUTUwsCiAgICAgICAgICAgICAgICAgICAgICAgIE5hbWUgICAgICAgICAgICAgICAgID0+ICRTZWxmLT57TmFtZX0sCiAgICAgICAgICAgICAgICAgICAgICAgIFRpdGxlICAgICAgICAgICAgICAgID0+ICRUaXRsZSwKICAgICAgICAgICAgICAgICAgICAgICAgRmlsdGVyVGl0bGUgICAgICAgICAgPT4gJEZpbHRlclRpdGxlLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICApOwoKICAgICAgICAgICAgICAgIGlmICggJEhlYWRlckNvbHVtbiBlcSAnQ3VzdG9tZXJVc2VySUQnICkgewoKICAgICAgICAgICAgICAgICAgICAkTGF5b3V0T2JqZWN0LT5CbG9jaygKICAgICAgICAgICAgICAgICAgICAgICAgTmFtZSA9PiAnQ29udGVudExhcmdlVGlja2V0R2VuZXJpY0hlYWRlckNvbHVtbkZpbHRlckxpbmtDdXN0b21lclVzZXJTZWFyY2gnLAogICAgICAgICAgICAgICAgICAgICAgICBEYXRhID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pblF1ZXJ5TGVuZ3RoICAgICAgPT4gMiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5RGVsYXkgICAgICAgICAgPT4gMTAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4UmVzdWx0c0Rpc3BsYXllZCA9PiAyMCwKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICAjIHZlcmlmeSBpZiBjb2x1bW4gaXMganVzdCBzb3J0YWJsZQogICAgICAgICAgICBlbHNpZiAoICRTZWxmLT57VmFsaWRTb3J0YWJsZUNvbHVtbnN9LT57JEhlYWRlckNvbHVtbn0gKSB7CiAgICAgICAgICAgICAgICAkTGF5b3V0T2JqZWN0LT5CbG9jaygKICAgICAgICAgICAgICAgICAgICBOYW1lID0+ICdDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljSGVhZGVyQ29sdW1uTGluaycsCiAgICAgICAgICAgICAgICAgICAgRGF0YSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICVQYXJhbSwKICAgICAgICAgICAgICAgICAgICAgICAgSGVhZGVyQ29sdW1uTmFtZSAgICAgPT4gJEhlYWRlckNvbHVtbiwKICAgICAgICAgICAgICAgICAgICAgICAgQ1NTICAgICAgICAgICAgICAgICAgPT4gJENTUywKICAgICAgICAgICAgICAgICAgICAgICAgSGVhZGVyTmFtZVRyYW5zbGF0ZWQgPT4gJFRyYW5zbGF0ZWRXb3JkIHx8ICRIZWFkZXJDb2x1bW4sCiAgICAgICAgICAgICAgICAgICAgICAgIE9yZGVyQnkgICAgICAgICAgICAgID0+ICRPcmRlckJ5IHx8ICdVcCcsCiAgICAgICAgICAgICAgICAgICAgICAgIFNvcnRCeSAgICAgICAgICAgICAgID0+ICRTZWxmLT57U29ydEJ5fSB8fCAkSGVhZGVyQ29sdW1uLAogICAgICAgICAgICAgICAgICAgICAgICBOYW1lICAgICAgICAgICAgICAgICA9PiAkU2VsZi0+e05hbWV9LAogICAgICAgICAgICAgICAgICAgICAgICBUaXRsZSAgICAgICAgICAgICAgICA9PiAkVGl0bGUsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAkTGF5b3V0T2JqZWN0LT5CbG9jaygKICAgICAgICAgICAgICAgICAgICBOYW1lID0+ICdDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljSGVhZGVyQ29sdW1uRW1wdHknLAogICAgICAgICAgICAgICAgICAgIERhdGEgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAlUGFyYW0sCiAgICAgICAgICAgICAgICAgICAgICAgIEhlYWRlck5hbWVUcmFuc2xhdGVkID0+ICRUcmFuc2xhdGVkV29yZCB8fCAkSGVhZGVyQ29sdW1uLAogICAgICAgICAgICAgICAgICAgICAgICBIZWFkZXJDb2x1bW5OYW1lICAgICA9PiAkSGVhZGVyQ29sdW1uLAogICAgICAgICAgICAgICAgICAgICAgICBDU1MgICAgICAgICAgICAgICAgICA9PiAkQ1NTLAogICAgICAgICAgICAgICAgICAgICAgICBUaXRsZSAgICAgICAgICAgICAgICA9PiAkVGl0bGUsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgICMgRHluYW1pYyBmaWVsZHMKICAgICAgICBlbHNlIHsKICAgICAgICAgICAgbXkgJER5bmFtaWNGaWVsZENvbmZpZzsKICAgICAgICAgICAgbXkgJERGQ29sdW1uID0gJEhlYWRlckNvbHVtbjsKICAgICAgICAgICAgJERGQ29sdW1uID1+IHMvRHluYW1pY0ZpZWxkXy8vZzsKICAgICAgICAgICAgRFlOQU1JQ0ZJRUxEOgogICAgICAgICAgICBmb3IgbXkgJERGQ29uZmlnICggQHsgJFNlbGYtPntEeW5hbWljRmllbGR9IH0gKSB7CiAgICAgICAgICAgICAgICBuZXh0IERZTkFNSUNGSUVMRCBpZiAhSXNIYXNoUmVmV2l0aERhdGEoJERGQ29uZmlnKTsKICAgICAgICAgICAgICAgIG5leHQgRFlOQU1JQ0ZJRUxEIGlmICRERkNvbmZpZy0+e05hbWV9IG5lICRERkNvbHVtbjsKCiAgICAgICAgICAgICAgICAkRHluYW1pY0ZpZWxkQ29uZmlnID0gJERGQ29uZmlnOwogICAgICAgICAgICAgICAgbGFzdCBEWU5BTUlDRklFTEQ7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbmV4dCBIRUFERVJDT0xVTU4gaWYgIUlzSGFzaFJlZldpdGhEYXRhKCREeW5hbWljRmllbGRDb25maWcpOwoKICAgICAgICAgICAgbXkgJExhYmVsID0gJER5bmFtaWNGaWVsZENvbmZpZy0+e0xhYmVsfTsKCiAgICAgICAgICAgIG15ICRUcmFuc2xhdGVkTGFiZWwgPSAkTGF5b3V0T2JqZWN0LT57TGFuZ3VhZ2VPYmplY3R9LT5UcmFuc2xhdGUoJExhYmVsKTsKCiAgICAgICAgICAgIG15ICREeW5hbWljRmllbGROYW1lID0gJ0R5bmFtaWNGaWVsZF8nIC4gJER5bmFtaWNGaWVsZENvbmZpZy0+e05hbWV9OwoKICAgICAgICAgICAgbXkgJENTUyAgICAgICAgICAgICA9ICcnOwogICAgICAgICAgICBteSAkRmlsdGVyVGl0bGUgICAgID0gJExhYmVsOwogICAgICAgICAgICBteSAkRmlsdGVyVGl0bGVEZXNjID0gJ2ZpbHRlciBub3QgYWN0aXZlJzsKICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgJFNlbGYtPntHZXRDb2x1bW5GaWx0ZXJTZWxlY3R9CiAgICAgICAgICAgICAgICAmJiBkZWZpbmVkICRTZWxmLT57R2V0Q29sdW1uRmlsdGVyU2VsZWN0fS0+eyREeW5hbWljRmllbGROYW1lfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkQ1NTIC49ICdGaWx0ZXJBY3RpdmUgJzsKICAgICAgICAgICAgICAgICRGaWx0ZXJUaXRsZURlc2MgPSAnZmlsdGVyIGFjdGl2ZSc7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgJEZpbHRlclRpdGxlRGVzYyA9ICRMYXlvdXRPYmplY3QtPntMYW5ndWFnZU9iamVjdH0tPlRyYW5zbGF0ZSgkRmlsdGVyVGl0bGVEZXNjKTsKICAgICAgICAgICAgJEZpbHRlclRpdGxlIC49ICcsICcgLiAkRmlsdGVyVGl0bGVEZXNjOwoKICAgICAgICAgICAgIyBnZXQgZmllbGQgc29ydGFibGUgY29uZGl0aW9uCiAgICAgICAgICAgIG15ICRJc1NvcnRhYmxlID0gJEtlcm5lbDo6T00tPkdldCgnS2VybmVsOjpTeXN0ZW06OkR5bmFtaWNGaWVsZDo6QmFja2VuZCcpLT5IYXNCZWhhdmlvcigKICAgICAgICAgICAgICAgIER5bmFtaWNGaWVsZENvbmZpZyA9PiAkRHluYW1pY0ZpZWxkQ29uZmlnLAogICAgICAgICAgICAgICAgQmVoYXZpb3IgICAgICAgICAgID0+ICdJc1NvcnRhYmxlJywKICAgICAgICAgICAgKTsKCiAgICAgICAgICAgICMgc2V0IHRpdGxlCiAgICAgICAgICAgIG15ICRUaXRsZSA9ICRMYWJlbDsKCiAgICAgICAgICAgICMgYWRkIHN1cnJvdW5kaW5nIGNvbnRhaW5lcgogICAgICAgICAgICAkTGF5b3V0T2JqZWN0LT5CbG9jaygKICAgICAgICAgICAgICAgIE5hbWUgPT4gJ0dlbmVyYWxPdmVydmlld0hlYWRlcicsCiAgICAgICAgICAgICk7CiAgICAgICAgICAgICRMYXlvdXRPYmplY3QtPkJsb2NrKAogICAgICAgICAgICAgICAgTmFtZSA9PiAnQ29udGVudExhcmdlVGlja2V0R2VuZXJpY0hlYWRlclRpY2tldEhlYWRlcicsCiAgICAgICAgICAgICAgICBEYXRhID0+IHt9LAogICAgICAgICAgICApOwoKICAgICAgICAgICAgaWYgKCRJc1NvcnRhYmxlKSB7CiAgICAgICAgICAgICAgICBteSAkT3JkZXJCeTsKICAgICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgICAgICAkU2VsZi0+e1NvcnRCeX0KICAgICAgICAgICAgICAgICAgICAmJiAoICRTZWxmLT57U29ydEJ5fSBlcSAoICdEeW5hbWljRmllbGRfJyAuICREeW5hbWljRmllbGRDb25maWctPntOYW1lfSApICkKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCAkU2VsZi0+e09yZGVyQnl9ICYmICggJFNlbGYtPntPcmRlckJ5fSBlcSAnVXAnICkgKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICRPcmRlckJ5ID0gJ0Rvd24nOwogICAgICAgICAgICAgICAgICAgICAgICAkQ1NTIC49ICcgU29ydERlc2NlbmRpbmdMYXJnZSc7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAkT3JkZXJCeSA9ICdVcCc7CiAgICAgICAgICAgICAgICAgICAgICAgICRDU1MgLj0gJyBTb3J0QXNjZW5kaW5nTGFyZ2UnOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgIyBhZGQgdGl0bGUgZGVzY3JpcHRpb24KICAgICAgICAgICAgICAgICAgICBteSAkVGl0bGVEZXNjID0gJE9yZGVyQnkgZXEgJ0Rvd24nID8gJ3NvcnRlZCBkZXNjZW5kaW5nJyA6ICdzb3J0ZWQgYXNjZW5kaW5nJzsKICAgICAgICAgICAgICAgICAgICAkVGl0bGVEZXNjID0gJExheW91dE9iamVjdC0+e0xhbmd1YWdlT2JqZWN0fS0+VHJhbnNsYXRlKCRUaXRsZURlc2MpOwogICAgICAgICAgICAgICAgICAgICRUaXRsZSAuPSAnLCAnIC4gJFRpdGxlRGVzYzsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAkTGF5b3V0T2JqZWN0LT5CbG9jaygKICAgICAgICAgICAgICAgICAgICBOYW1lID0+ICdDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljSGVhZGVyQ29sdW1uJywKICAgICAgICAgICAgICAgICAgICBEYXRhID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgSGVhZGVyQ29sdW1uTmFtZSA9PiAkRHluYW1pY0ZpZWxkTmFtZSB8fCAnJywKICAgICAgICAgICAgICAgICAgICAgICAgQ1NTID0+ICRDU1MgfHwgJycsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICk7CgogICAgICAgICAgICAgICAgIyBjaGVjayBpZiB0aGUgZHluYW1pYyBmaWVsZCBpcyBzb3J0YWJsZSBhbmQgZmlsdGVyYWJsZSAoc29ydGFibGUgY2hlY2sgd2FzIG1hZGUgYmVmb3JlKQogICAgICAgICAgICAgICAgaWYgKCAkU2VsZi0+e1ZhbGlkRmlsdGVyYWJsZUNvbHVtbnN9LT57JER5bmFtaWNGaWVsZE5hbWV9ICkgewoKICAgICAgICAgICAgICAgICAgICAjIHZhcmlhYmxlIHRvIHNhdmUgdGhlIGZpbHRlcidzIEhUTUwgY29kZQogICAgICAgICAgICAgICAgICAgIG15ICRDb2x1bW5GaWx0ZXJIVE1MID0gJFNlbGYtPl9Jbml0aWFsQ29sdW1uRmlsdGVyKAogICAgICAgICAgICAgICAgICAgICAgICBDb2x1bW5OYW1lID0+ICREeW5hbWljRmllbGROYW1lLAogICAgICAgICAgICAgICAgICAgICAgICBMYWJlbCAgICAgID0+ICRMYWJlbCwKICAgICAgICAgICAgICAgICAgICApOwoKICAgICAgICAgICAgICAgICAgICAjIG91dHB1dCBzb3J0YWJsZSBhbmQgZmlsdGVyYWJsZSBkeW5hbWljIGZpZWxkCiAgICAgICAgICAgICAgICAgICAgJExheW91dE9iamVjdC0+QmxvY2soCiAgICAgICAgICAgICAgICAgICAgICAgIE5hbWUgPT4gJ0NvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNIZWFkZXJDb2x1bW5GaWx0ZXJMaW5rJywKICAgICAgICAgICAgICAgICAgICAgICAgRGF0YSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAlUGFyYW0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBIZWFkZXJDb2x1bW5OYW1lICAgICA9PiAkRHluYW1pY0ZpZWxkTmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIENTUyAgICAgICAgICAgICAgICAgID0+ICRDU1MsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBIZWFkZXJOYW1lVHJhbnNsYXRlZCA9PiAkVHJhbnNsYXRlZExhYmVsIHx8ICREeW5hbWljRmllbGROYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgQ29sdW1uRmlsdGVyU3RyZyAgICAgPT4gJENvbHVtbkZpbHRlckhUTUwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBPcmRlckJ5ICAgICAgICAgICAgICA9PiAkT3JkZXJCeSB8fCAnVXAnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgU29ydEJ5ICAgICAgICAgICAgICAgPT4gJFNlbGYtPntTb3J0Qnl9IHx8ICdBZ2UnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgTmFtZSAgICAgICAgICAgICAgICAgPT4gJFNlbGYtPntOYW1lfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRpdGxlICAgICAgICAgICAgICAgID0+ICRUaXRsZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZpbHRlclRpdGxlICAgICAgICAgID0+ICRGaWx0ZXJUaXRsZSwKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICMgb3RoZXJ3aXNlIHRoZSBkeW5hbWljIGZpZWxkIGlzIG9ubHkgc29ydGFibGUgKHNvcnRhYmxlIGNoZWNrIHdhcyBtYWRlIGJlZm9yZSkKICAgICAgICAgICAgICAgIGVsc2UgewoKICAgICAgICAgICAgICAgICAgICAjIG91dHB1dCBzb3J0YWJsZSBkeW5hbWljIGZpZWxkCiAgICAgICAgICAgICAgICAgICAgJExheW91dE9iamVjdC0+QmxvY2soCiAgICAgICAgICAgICAgICAgICAgICAgIE5hbWUgPT4gJ0NvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNIZWFkZXJDb2x1bW5MaW5rJywKICAgICAgICAgICAgICAgICAgICAgICAgRGF0YSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAlUGFyYW0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBIZWFkZXJDb2x1bW5OYW1lICAgICA9PiAkRHluYW1pY0ZpZWxkTmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIENTUyAgICAgICAgICAgICAgICAgID0+ICRDU1MsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBIZWFkZXJOYW1lVHJhbnNsYXRlZCA9PiAkVHJhbnNsYXRlZExhYmVsIHx8ICREeW5hbWljRmllbGROYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgT3JkZXJCeSAgICAgICAgICAgICAgPT4gJE9yZGVyQnkgfHwgJ1VwJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNvcnRCeSAgICAgICAgICAgICAgID0+ICRTZWxmLT57U29ydEJ5fSB8fCAkRHluYW1pY0ZpZWxkTmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIE5hbWUgICAgICAgICAgICAgICAgID0+ICRTZWxmLT57TmFtZX0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUaXRsZSAgICAgICAgICAgICAgICA9PiAkVGl0bGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBGaWx0ZXJUaXRsZSAgICAgICAgICA9PiAkRmlsdGVyVGl0bGUsCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgIyBpZiB0aGUgZHluYW1pYyBmaWVsZCB3YXMgbm90IHNvcnRhYmxlIChjaGVjayB3YXMgbWFkZSBhbmQgZmFpbCBiZWZvcmUpCiAgICAgICAgICAgICMgaXQgbWlnaHQgYmUgZmlsdGVyYWJsZQogICAgICAgICAgICBlbHNpZiAoICRTZWxmLT57VmFsaWRGaWx0ZXJhYmxlQ29sdW1uc30tPnskRHluYW1pY0ZpZWxkTmFtZX0gKSB7CgogICAgICAgICAgICAgICAgJExheW91dE9iamVjdC0+QmxvY2soCiAgICAgICAgICAgICAgICAgICAgTmFtZSA9PiAnQ29udGVudExhcmdlVGlja2V0R2VuZXJpY0hlYWRlckNvbHVtbicsCiAgICAgICAgICAgICAgICAgICAgRGF0YSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIEhlYWRlckNvbHVtbk5hbWUgPT4gJER5bmFtaWNGaWVsZE5hbWUgfHwgJycsCiAgICAgICAgICAgICAgICAgICAgICAgIENTUyAgICAgICAgICAgICAgPT4gJENTUyAgICAgICAgICAgICAgfHwgJycsCiAgICAgICAgICAgICAgICAgICAgICAgIFRpdGxlICAgICAgICAgICAgPT4gJFRpdGxlLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICApOwoKICAgICAgICAgICAgICAgICMgdmFyaWFibGUgdG8gc2F2ZSB0aGUgZmlsdGVyJ3MgSFRNTCBjb2RlCiAgICAgICAgICAgICAgICBteSAkQ29sdW1uRmlsdGVySFRNTCA9ICRTZWxmLT5fSW5pdGlhbENvbHVtbkZpbHRlcigKICAgICAgICAgICAgICAgICAgICBDb2x1bW5OYW1lID0+ICREeW5hbWljRmllbGROYW1lLAogICAgICAgICAgICAgICAgICAgIExhYmVsICAgICAgPT4gJExhYmVsLAogICAgICAgICAgICAgICAgKTsKCiAgICAgICAgICAgICAgICAjIG91dHB1dCBmaWx0cmFibGUgKG5vdCBzb3J0YWJsZSkgZHluYW1pYyBmaWVsZAogICAgICAgICAgICAgICAgJExheW91dE9iamVjdC0+QmxvY2soCiAgICAgICAgICAgICAgICAgICAgTmFtZSA9PiAnQ29udGVudExhcmdlVGlja2V0R2VuZXJpY0hlYWRlckNvbHVtbkZpbHRlcicsCiAgICAgICAgICAgICAgICAgICAgRGF0YSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICVQYXJhbSwKICAgICAgICAgICAgICAgICAgICAgICAgSGVhZGVyQ29sdW1uTmFtZSAgICAgPT4gJER5bmFtaWNGaWVsZE5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgIENTUyAgICAgICAgICAgICAgICAgID0+ICRDU1MsCiAgICAgICAgICAgICAgICAgICAgICAgIEhlYWRlck5hbWVUcmFuc2xhdGVkID0+ICRUcmFuc2xhdGVkTGFiZWwgfHwgJER5bmFtaWNGaWVsZE5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgIENvbHVtbkZpbHRlclN0cmcgICAgID0+ICRDb2x1bW5GaWx0ZXJIVE1MLAogICAgICAgICAgICAgICAgICAgICAgICBOYW1lICAgICAgICAgICAgICAgICA9PiAkU2VsZi0+e05hbWV9LAogICAgICAgICAgICAgICAgICAgICAgICBUaXRsZSAgICAgICAgICAgICAgICA9PiAkVGl0bGUsCiAgICAgICAgICAgICAgICAgICAgICAgIEZpbHRlclRpdGxlICAgICAgICAgID0+ICRGaWx0ZXJUaXRsZSwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgIyBvdGhlcndpc2UgdGhlIGZpZWxkIGlzIG5vdCBmaWx0ZXJhYmxlIGFuZCBub3Qgc29ydGFibGUKICAgICAgICAgICAgZWxzZSB7CgogICAgICAgICAgICAgICAgJExheW91dE9iamVjdC0+QmxvY2soCiAgICAgICAgICAgICAgICAgICAgTmFtZSA9PiAnQ29udGVudExhcmdlVGlja2V0R2VuZXJpY0hlYWRlckNvbHVtbicsCiAgICAgICAgICAgICAgICAgICAgRGF0YSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIEhlYWRlckNvbHVtbk5hbWUgPT4gJER5bmFtaWNGaWVsZE5hbWUgfHwgJycsCiAgICAgICAgICAgICAgICAgICAgICAgIENTUyA9PiAkQ1NTIHx8ICcnLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICApOwoKICAgICAgICAgICAgICAgICMgb3V0cHV0IHBsYWluIGR5bmFtaWMgZmllbGQgaGVhZGVyIChub3QgZmlsdGVyYWJsZSwgbm90IHNvcnRhYmxlKQogICAgICAgICAgICAgICAgJExheW91dE9iamVjdC0+QmxvY2soCiAgICAgICAgICAgICAgICAgICAgTmFtZSA9PiAnQ29udGVudExhcmdlVGlja2V0R2VuZXJpY0hlYWRlckNvbHVtbkVtcHR5JywKICAgICAgICAgICAgICAgICAgICBEYXRhID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgJVBhcmFtLAogICAgICAgICAgICAgICAgICAgICAgICBIZWFkZXJOYW1lVHJhbnNsYXRlZCA9PiAkVHJhbnNsYXRlZExhYmVsIHx8ICREeW5hbWljRmllbGROYW1lLAogICAgICAgICAgICAgICAgICAgICAgICBIZWFkZXJDb2x1bW5OYW1lICAgICA9PiAkRHluYW1pY0ZpZWxkTmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgQ1NTICAgICAgICAgICAgICAgICAgPT4gJENTUywKICAgICAgICAgICAgICAgICAgICAgICAgVGl0bGUgICAgICAgICAgICAgICAgPT4gJFRpdGxlLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgICMgc2hvdyB0aWNrZXRzCiAgICBteSAkQ291bnQgPSAwOwogICAgVElDS0VUSUQ6CiAgICBmb3IgbXkgJFRpY2tldElEICggQHskVGlja2V0SURzfSApIHsKICAgICAgICAkQ291bnQrKzsKICAgICAgICBuZXh0IFRJQ0tFVElEIGlmICRDb3VudCA8ICRTZWxmLT57U3RhcnRIaXR9OwogICAgICAgIG15ICVUaWNrZXQgPSAkVGlja2V0T2JqZWN0LT5UaWNrZXRHZXQoCiAgICAgICAgICAgIFRpY2tldElEICAgICAgPT4gJFRpY2tldElELAogICAgICAgICAgICBVc2VySUQgICAgICAgID0+ICRTZWxmLT57VXNlcklEfSwKICAgICAgICAgICAgRHluYW1pY0ZpZWxkcyA9PiAwLAogICAgICAgICAgICBTaWxlbnQgICAgICAgID0+IDEKICAgICAgICApOwoKICAgICAgICBuZXh0IFRJQ0tFVElEIGlmICElVGlja2V0OwoKICAgICAgICAjIHNldCBhIGRlZmF1bHQgdGl0bGUgaWYgdGlja2V0IGhhcyBubyB0aXRsZQogICAgICAgIGlmICggISRUaWNrZXR7VGl0bGV9ICkgewogICAgICAgICAgICAkVGlja2V0e1RpdGxlfSA9ICRMYXlvdXRPYmplY3QtPntMYW5ndWFnZU9iamVjdH0tPlRyYW5zbGF0ZSgKICAgICAgICAgICAgICAgICdUaGlzIHRpY2tldCBoYXMgbm8gdGl0bGUgb3Igc3ViamVjdCcKICAgICAgICAgICAgKTsKICAgICAgICB9CgogICAgICAgIG15ICRXaG9sZVRpdGxlID0gJFRpY2tldHtUaXRsZX0gfHwgJyc7CiAgICAgICAgJFRpY2tldHtUaXRsZX0gPSAkVGlja2V0T2JqZWN0LT5UaWNrZXRTdWJqZWN0Q2xlYW4oCiAgICAgICAgICAgIFRpY2tldE51bWJlciA9PiAkVGlja2V0e1RpY2tldE51bWJlcn0sCiAgICAgICAgICAgIFN1YmplY3QgICAgICA9PiAkVGlja2V0e1RpdGxlfSwKICAgICAgICApOwoKICAgICAgICAjIGNyZWF0ZSBodW1hbiBhZ2UKICAgICAgICBpZiAoICRTZWxmLT57Q29uZmlnfS0+e1RpbWV9IG5lICdBZ2UnICkgewogICAgICAgICAgICAkVGlja2V0e1RpbWV9ID0gJExheW91dE9iamVjdC0+Q3VzdG9tZXJBZ2VJbkhvdXJzKAogICAgICAgICAgICAgICAgQWdlICAgPT4gJFRpY2tldHsgJFNlbGYtPntDb25maWd9LT57VGltZX0gfSwKICAgICAgICAgICAgICAgIFNwYWNlID0+ICcgJywKICAgICAgICAgICAgKTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICRUaWNrZXR7VGltZX0gPSAkTGF5b3V0T2JqZWN0LT5DdXN0b21lckFnZSgKICAgICAgICAgICAgICAgIEFnZSAgID0+ICRUaWNrZXR7ICRTZWxmLT57Q29uZmlnfS0+e1RpbWV9IH0sCiAgICAgICAgICAgICAgICBTcGFjZSA9PiAnICcsCiAgICAgICAgICAgICk7CiAgICAgICAgfQoKICAgICAgICAjIHNob3cgdGlja2V0CiAgICAgICAgJExheW91dE9iamVjdC0+QmxvY2soCiAgICAgICAgICAgIE5hbWUgPT4gJ0NvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNSb3cnLAogICAgICAgICAgICBEYXRhID0+IFwlVGlja2V0LAogICAgICAgICk7CgogICAgICAgICMgc2hvdyB0aWNrZXQgZmxhZ3MKICAgICAgICBteSBAVGlja2V0TWV0YUl0ZW1zID0gJExheW91dE9iamVjdC0+VGlja2V0TWV0YUl0ZW1zKAogICAgICAgICAgICBUaWNrZXQgPT4gXCVUaWNrZXQsCiAgICAgICAgKTsKICAgICAgICBmb3IgbXkgJEl0ZW0gKEBUaWNrZXRNZXRhSXRlbXMpIHsKCiAgICAgICAgICAgICRMYXlvdXRPYmplY3QtPkJsb2NrKAogICAgICAgICAgICAgICAgTmFtZSA9PiAnR2VuZXJhbE92ZXJ2aWV3Um93JywKICAgICAgICAgICAgKTsKICAgICAgICAgICAgJExheW91dE9iamVjdC0+QmxvY2soCiAgICAgICAgICAgICAgICBOYW1lID0+ICdDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljUm93TWV0YScsCiAgICAgICAgICAgICAgICBEYXRhID0+IHt9LAogICAgICAgICAgICApOwogICAgICAgICAgICBpZiAoJEl0ZW0pIHsKICAgICAgICAgICAgICAgICRMYXlvdXRPYmplY3QtPkJsb2NrKAogICAgICAgICAgICAgICAgICAgIE5hbWUgPT4gJ0NvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNSb3dNZXRhSW1hZ2UnLAogICAgICAgICAgICAgICAgICAgIERhdGEgPT4gJEl0ZW0sCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAjIHNhdmUgY29sdW1uIGNvbnRlbnQKICAgICAgICBteSAkRGF0YVZhbHVlOwoKICAgICAgICAjIGdldCBuZWVkZWQgb2JqZWN0cwogICAgICAgIG15ICRCYWNrZW5kT2JqZWN0ID0gJEtlcm5lbDo6T00tPkdldCgnS2VybmVsOjpTeXN0ZW06OkR5bmFtaWNGaWVsZDo6QmFja2VuZCcpOwogICAgICAgIG15ICRVc2VyT2JqZWN0ICAgID0gJEtlcm5lbDo6T00tPkdldCgnS2VybmVsOjpTeXN0ZW06OlVzZXInKTsKICAgICAgICAKICAgICAgICBteSAlQ3VzdG9tZXJJbmZvOwoKICAgICAgICAjIHNob3cgYWxsIG5lZWRlZCBjb2x1bW5zCiAgICAgICAgQ09MVU1OOgogICAgICAgIGZvciBteSAkQ29sdW1uIChAQ29sdW1ucykgewoKICAgICAgICAgICAgIyBza2lwIEN1c3RvbWVySUQgaWYgQ3VzdG9tZXIgSW5mb3JtYXRpb24gQ2VudGVyCiAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgICRTZWxmLT57QWN0aW9ufSBlcSAnQWdlbnRDdXN0b21lckluZm9ybWF0aW9uQ2VudGVyJwogICAgICAgICAgICAgICAgJiYgJENvbHVtbiBlcSAnQ3VzdG9tZXJJRCcKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgbmV4dCBDT0xVTU47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICggJENvbHVtbiAhfiBte1xBIER5bmFtaWNGaWVsZF99eG1zICkgewoKICAgICAgICAgICAgICAgICRMYXlvdXRPYmplY3QtPkJsb2NrKAogICAgICAgICAgICAgICAgICAgIE5hbWUgPT4gJ0dlbmVyYWxPdmVydmlld1JvdycsCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgJExheW91dE9iamVjdC0+QmxvY2soCiAgICAgICAgICAgICAgICAgICAgTmFtZSA9PiAnQ29udGVudExhcmdlVGlja2V0R2VuZXJpY1RpY2tldENvbHVtbicsCiAgICAgICAgICAgICAgICAgICAgRGF0YSA9PiB7fSwKICAgICAgICAgICAgICAgICk7CgogICAgICAgICAgICAgICAgbXkgJEJsb2NrVHlwZSA9ICcnOwogICAgICAgICAgICAgICAgbXkgJENTU0NsYXNzICA9ICcnOwoKICAgICAgICAgICAgICAgIGlmICggJENvbHVtbiBlcSAnVGlja2V0TnVtYmVyJyApIHsKICAgICAgICAgICAgICAgICAgICAkTGF5b3V0T2JqZWN0LT5CbG9jaygKICAgICAgICAgICAgICAgICAgICAgICAgTmFtZSA9PiAnQ29udGVudExhcmdlVGlja2V0R2VuZXJpY1RpY2tldE51bWJlcicsCiAgICAgICAgICAgICAgICAgICAgICAgIERhdGEgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJVRpY2tldCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRpdGxlID0+ICRUaWNrZXR7VGl0bGV9LAogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgbmV4dCBDT0xVTU47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNpZiAoICRDb2x1bW4gZXEgJ0VzY2FsYXRpb25UaW1lJyApIHsKICAgICAgICAgICAgICAgICAgICBteSAlRXNjYWxhdGlvbkRhdGE7CiAgICAgICAgICAgICAgICAgICAgJEVzY2FsYXRpb25EYXRhe0VzY2FsYXRpb25UaW1lfSAgICAgICAgICAgID0gJFRpY2tldHtFc2NhbGF0aW9uVGltZX07CiAgICAgICAgICAgICAgICAgICAgJEVzY2FsYXRpb25EYXRhe0VzY2FsYXRpb25EZXN0aW5hdGlvbkRhdGV9ID0gJFRpY2tldHtFc2NhbGF0aW9uRGVzdGluYXRpb25EYXRlfTsKCiAgICAgICAgICAgICAgICAgICAgJEVzY2FsYXRpb25EYXRhe0VzY2FsYXRpb25UaW1lSHVtYW59ID0gJExheW91dE9iamVjdC0+Q3VzdG9tZXJBZ2VJbkhvdXJzKAogICAgICAgICAgICAgICAgICAgICAgICBBZ2UgICA9PiAkRXNjYWxhdGlvbkRhdGF7RXNjYWxhdGlvblRpbWV9LAogICAgICAgICAgICAgICAgICAgICAgICBTcGFjZSA9PiAnICcsCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICAkRXNjYWxhdGlvbkRhdGF7RXNjYWxhdGlvblRpbWVXb3JraW5nVGltZX0gPSAkTGF5b3V0T2JqZWN0LT5DdXN0b21lckFnZUluSG91cnMoCiAgICAgICAgICAgICAgICAgICAgICAgIEFnZSAgID0+ICRFc2NhbGF0aW9uRGF0YXtFc2NhbGF0aW9uVGltZVdvcmtpbmdUaW1lfSwKICAgICAgICAgICAgICAgICAgICAgICAgU3BhY2UgPT4gJyAnLAogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgaWYgKCBkZWZpbmVkICRUaWNrZXR7RXNjYWxhdGlvblRpbWV9ICYmICRUaWNrZXR7RXNjYWxhdGlvblRpbWV9IDwgNjAgKiA2MCAqIDEgKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgJEVzY2FsYXRpb25EYXRhe0VzY2FsYXRpb25DbGFzc30gPSAnV2FybmluZyc7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICRMYXlvdXRPYmplY3QtPkJsb2NrKAogICAgICAgICAgICAgICAgICAgICAgICBOYW1lID0+ICdDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljRXNjYWxhdGlvblRpbWUnLAogICAgICAgICAgICAgICAgICAgICAgICBEYXRhID0+IHslRXNjYWxhdGlvbkRhdGF9LAogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgbmV4dCBDT0xVTU47CgogICAgICAgICAgICAgICAgICAgICREYXRhVmFsdWUgPSAkTGF5b3V0T2JqZWN0LT5DdXN0b21lckFnZSgKICAgICAgICAgICAgICAgICAgICAgICAgQWdlICAgPT4gJFRpY2tldHsnRXNjYWxhdGlvblRpbWUnfSwKICAgICAgICAgICAgICAgICAgICAgICAgU3BhY2UgPT4gJyAnCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2lmICggJENvbHVtbiBlcSAnQWdlJyApIHsKICAgICAgICAgICAgICAgICAgICAkRGF0YVZhbHVlID0gJExheW91dE9iamVjdC0+Q3VzdG9tZXJBZ2UoCiAgICAgICAgICAgICAgICAgICAgICAgIEFnZSAgID0+ICRUaWNrZXR7QWdlfSwKICAgICAgICAgICAgICAgICAgICAgICAgU3BhY2UgPT4gJyAnLAogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNpZiAoICRDb2x1bW4gZXEgJ0VzY2FsYXRpb25Tb2x1dGlvblRpbWUnICkgewogICAgICAgICAgICAgICAgICAgICRCbG9ja1R5cGUgPSAnRXNjYWxhdGlvbic7CiAgICAgICAgICAgICAgICAgICAgJERhdGFWYWx1ZSA9ICRMYXlvdXRPYmplY3QtPkN1c3RvbWVyQWdlSW5Ib3VycygKICAgICAgICAgICAgICAgICAgICAgICAgQWdlID0+ICRUaWNrZXR7U29sdXRpb25UaW1lfSB8fCAwLAogICAgICAgICAgICAgICAgICAgICAgICBTcGFjZSA9PiAnICcsCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICBpZiAoIGRlZmluZWQgJFRpY2tldHtTb2x1dGlvblRpbWV9ICYmICRUaWNrZXR7U29sdXRpb25UaW1lfSA8IDYwICogNjAgKiAxICkgewogICAgICAgICAgICAgICAgICAgICAgICAkQ1NTQ2xhc3MgPSAnV2FybmluZyc7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzaWYgKCAkQ29sdW1uIGVxICdFc2NhbGF0aW9uUmVzcG9uc2VUaW1lJyApIHsKICAgICAgICAgICAgICAgICAgICAkQmxvY2tUeXBlID0gJ0VzY2FsYXRpb24nOwogICAgICAgICAgICAgICAgICAgICREYXRhVmFsdWUgPSAkTGF5b3V0T2JqZWN0LT5DdXN0b21lckFnZUluSG91cnMoCiAgICAgICAgICAgICAgICAgICAgICAgIEFnZSA9PiAkVGlja2V0e0ZpcnN0UmVzcG9uc2VUaW1lfSB8fCAwLAogICAgICAgICAgICAgICAgICAgICAgICBTcGFjZSA9PiAnICcsCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmluZWQgJFRpY2tldHtGaXJzdFJlc3BvbnNlVGltZX0KICAgICAgICAgICAgICAgICAgICAgICAgJiYgJFRpY2tldHtGaXJzdFJlc3BvbnNlVGltZX0gPCA2MCAqIDYwICogMQogICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAkQ1NTQ2xhc3MgPSAnV2FybmluZyc7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzaWYgKCAkQ29sdW1uIGVxICdFc2NhbGF0aW9uVXBkYXRlVGltZScgKSB7CiAgICAgICAgICAgICAgICAgICAgJEJsb2NrVHlwZSA9ICdFc2NhbGF0aW9uJzsKICAgICAgICAgICAgICAgICAgICAkRGF0YVZhbHVlID0gJExheW91dE9iamVjdC0+Q3VzdG9tZXJBZ2VJbkhvdXJzKAogICAgICAgICAgICAgICAgICAgICAgICBBZ2UgPT4gJFRpY2tldHtVcGRhdGVUaW1lfSB8fCAwLAogICAgICAgICAgICAgICAgICAgICAgICBTcGFjZSA9PiAnICcsCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICBpZiAoIGRlZmluZWQgJFRpY2tldHtVcGRhdGVUaW1lfSAmJiAkVGlja2V0e1VwZGF0ZVRpbWV9IDwgNjAgKiA2MCAqIDEgKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICRDU1NDbGFzcyA9ICdXYXJuaW5nJzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNpZiAoICRDb2x1bW4gZXEgJ1BlbmRpbmdUaW1lJyApIHsKICAgICAgICAgICAgICAgICAgICAkQmxvY2tUeXBlID0gJ0VzY2FsYXRpb24nOwogICAgICAgICAgICAgICAgICAgICREYXRhVmFsdWUgPSAkTGF5b3V0T2JqZWN0LT5DdXN0b21lckFnZSgKICAgICAgICAgICAgICAgICAgICAgICAgQWdlICAgPT4gJFRpY2tldHsnVW50aWxUaW1lJ30sCiAgICAgICAgICAgICAgICAgICAgICAgIFNwYWNlID0+ICcgJwogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgaWYgKCBkZWZpbmVkICRUaWNrZXR7VW50aWxUaW1lfSAmJiAkVGlja2V0e1VudGlsVGltZX0gPCAtMSApIHsKICAgICAgICAgICAgICAgICAgICAgICAgJENTU0NsYXNzID0gJ1dhcm5pbmcnOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2lmICggJENvbHVtbiBlcSAnT3duZXInICkgewoKICAgICAgICAgICAgICAgICAgICAjIGdldCBvd25lciBpbmZvCiAgICAgICAgICAgICAgICAgICAgbXkgJU93bmVySW5mbyA9ICRVc2VyT2JqZWN0LT5HZXRVc2VyRGF0YSgKICAgICAgICAgICAgICAgICAgICAgICAgVXNlcklEID0+ICRUaWNrZXR7T3duZXJJRH0sCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICAkRGF0YVZhbHVlID0gJE93bmVySW5mb3snVXNlckZpcnN0bmFtZSd9IC4gJyAnIC4gJE93bmVySW5mb3snVXNlckxhc3RuYW1lJ307CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNpZiAoICRDb2x1bW4gZXEgJ1Jlc3BvbnNpYmxlJyApIHsKCiAgICAgICAgICAgICAgICAgICAgIyBnZXQgcmVzcG9uc2libGUgaW5mbwogICAgICAgICAgICAgICAgICAgIG15ICVSZXNwb25zaWJsZUluZm8gPSAkVXNlck9iamVjdC0+R2V0VXNlckRhdGEoCiAgICAgICAgICAgICAgICAgICAgICAgIFVzZXJJRCA9PiAkVGlja2V0e1Jlc3BvbnNpYmxlSUR9LAogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgJERhdGFWYWx1ZSA9ICRSZXNwb25zaWJsZUluZm97J1VzZXJGaXJzdG5hbWUnfSAuICcgJwogICAgICAgICAgICAgICAgICAgICAgICAuICRSZXNwb25zaWJsZUluZm97J1VzZXJMYXN0bmFtZSd9OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzaWYgKAogICAgICAgICAgICAgICAgICAgICRDb2x1bW4gZXEgJ1N0YXRlJwogICAgICAgICAgICAgICAgICAgIHx8ICRDb2x1bW4gZXEgJ0xvY2snCiAgICAgICAgICAgICAgICAgICAgfHwgJENvbHVtbiBlcSAnUHJpb3JpdHknCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRCbG9ja1R5cGUgPSAnVHJhbnNsYXRhYmxlJzsKICAgICAgICAgICAgICAgICAgICAkRGF0YVZhbHVlID0gJFRpY2tldHskQ29sdW1ufTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2lmICggJENvbHVtbiBlcSAnQ3JlYXRlZCcgfHwgJENvbHVtbiBlcSAnQ2hhbmdlZCcgKSB7CiAgICAgICAgICAgICAgICAgICAgJEJsb2NrVHlwZSA9ICdUaW1lJzsKICAgICAgICAgICAgICAgICAgICAkRGF0YVZhbHVlID0gJFRpY2tldHskQ29sdW1ufTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2lmICggJENvbHVtbiBlcSAnQ3VzdG9tZXJOYW1lJyApIHsKCiAgICAgICAgICAgICAgICAgICAgIyBnZXQgY3VzdG9tZXIgbmFtZQogICAgICAgICAgICAgICAgICAgIG15ICRDdXN0b21lck5hbWU7CiAgICAgICAgICAgICAgICAgICAgaWYgKCAkVGlja2V0e0N1c3RvbWVyVXNlcklEfSApIHsKICAgICAgICAgICAgICAgICAgICAgICAgJEN1c3RvbWVyTmFtZSA9ICRLZXJuZWw6Ok9NLT5HZXQoJ0tlcm5lbDo6U3lzdGVtOjpDdXN0b21lclVzZXInKS0+Q3VzdG9tZXJOYW1lKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgVXNlckxvZ2luID0+ICRUaWNrZXR7Q3VzdG9tZXJVc2VySUR9LAogICAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAkRGF0YVZhbHVlID0gJEN1c3RvbWVyTmFtZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2lmICggc3Vic3RyKCAkQ29sdW1uLCAwLCA4ICkgZXEgJ0N1c3RvbWVyJyApIHsKCiAgICAgICAgICAgICAgICAgICAgaWYgKCAkVGlja2V0e0N1c3RvbWVyVXNlcklEfSAmJiAhJUN1c3RvbWVySW5mbyApIHsKICAgICAgICAgICAgICAgICAgICAgICAgJUN1c3RvbWVySW5mbyA9ICRLZXJuZWw6Ok9NLT5HZXQoJ0tlcm5lbDo6U3lzdGVtOjpDdXN0b21lclVzZXInKS0+Q3VzdG9tZXJVc2VyRGF0YUdldCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVzZXIgPT4gJFRpY2tldHtDdXN0b21lclVzZXJJRH0sCiAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICREYXRhVmFsdWUgPSAkQ3VzdG9tZXJJbmZveyRDb2x1bW59OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgJERhdGFWYWx1ZSA9ICRUaWNrZXR7JENvbHVtbn07CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKCAkQ29sdW1uIGVxICdUaXRsZScgKSB7CiAgICAgICAgICAgICAgICAgICAgJExheW91dE9iamVjdC0+QmxvY2soCiAgICAgICAgICAgICAgICAgICAgICAgIE5hbWUgPT4gIkNvbnRlbnRMYXJnZVRpY2tldFRpdGxlIiwKICAgICAgICAgICAgICAgICAgICAgICAgRGF0YSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUaXRsZSA9PiAiJERhdGFWYWx1ZSAiIHx8ICcnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgV2hvbGVUaXRsZSA9PiAkV2hvbGVUaXRsZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIENsYXNzICAgICAgPT4gJENTU0NsYXNzIHx8ICcnLAogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICk7CgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgJExheW91dE9iamVjdC0+QmxvY2soCiAgICAgICAgICAgICAgICAgICAgICAgIE5hbWUgPT4gIkNvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNDb2x1bW4kQmxvY2tUeXBlIiwKICAgICAgICAgICAgICAgICAgICAgICAgRGF0YSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBHZW5lcmljVmFsdWUgPT4gJERhdGFWYWx1ZSB8fCAnJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIENsYXNzICAgICAgICA9PiAkQ1NTQ2xhc3MgIHx8ICcnLAogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICB9CgogICAgICAgICAgICAjIER5bmFtaWMgZmllbGRzCiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgbXkgJER5bmFtaWNGaWVsZENvbmZpZzsKICAgICAgICAgICAgICAgIG15ICRERkNvbHVtbiA9ICRDb2x1bW47CiAgICAgICAgICAgICAgICAkREZDb2x1bW4gPX4gcy9EeW5hbWljRmllbGRfLy9nOwogICAgICAgICAgICAgICAgRFlOQU1JQ0ZJRUxEOgogICAgICAgICAgICAgICAgZm9yIG15ICRERkNvbmZpZyAoIEB7ICRTZWxmLT57RHluYW1pY0ZpZWxkfSB9ICkgewogICAgICAgICAgICAgICAgICAgIG5leHQgRFlOQU1JQ0ZJRUxEIGlmICFJc0hhc2hSZWZXaXRoRGF0YSgkREZDb25maWcpOwogICAgICAgICAgICAgICAgICAgIG5leHQgRFlOQU1JQ0ZJRUxEIGlmICRERkNvbmZpZy0+e05hbWV9IG5lICRERkNvbHVtbjsKCiAgICAgICAgICAgICAgICAgICAgJER5bmFtaWNGaWVsZENvbmZpZyA9ICRERkNvbmZpZzsKICAgICAgICAgICAgICAgICAgICBsYXN0IERZTkFNSUNGSUVMRDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIG5leHQgQ09MVU1OIGlmICFJc0hhc2hSZWZXaXRoRGF0YSgkRHluYW1pY0ZpZWxkQ29uZmlnKTsKCiAgICAgICAgICAgICAgICAjIGdldCBmaWVsZCB2YWx1ZQogICAgICAgICAgICAgICAgbXkgJFZhbHVlID0gJEJhY2tlbmRPYmplY3QtPlZhbHVlR2V0KAogICAgICAgICAgICAgICAgICAgIER5bmFtaWNGaWVsZENvbmZpZyA9PiAkRHluYW1pY0ZpZWxkQ29uZmlnLAogICAgICAgICAgICAgICAgICAgIE9iamVjdElEICAgICAgICAgICA9PiAkVGlja2V0SUQsCiAgICAgICAgICAgICAgICApOwoKICAgICAgICAgICAgICAgIG15ICRWYWx1ZVN0cmcgPSAkQmFja2VuZE9iamVjdC0+RGlzcGxheVZhbHVlUmVuZGVyKAogICAgICAgICAgICAgICAgICAgIER5bmFtaWNGaWVsZENvbmZpZyA9PiAkRHluYW1pY0ZpZWxkQ29uZmlnLAogICAgICAgICAgICAgICAgICAgIFZhbHVlICAgICAgICAgICAgICA9PiAkVmFsdWUsCiAgICAgICAgICAgICAgICAgICAgVmFsdWVNYXhDaGFycyAgICAgID0+IDIwLAogICAgICAgICAgICAgICAgICAgIExheW91dE9iamVjdCAgICAgICA9PiAkTGF5b3V0T2JqZWN0LAogICAgICAgICAgICAgICAgKTsKCiAgICAgICAgICAgICAgICAkTGF5b3V0T2JqZWN0LT5CbG9jaygKICAgICAgICAgICAgICAgICAgICBOYW1lID0+ICdDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljRHluYW1pY0ZpZWxkJywKICAgICAgICAgICAgICAgICAgICBEYXRhID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgVmFsdWUgPT4gJFZhbHVlU3RyZy0+e1ZhbHVlfSwKICAgICAgICAgICAgICAgICAgICAgICAgVGl0bGUgPT4gJFZhbHVlU3RyZy0+e1RpdGxlfSwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgKTsKCiAgICAgICAgICAgICAgICBpZiAoICRWYWx1ZVN0cmctPntMaW5rfSApIHsKICAgICAgICAgICAgICAgICAgICAkTGF5b3V0T2JqZWN0LT5CbG9jaygKICAgICAgICAgICAgICAgICAgICAgICAgTmFtZSA9PiAnQ29udGVudExhcmdlVGlja2V0R2VuZXJpY0R5bmFtaWNGaWVsZExpbmsnLAogICAgICAgICAgICAgICAgICAgICAgICBEYXRhID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZhbHVlICAgICAgICAgICAgICAgICAgICAgICA9PiAkVmFsdWVTdHJnLT57VmFsdWV9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgVGl0bGUgICAgICAgICAgICAgICAgICAgICAgID0+ICRWYWx1ZVN0cmctPntUaXRsZX0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBMaW5rICAgICAgICAgICAgICAgICAgICAgICAgPT4gJFZhbHVlU3RyZy0+e0xpbmt9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJER5bmFtaWNGaWVsZENvbmZpZy0+e05hbWV9ID0+ICRWYWx1ZVN0cmctPntUaXRsZX0sCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICRMYXlvdXRPYmplY3QtPkJsb2NrKAogICAgICAgICAgICAgICAgICAgICAgICBOYW1lID0+ICdDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljRHluYW1pY0ZpZWxkUGxhaW4nLAogICAgICAgICAgICAgICAgICAgICAgICBEYXRhID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZhbHVlID0+ICRWYWx1ZVN0cmctPntWYWx1ZX0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUaXRsZSA9PiAkVmFsdWVTdHJnLT57VGl0bGV9LAogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgfQoKICAgIH0KCiAgICAjIHNob3cgIm5vbmUiIGlmIG5vIHRpY2tldCBpcyBhdmFpbGFibGUKICAgIGlmICggISRUaWNrZXRJRHMgfHwgIUB7JFRpY2tldElEc30gKSB7CiAgICAgICAgJExheW91dE9iamVjdC0+QmxvY2soCiAgICAgICAgICAgIE5hbWUgPT4gJ0NvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNOb25lJywKICAgICAgICAgICAgRGF0YSA9PiB7fSwKICAgICAgICApOwogICAgfQoKICAgICMgY2hlY2sgZm9yIHJlZnJlc2ggdGltZQogICAgbXkgJFJlZnJlc2ggPSAnJzsKICAgIGlmICggJFNlbGYtPntVc2VyUmVmcmVzaFRpbWV9ICkgewogICAgICAgICRSZWZyZXNoID0gNjAgKiAkU2VsZi0+e1VzZXJSZWZyZXNoVGltZX07CiAgICAgICAgbXkgJE5hbWVIVE1MID0gJFNlbGYtPntOYW1lfTsKICAgICAgICAkTmFtZUhUTUwgPX4gc3stfXtffXhtc2c7CiAgICAgICAgJExheW91dE9iamVjdC0+QmxvY2soCiAgICAgICAgICAgIE5hbWUgPT4gJ0NvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNSZWZyZXNoJywKICAgICAgICAgICAgRGF0YSA9PiB7CiAgICAgICAgICAgICAgICAleyAkU2VsZi0+e0NvbmZpZ30gfSwKICAgICAgICAgICAgICAgIE5hbWUgICAgICAgID0+ICRTZWxmLT57TmFtZX0sCiAgICAgICAgICAgICAgICBOYW1lSFRNTCAgICA9PiAkTmFtZUhUTUwsCiAgICAgICAgICAgICAgICBSZWZyZXNoVGltZSA9PiAkUmVmcmVzaCwKICAgICAgICAgICAgICAgIEN1c3RvbWVySUQgID0+ICRQYXJhbXtDdXN0b21lcklEfSwKICAgICAgICAgICAgICAgICV7JFN1bW1hcnl9LAogICAgICAgICAgICB9LAogICAgICAgICk7CiAgICB9CgogICAgIyBjaGVjayBmb3IgYWN0aXZlIGZpbHRlcnMgYW5kIGFkZCBhICdyZW1vdmUgZmlsdGVycycgYnV0dG9uIHRvIHRoZSB3aWRnZXQgaGVhZGVyCiAgICBpZiAoICRTZWxmLT57R2V0Q29sdW1uRmlsdGVyU2VsZWN0fSAmJiBJc0hhc2hSZWZXaXRoRGF0YSggJFNlbGYtPntHZXRDb2x1bW5GaWx0ZXJTZWxlY3R9ICkgKSB7CiAgICAgICAgJExheW91dE9iamVjdC0+QmxvY2soCiAgICAgICAgICAgIE5hbWUgPT4gJ0NvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNSZW1vdmVGaWx0ZXJzJywKICAgICAgICAgICAgRGF0YSA9PiB7CiAgICAgICAgICAgICAgICBOYW1lICAgICAgID0+ICRTZWxmLT57TmFtZX0sCiAgICAgICAgICAgICAgICBDdXN0b21lcklEID0+ICRQYXJhbXtDdXN0b21lcklEfSwKICAgICAgICAgICAgfSwKICAgICAgICApOwogICAgfQogICAgZWxzZSB7CiAgICAgICAgJExheW91dE9iamVjdC0+QmxvY2soCiAgICAgICAgICAgIE5hbWUgPT4gJ0NvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNSZW1vdmVGaWx0ZXJzUmVtb3ZlJywKICAgICAgICAgICAgRGF0YSA9PiB7CiAgICAgICAgICAgICAgICBOYW1lID0+ICRTZWxmLT57TmFtZX0sCiAgICAgICAgICAgIH0sCiAgICAgICAgKTsKICAgIH0KCiAgICBteSAkQ29udGVudCA9ICRMYXlvdXRPYmplY3QtPk91dHB1dCgKICAgICAgICBUZW1wbGF0ZUZpbGUgPT4gJ0FnZW50RGFzaGJvYXJkVGlja2V0TXlUaWNrZXRzRGFzaGxldCcsCiAgICAgICAgRGF0YSAgICAgICAgID0+IHsKICAgICAgICAgICAgJXsgJFNlbGYtPntDb25maWd9IH0sCiAgICAgICAgICAgIE5hbWUgPT4gJFNlbGYtPntOYW1lfSwKICAgICAgICAgICAgJXskU3VtbWFyeX0sCiAgICAgICAgICAgIEZpbHRlclZhbHVlID0+ICRTZWxmLT57RmlsdGVyfSwKICAgICAgICAgICAgQ3VzdG9tZXJJRCAgPT4gJFNlbGYtPntDdXN0b21lcklEfSwKICAgICAgICB9LAogICAgICAgIEtlZXBTY3JpcHRUYWdzID0+ICRQYXJhbXtBSkFYfSwKICAgICk7CgogICAgcmV0dXJuICRDb250ZW50Owp9CgpzdWIgX0luaXRpYWxDb2x1bW5GaWx0ZXIgewogICAgbXkgKCAkU2VsZiwgJVBhcmFtICkgPSBAXzsKCiAgICByZXR1cm4gaWYgISRQYXJhbXtDb2x1bW5OYW1lfTsKICAgIHJldHVybiBpZiAhJFNlbGYtPntWYWxpZEZpbHRlcmFibGVDb2x1bW5zfS0+eyAkUGFyYW17Q29sdW1uTmFtZX0gfTsKCiAgICAjIGdldCBsYXlvdXQgb2JqZWN0CiAgICBteSAkTGF5b3V0T2JqZWN0ID0gJEtlcm5lbDo6T00tPkdldCgnS2VybmVsOjpPdXRwdXQ6OkhUTUw6OkxheW91dCcpOwoKICAgIG15ICRMYWJlbCA9ICRQYXJhbXtMYWJlbH0gfHwgJFBhcmFte0NvbHVtbk5hbWV9OwogICAgJExhYmVsID0gJExheW91dE9iamVjdC0+e0xhbmd1YWdlT2JqZWN0fS0+VHJhbnNsYXRlKCRMYWJlbCk7CgogICAgIyBzZXQgZml4ZWQgdmFsdWVzCiAgICBteSAkRGF0YSA9IFsKICAgICAgICB7CiAgICAgICAgICAgIEtleSAgID0+ICcnLAogICAgICAgICAgICBWYWx1ZSA9PiB1YyAkTGFiZWwsCiAgICAgICAgfSwKICAgIF07CgogICAgIyBkZWZpbmUgaWYgY29sdW1uIGZpbHRlciB2YWx1ZXMgc2hvdWxkIGJlIHRyYW5zbGF0YWJsZQogICAgbXkgJFRyYW5zbGF0aW9uT3B0aW9uID0gMDsKCiAgICBpZiAoCiAgICAgICAgJFBhcmFte0NvbHVtbk5hbWV9IGVxICdTdGF0ZScKICAgICAgICB8fCAkUGFyYW17Q29sdW1uTmFtZX0gZXEgJ0xvY2snCiAgICAgICAgfHwgJFBhcmFte0NvbHVtbk5hbWV9IGVxICdQcmlvcml0eScKICAgICAgICApCiAgICB7CiAgICAgICAgJFRyYW5zbGF0aW9uT3B0aW9uID0gMTsKICAgIH0KCiAgICBteSAkQ2xhc3MgPSAnQ29sdW1uRmlsdGVyJzsKICAgIGlmICggJFBhcmFte0Nzc30gKSB7CiAgICAgICAgJENsYXNzIC49ICcgJyAuICRQYXJhbXtDc3N9OwogICAgfQoKICAgICMgYnVpbGQgc2VsZWN0IEhUTUwKICAgIG15ICRDb2x1bW5GaWx0ZXJIVE1MID0gJExheW91dE9iamVjdC0+QnVpbGRTZWxlY3Rpb24oCiAgICAgICAgTmFtZSAgICAgICAgPT4gJ0NvbHVtbkZpbHRlcicgLiAkUGFyYW17Q29sdW1uTmFtZX0gLiAkU2VsZi0+e05hbWV9LAogICAgICAgIERhdGEgICAgICAgID0+ICREYXRhLAogICAgICAgIENsYXNzICAgICAgID0+ICRDbGFzcywKICAgICAgICBUcmFuc2xhdGlvbiA9PiAkVHJhbnNsYXRpb25PcHRpb24sCiAgICAgICAgU2VsZWN0ZWRJRCAgPT4gJycsCiAgICApOwogICAgcmV0dXJuICRDb2x1bW5GaWx0ZXJIVE1MOwp9CgpzdWIgX0dldENvbHVtblZhbHVlcyB7CiAgICBteSAoICRTZWxmLCAlUGFyYW0gKSA9IEBfOwoKICAgIHJldHVybiBpZiAhSXNTdHJpbmdXaXRoRGF0YSggJFBhcmFte0hlYWRlckNvbHVtbn0gKTsKCiAgICBteSAkSGVhZGVyQ29sdW1uID0gJFBhcmFte0hlYWRlckNvbHVtbn07CiAgICBteSAlQ29sdW1uRmlsdGVyVmFsdWVzOwogICAgbXkgJFRpY2tldElEczsKCiAgICBpZiAoIElzQXJyYXlSZWZXaXRoRGF0YSggJFBhcmFte09yaWdpbmFsVGlja2V0SURzfSApICkgewogICAgICAgICRUaWNrZXRJRHMgPSAkUGFyYW17T3JpZ2luYWxUaWNrZXRJRHN9OwogICAgfQoKICAgIGlmICggJEhlYWRlckNvbHVtbiAhfiBtL15EeW5hbWljRmllbGRfLyApIHsKICAgICAgICBteSAkRnVuY3Rpb25OYW1lID0gJEhlYWRlckNvbHVtbiAuICdGaWx0ZXJWYWx1ZXNHZXQnOwogICAgICAgIGlmICggJEhlYWRlckNvbHVtbiBlcSAnQ3VzdG9tZXJJRCcgKSB7CiAgICAgICAgICAgICRGdW5jdGlvbk5hbWUgPSAnQ3VzdG9tZXJGaWx0ZXJWYWx1ZXNHZXQnOwogICAgICAgIH0KCiAgICAgICAgJENvbHVtbkZpbHRlclZhbHVlc3skSGVhZGVyQ29sdW1ufSA9ICRLZXJuZWw6Ok9NLT5HZXQoJ0tlcm5lbDo6U3lzdGVtOjpUaWNrZXQ6OkNvbHVtbkZpbHRlcicpLT4kRnVuY3Rpb25OYW1lKAogICAgICAgICAgICBUaWNrZXRJRHMgICAgPT4gJFRpY2tldElEcywKICAgICAgICAgICAgSGVhZGVyQ29sdW1uID0+ICRIZWFkZXJDb2x1bW4sCiAgICAgICAgICAgIFVzZXJJRCAgICAgICA9PiAkU2VsZi0+e1VzZXJJRH0sCiAgICAgICAgKTsKICAgIH0KICAgIGVsc2UgewogICAgICAgIERZTkFNSUNGSUVMRDoKICAgICAgICBmb3IgbXkgJER5bmFtaWNGaWVsZENvbmZpZyAoIEB7ICRTZWxmLT57RHluYW1pY0ZpZWxkfSB9ICkgewoKICAgICAgICAgICAgbmV4dCBEWU5BTUlDRklFTEQgaWYgIUlzSGFzaFJlZldpdGhEYXRhKCREeW5hbWljRmllbGRDb25maWcpOwoKICAgICAgICAgICAgbXkgJEZpZWxkTmFtZSA9ICdEeW5hbWljRmllbGRfJyAuICREeW5hbWljRmllbGRDb25maWctPntOYW1lfTsKCiAgICAgICAgICAgIG5leHQgRFlOQU1JQ0ZJRUxEIGlmICRGaWVsZE5hbWUgbmUgJEhlYWRlckNvbHVtbjsKCiAgICAgICAgICAgICMgZ2V0IGR5bmFtaWMgZmllbGQgYmFja2VuZCBvYmplY3QKICAgICAgICAgICAgbXkgJEJhY2tlbmRPYmplY3QgPSAkS2VybmVsOjpPTS0+R2V0KCdLZXJuZWw6OlN5c3RlbTo6RHluYW1pY0ZpZWxkOjpCYWNrZW5kJyk7CgogICAgICAgICAgICBteSAkSXNGaWx0cmFibGUgPSAkQmFja2VuZE9iamVjdC0+SGFzQmVoYXZpb3IoCiAgICAgICAgICAgICAgICBEeW5hbWljRmllbGRDb25maWcgPT4gJER5bmFtaWNGaWVsZENvbmZpZywKICAgICAgICAgICAgICAgIEJlaGF2aW9yICAgICAgICAgICA9PiAnSXNGaWx0cmFibGUnLAogICAgICAgICAgICApOwoKICAgICAgICAgICAgbmV4dCBEWU5BTUlDRklFTEQgaWYgISRJc0ZpbHRyYWJsZTsKCiAgICAgICAgICAgICRTZWxmLT57VmFsaWRGaWx0ZXJhYmxlQ29sdW1uc30tPnskSGVhZGVyQ29sdW1ufSA9ICRJc0ZpbHRyYWJsZTsKICAgICAgICAgICAgaWYgKCBJc0FycmF5UmVmV2l0aERhdGEoJFRpY2tldElEcykgKSB7CgogICAgICAgICAgICAgICAgIyBnZXQgdGhlIGhpc3RvcmljYWwgdmFsdWVzIGZvciB0aGUgZmllbGQKICAgICAgICAgICAgICAgICRDb2x1bW5GaWx0ZXJWYWx1ZXN7JEhlYWRlckNvbHVtbn0gPSAkQmFja2VuZE9iamVjdC0+Q29sdW1uRmlsdGVyVmFsdWVzR2V0KAogICAgICAgICAgICAgICAgICAgIER5bmFtaWNGaWVsZENvbmZpZyA9PiAkRHluYW1pY0ZpZWxkQ29uZmlnLAogICAgICAgICAgICAgICAgICAgIExheW91dE9iamVjdCAgICAgICA9PiAkS2VybmVsOjpPTS0+R2V0KCdLZXJuZWw6Ok91dHB1dDo6SFRNTDo6TGF5b3V0JyksCiAgICAgICAgICAgICAgICAgICAgVGlja2V0SURzICAgICAgICAgID0+ICRUaWNrZXRJRHMsCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewoKICAgICAgICAgICAgICAgICMgZ2V0IFBvc3NpYmxlVmFsdWVzCiAgICAgICAgICAgICAgICAkQ29sdW1uRmlsdGVyVmFsdWVzeyRIZWFkZXJDb2x1bW59ID0gJEJhY2tlbmRPYmplY3QtPlBvc3NpYmxlVmFsdWVzR2V0KAogICAgICAgICAgICAgICAgICAgIER5bmFtaWNGaWVsZENvbmZpZyA9PiAkRHluYW1pY0ZpZWxkQ29uZmlnLAogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBsYXN0IERZTkFNSUNGSUVMRDsKICAgICAgICB9CiAgICB9CgogICAgcmV0dXJuIFwlQ29sdW1uRmlsdGVyVmFsdWVzOwp9Cgo9b3ZlcgoKPWl0ZW0gX0NvbHVtbkZpbHRlckpTT04oKQoKICAgIGNyZWF0ZXMgYSBKU09OIHNlbGVjdCBmaWx0ZXIgZm9yIGNvbHVtbiBoZWFkZXIKCiAgICBteSAkQ29sdW1uRmlsdGVySlNPTiA9ICRUaWNrZXRPdmVydmlld1NtYWxsT2JqZWN0LT5fQ29sdW1uRmlsdGVySlNPTigKICAgICAgICBDb2x1bW5OYW1lID0+ICdRdWV1ZScsCiAgICAgICAgTGFiZWwgICAgICA9PiAnUXVldWUnLAogICAgICAgIENvbHVtblZhbHVlcyA9PiB7CiAgICAgICAgICAgIDEgPT4gJ1Bvc3RNYXN0ZXInLAogICAgICAgICAgICAyID0+ICdKdW5rJywKICAgICAgICB9LAogICAgICAgIFNlbGVjdGVkVmFsdWUgJzEnLAogICAgKTsKCj1jdXQKCnN1YiBfQ29sdW1uRmlsdGVySlNPTiB7CiAgICBteSAoICRTZWxmLCAlUGFyYW0gKSA9IEBfOwoKICAgIHJldHVybiBpZiAhJFBhcmFte0NvbHVtbk5hbWV9OwogICAgcmV0dXJuIGlmICEkU2VsZi0+e1ZhbGlkRmlsdGVyYWJsZUNvbHVtbnN9LT57ICRQYXJhbXtDb2x1bW5OYW1lfSB9OwoKICAgICMgZ2V0IGxheW91dCBvYmplY3QKICAgIG15ICRMYXlvdXRPYmplY3QgPSAkS2VybmVsOjpPTS0+R2V0KCdLZXJuZWw6Ok91dHB1dDo6SFRNTDo6TGF5b3V0Jyk7CgogICAgbXkgJExhYmVsID0gJFBhcmFte0xhYmVsfTsKICAgICRMYWJlbCA9fiBzeyBcQSBEeW5hbWljRmllbGRfIH17fWd4bXM7CiAgICAkTGFiZWwgPSAkTGF5b3V0T2JqZWN0LT57TGFuZ3VhZ2VPYmplY3R9LT5UcmFuc2xhdGUoJExhYmVsKTsKCiAgICAjIHNldCBmaXhlZCB2YWx1ZXMKICAgIG15ICREYXRhID0gWwogICAgICAgIHsKICAgICAgICAgICAgS2V5ICAgPT4gJ0RlbGV0ZUZpbHRlcicsCiAgICAgICAgICAgIFZhbHVlID0+IHVjICRMYWJlbCwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgICAgS2V5ICAgICAgPT4gJy0nLAogICAgICAgICAgICBWYWx1ZSAgICA9PiAnLScsCiAgICAgICAgICAgIERpc2FibGVkID0+IDEsCiAgICAgICAgfSwKICAgIF07CgogICAgaWYgKCAkUGFyYW17Q29sdW1uVmFsdWVzfSAmJiByZWYgJFBhcmFte0NvbHVtblZhbHVlc30gZXEgJ0hBU0gnICkgewoKICAgICAgICBteSAlVmFsdWVzID0gJXsgJFBhcmFte0NvbHVtblZhbHVlc30gfTsKCiAgICAgICAgIyBzZXQgcG9zc2libGUgdmFsdWVzCiAgICAgICAgZm9yIG15ICRWYWx1ZUtleSAoIHNvcnQgeyBsYyAkVmFsdWVzeyRhfSBjbXAgbGMgJFZhbHVlc3skYn0gfSBrZXlzICVWYWx1ZXMgKSB7CiAgICAgICAgICAgIHB1c2ggQHskRGF0YX0sIHsKICAgICAgICAgICAgICAgIEtleSAgID0+ICRWYWx1ZUtleSwKICAgICAgICAgICAgICAgIFZhbHVlID0+ICRWYWx1ZXN7JFZhbHVlS2V5fQogICAgICAgICAgICB9OwogICAgICAgIH0KICAgIH0KCiAgICAjIGRlZmluZSBpZiBjb2x1bW4gZmlsdGVyIHZhbHVlcyBzaG91bGQgYmUgdHJhbnNsYXRhYmxlCiAgICBteSAkVHJhbnNsYXRpb25PcHRpb24gPSAwOwoKICAgIGlmICgKICAgICAgICAkUGFyYW17Q29sdW1uTmFtZX0gZXEgJ1N0YXRlJwogICAgICAgIHx8ICRQYXJhbXtDb2x1bW5OYW1lfSBlcSAnTG9jaycKICAgICAgICB8fCAkUGFyYW17Q29sdW1uTmFtZX0gZXEgJ1ByaW9yaXR5JwogICAgICAgICkKICAgIHsKICAgICAgICAkVHJhbnNsYXRpb25PcHRpb24gPSAxOwogICAgfQoKICAgICMgYnVpbGQgc2VsZWN0IEhUTUwKICAgIG15ICRKU09OID0gJExheW91dE9iamVjdC0+QnVpbGRTZWxlY3Rpb25KU09OKAogICAgICAgIFsKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgTmFtZSAgICAgICAgID0+ICdDb2x1bW5GaWx0ZXInIC4gJFBhcmFte0NvbHVtbk5hbWV9IC4gJFBhcmFte0Rhc2hib2FyZE5hbWV9LAogICAgICAgICAgICAgICAgRGF0YSAgICAgICAgID0+ICREYXRhLAogICAgICAgICAgICAgICAgQ2xhc3MgICAgICAgID0+ICdDb2x1bW5GaWx0ZXInLAogICAgICAgICAgICAgICAgU29ydCAgICAgICAgID0+ICdBbHBoYW51bWVyaWNLZXknLAogICAgICAgICAgICAgICAgVHJlZVZpZXcgICAgID0+IDEsCiAgICAgICAgICAgICAgICBTZWxlY3RlZElEICAgPT4gJFBhcmFte1NlbGVjdGVkVmFsdWV9LAogICAgICAgICAgICAgICAgVHJhbnNsYXRpb24gID0+ICRUcmFuc2xhdGlvbk9wdGlvbiwKICAgICAgICAgICAgICAgIEF1dG9Db21wbGV0ZSA9PiAnb2ZmJywKICAgICAgICAgICAgfSwKICAgICAgICBdLAogICAgKTsKCiAgICByZXR1cm4gJEpTT047Cn0KCnN1YiBfU2VhcmNoUGFyYW1zR2V0IHsKICAgIG15ICggJFNlbGYsICVQYXJhbSApID0gQF87CgogICAgIyBnZXQgYWxsIHNlYXJjaCBiYXNlIGF0dHJpYnV0ZXMKICAgIG15ICVUaWNrZXRTZWFyY2g7CiAgICBteSAlRHluYW1pY0ZpZWxkc1BhcmFtZXRlcnM7CiAgICBteSBAUGFyYW1zID0gc3BsaXQgLzsvLCAkU2VsZi0+e0NvbmZpZ30tPntBdHRyaWJ1dGVzfTsKCiAgICAjIHJlYWQgdXNlciBwcmVmZXJlbmNlcyBhbmQgY29uZmlnIHRvIGdldCBjb2x1bW5zIHRoYXQKICAgICMgc2hvdWxkIGJlIHNob3duIGluIHRoZSBkYXNoYm9hcmQgd2lkZ2V0ICh0aGUgcHJlZmVyZW5jZXMKICAgICMgaGF2ZSBwcmVjZWRlbmNlKQogICAgbXkgJVByZWZlcmVuY2VzID0gJEtlcm5lbDo6T00tPkdldCgnS2VybmVsOjpTeXN0ZW06OlVzZXInKS0+R2V0UHJlZmVyZW5jZXMoCiAgICAgICAgVXNlcklEID0+ICRTZWxmLT57VXNlcklEfSwKICAgICk7CgogICAgIyBnZXQgY29sdW1uIG5hbWVzIGZyb20gUHJlZmVyZW5jZXMKICAgIG15ICRQcmVmZXJlbmNlc0NvbHVtbiA9ICRLZXJuZWw6Ok9NLT5HZXQoJ0tlcm5lbDo6U3lzdGVtOjpKU09OJyktPkRlY29kZSgKICAgICAgICBEYXRhID0+ICRQcmVmZXJlbmNlc3sgJFNlbGYtPntQcmVmS2V5Q29sdW1uc30gfSwKICAgICk7CgogICAgIyBjaGVjayBmb3IgZGVmYXVsdCBzZXR0aW5ncwogICAgbXkgQENvbHVtbnM7CiAgICBpZiAoCiAgICAgICAgJFNlbGYtPntDb25maWd9LT57RGVmYXVsdENvbHVtbnN9CiAgICAgICAgJiYgSXNIYXNoUmVmV2l0aERhdGEoICRTZWxmLT57Q29uZmlnfS0+e0RlZmF1bHRDb2x1bW5zfSApCiAgICAgICAgKQogICAgewogICAgICAgIEBDb2x1bW5zID0gZ3JlcCB7ICRTZWxmLT57Q29uZmlnfS0+e0RlZmF1bHRDb2x1bW5zfS0+eyRffSBlcSAnMicgfQogICAgICAgICAgICBzb3J0IHsgJFNlbGYtPl9EZWZhdWx0Q29sdW1uU29ydCgpIH0ga2V5cyAleyAkU2VsZi0+e0NvbmZpZ30tPntEZWZhdWx0Q29sdW1uc30gfTsKICAgIH0KICAgIGlmICgkUHJlZmVyZW5jZXNDb2x1bW4pIHsKICAgICAgICBAQ29sdW1ucyA9IGdyZXAgeyAkUHJlZmVyZW5jZXNDb2x1bW4tPntDb2x1bW5zfS0+eyRffSBlcSAnMScgfQogICAgICAgICAgICBzb3J0IHsgJFNlbGYtPl9EZWZhdWx0Q29sdW1uU29ydCgpIH0ga2V5cyAleyAkU2VsZi0+e0NvbmZpZ30tPntEZWZhdWx0Q29sdW1uc30gfTsKCiAgICAgICAgaWYgKCAkUHJlZmVyZW5jZXNDb2x1bW4tPntPcmRlcn0gJiYgQHsgJFByZWZlcmVuY2VzQ29sdW1uLT57T3JkZXJ9IH0gKSB7CiAgICAgICAgICAgIEBDb2x1bW5zID0gQHsgJFByZWZlcmVuY2VzQ29sdW1uLT57T3JkZXJ9IH07CiAgICAgICAgfQogICAgfQoKICAgICMgYWx3YXlzIHNldCBUaWNrZXROdW1iZXIKICAgIGlmICggIWdyZXAgeyAkXyBlcSAnVGlja2V0TnVtYmVyJyB9IEBDb2x1bW5zICkgewogICAgICAgIHVuc2hpZnQgQENvbHVtbnMsICdUaWNrZXROdW1iZXInOwogICAgfQoKICAgICMgYWxzbyBhbHdheXMgc2V0IFByb2Nlc3NJRCBhbmQgQWN0aXZpdHlJRCAoZm9yIHByb2Nlc3Mgd2lkZ2V0cykKICAgIGlmICggJFNlbGYtPntDb25maWd9LT57SXNQcm9jZXNzV2lkZ2V0fSApIHsKCiAgICAgICAgbXkgQEFsd2F5c0NvbHVtbnMgPSAoCiAgICAgICAgICAgICdEeW5hbWljRmllbGRfJyAuICRTZWxmLT57UHJvY2Vzc01hbmFnZW1lbnRQcm9jZXNzSUR9LAogICAgICAgICAgICAnRHluYW1pY0ZpZWxkXycgLiAkU2VsZi0+e1Byb2Nlc3NNYW5hZ2VtZW50QWN0aXZpdHlJRH0sCiAgICAgICAgKTsKICAgICAgICBteSAkUmVzb3J0OwogICAgICAgIGZvciBteSAkQWx3YXlzQ29sdW1uIChAQWx3YXlzQ29sdW1ucykgewogICAgICAgICAgICBpZiAoICFncmVwIHsgJF8gZXEgJEFsd2F5c0NvbHVtbiB9IEBDb2x1bW5zICkgewogICAgICAgICAgICAgICAgcHVzaCBAQ29sdW1ucywgJEFsd2F5c0NvbHVtbjsKICAgICAgICAgICAgICAgICRSZXNvcnQgPSAxOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmICgkUmVzb3J0KSB7CiAgICAgICAgICAgIEBDb2x1bW5zID0gc29ydCB7ICRTZWxmLT5fRGVmYXVsdENvbHVtblNvcnQoKSB9IEBDb2x1bW5zOwogICAgICAgIH0KICAgIH0KCiAgICB7CgogICAgICAgICMgbG9vcCB0aHJvdWdoIGFsbCB0aGUgZHluYW1pYyBmaWVsZHMgdG8gZ2V0IHRoZSBvbmVzIHRoYXQgc2hvdWxkIGJlIHNob3duCiAgICAgICAgRFlOQU1JQ0ZJRUxETkFNRToKICAgICAgICBmb3IgbXkgJER5bmFtaWNGaWVsZE5hbWUgKEBDb2x1bW5zKSB7CgogICAgICAgICAgICBuZXh0IERZTkFNSUNGSUVMRE5BTUUgaWYgJER5bmFtaWNGaWVsZE5hbWUgIX4gbXsgRHluYW1pY0ZpZWxkXyB9eG1zOwoKICAgICAgICAgICAgIyByZW1vdmUgZHluYW1pYyBmaWVsZCBwcmVmaXgKICAgICAgICAgICAgbXkgJEZpZWxkTmFtZSA9ICREeW5hbWljRmllbGROYW1lOwogICAgICAgICAgICAkRmllbGROYW1lID1+IHMvRHluYW1pY0ZpZWxkXy8vZ2k7CiAgICAgICAgICAgICRTZWxmLT57RHluYW1pY0ZpZWxkRmlsdGVyfS0+eyRGaWVsZE5hbWV9ID0gMTsKICAgICAgICB9CiAgICB9CgogICAgIyBnZXQgdGhlIGR5bmFtaWMgZmllbGRzIGZvciB0aGlzIHNjcmVlbgogICAgJFNlbGYtPntEeW5hbWljRmllbGR9ID0gJEtlcm5lbDo6T00tPkdldCgnS2VybmVsOjpTeXN0ZW06OkR5bmFtaWNGaWVsZCcpLT5EeW5hbWljRmllbGRMaXN0R2V0KAogICAgICAgIFZhbGlkICAgICAgID0+IDEsCiAgICAgICAgT2JqZWN0VHlwZSAgPT4gWydUaWNrZXQnXSwKICAgICAgICBGaWVsZEZpbHRlciA9PiAkU2VsZi0+e0R5bmFtaWNGaWVsZEZpbHRlcn0gfHwge30sCiAgICApOwoKICAgICMgZ2V0IGR5bmFtaWMgZmllbGQgYmFja2VuZCBvYmplY3QKICAgIG15ICRCYWNrZW5kT2JqZWN0ID0gJEtlcm5lbDo6T00tPkdldCgnS2VybmVsOjpTeXN0ZW06OkR5bmFtaWNGaWVsZDo6QmFja2VuZCcpOwoKICAgICMgZ2V0IGZpbHRlcmFibGUgRHluYW1pYyBmaWVsZHMKICAgICMgY3ljbGUgdHJvdWdoIHRoZSBhY3RpdmF0ZWQgRHluYW1pYyBGaWVsZHMgZm9yIHRoaXMgc2NyZWVuCiAgICBEWU5BTUlDRklFTEQ6CiAgICBmb3IgbXkgJER5bmFtaWNGaWVsZENvbmZpZyAoIEB7ICRTZWxmLT57RHluYW1pY0ZpZWxkfSB9ICkgewogICAgICAgIG5leHQgRFlOQU1JQ0ZJRUxEIGlmICFJc0hhc2hSZWZXaXRoRGF0YSgkRHluYW1pY0ZpZWxkQ29uZmlnKTsKCiAgICAgICAgbXkgJElzRmlsdHJhYmxlID0gJEJhY2tlbmRPYmplY3QtPkhhc0JlaGF2aW9yKAogICAgICAgICAgICBEeW5hbWljRmllbGRDb25maWcgPT4gJER5bmFtaWNGaWVsZENvbmZpZywKICAgICAgICAgICAgQmVoYXZpb3IgICAgICAgICAgID0+ICdJc0ZpbHRyYWJsZScsCiAgICAgICAgKTsKCiAgICAgICAgIyBpZiB0aGUgZHluYW1pYyBmaWVsZCBpcyBmaWx0ZXJhYmxlIGFkZCBpdCB0byB0aGUgVmFsaWRGaWx0ZXJhYmxlQ29sdW1ucyBoYXNoCiAgICAgICAgaWYgKCRJc0ZpbHRyYWJsZSkgewogICAgICAgICAgICAkU2VsZi0+e1ZhbGlkRmlsdGVyYWJsZUNvbHVtbnN9LT57ICdEeW5hbWljRmllbGRfJyAuICREeW5hbWljRmllbGRDb25maWctPntOYW1lfSB9ID0gMTsKICAgICAgICB9CiAgICB9CgogICAgIyBnZXQgc29ydGFibGUgRHluYW1pYyBmaWVsZHMKICAgICMgY3ljbGUgdHJvdWdoIHRoZSBhY3RpdmF0ZWQgRHluYW1pYyBGaWVsZHMgZm9yIHRoaXMgc2NyZWVuCiAgICBEWU5BTUlDRklFTEQ6CiAgICBmb3IgbXkgJER5bmFtaWNGaWVsZENvbmZpZyAoIEB7ICRTZWxmLT57RHluYW1pY0ZpZWxkfSB9ICkgewogICAgICAgIG5leHQgRFlOQU1JQ0ZJRUxEIGlmICFJc0hhc2hSZWZXaXRoRGF0YSgkRHluYW1pY0ZpZWxkQ29uZmlnKTsKCiAgICAgICAgbXkgJElzU29ydGFibGUgPSAkQmFja2VuZE9iamVjdC0+SGFzQmVoYXZpb3IoCiAgICAgICAgICAgIER5bmFtaWNGaWVsZENvbmZpZyA9PiAkRHluYW1pY0ZpZWxkQ29uZmlnLAogICAgICAgICAgICBCZWhhdmlvciAgICAgICAgICAgPT4gJ0lzU29ydGFibGUnLAogICAgICAgICk7CgogICAgICAgICMgaWYgdGhlIGR5bmFtaWMgZmllbGQgaXMgc29ydGFibGUgYWRkIGl0IHRvIHRoZSBWYWxpZFNvcnRhYmxlQ29sdW1ucyBoYXNoCiAgICAgICAgaWYgKCRJc1NvcnRhYmxlKSB7CiAgICAgICAgICAgICRTZWxmLT57VmFsaWRTb3J0YWJsZUNvbHVtbnN9LT57ICdEeW5hbWljRmllbGRfJyAuICREeW5hbWljRmllbGRDb25maWctPntOYW1lfSB9ID0gMTsKICAgICAgICB9CiAgICB9CgogICAgIyBnZXQgcXVldWUgb2JqZWN0CiAgICBteSAkUXVldWVPYmplY3QgPSAkS2VybmVsOjpPTS0+R2V0KCdLZXJuZWw6OlN5c3RlbTo6UXVldWUnKTsKCiAgICBTVFJJTkc6CiAgICBmb3IgbXkgJFN0cmluZyAoQFBhcmFtcykgewogICAgICAgIG5leHQgU1RSSU5HIGlmICEkU3RyaW5nOwogICAgICAgIG15ICggJEtleSwgJFZhbHVlICkgPSBzcGxpdCAvPS8sICRTdHJpbmc7CgogICAgICAgIGlmICggJEtleSBlcSAnQ3VzdG9tZXJJRCcgKSB7CiAgICAgICAgICAgICRLZXkgPSAiQ3VzdG9tZXJJRFJhdyI7CiAgICAgICAgfQoKICAgICAgICAjIHB1c2ggQVJSQVlSRUYgYXR0cmlidXRlcyBkaXJlY3RseSBpbiBhbiBBUlJBWVJFRgogICAgICAgIGlmICgKICAgICAgICAgICAgJEtleQogICAgICAgICAgICA9fiAvXihTdGF0ZVR5cGV8U3RhdGVUeXBlSURzfFF1ZXVlc3xRdWV1ZUlEc3xUeXBlc3xUeXBlSURzfFN0YXRlc3xTdGF0ZUlEc3xQcmlvcml0aWVzfFByaW9yaXR5SURzfFNlcnZpY2VzfFNlcnZpY2VJRHN8U0xBc3xTTEFJRHN8TG9ja3N8TG9ja0lEc3xPd25lcklEc3xSZXNwb25zaWJsZUlEc3xXYXRjaFVzZXJJRHN8QXJjaGl2ZUZsYWdzKSQvCiAgICAgICAgICAgICkKICAgICAgICB7CiAgICAgICAgICAgIHB1c2ggQHsgJFRpY2tldFNlYXJjaHskS2V5fSB9LCAkVmFsdWU7CiAgICAgICAgfQoKICAgICAgICAjIGNoZWNrIGlmIHBhcmFtZXRlciBpcyBhIGR5bmFtaWMgZmllbGQgYW5kIGNhcHR1cmUgZHluYW1pYyBmaWVsZCBuYW1lICh3aXRoIER5bmFtaWNGaWVsZF8pCiAgICAgICAgIyBpbiAkMSBhbmQgdGhlIE9wZXJhdG9yIGluICQyCiAgICAgICAgIyBwb3NzaWJsZSBEeW5hbWljIEZpZWxkcyBvcHRpb25zIGluY2x1ZGU6CiAgICAgICAgIyAgIER5bmFtaWNGaWVsZF9OYW1lWF9FcXVhbHM9MTIzOwogICAgICAgICMgICBEeW5hbWljRmllbGRfTmFtZVhfTGlrZT12YWx1ZSo7CiAgICAgICAgIyAgIER5bmFtaWNGaWVsZF9OYW1lWF9HcmVhdGVyVGhhbj0yMDAxLTAxLTAxIDAxOjAxOjAxOwogICAgICAgICMgICBEeW5hbWljRmllbGRfTmFtZVhfR3JlYXRlclRoYW5FcXVhbHM9MjAwMS0wMS0wMSAwMTowMTowMTsKICAgICAgICAjICAgRHluYW1pY0ZpZWxkX05hbWVYX1NtYWxsZXJUaGFuPTIwMDItMDItMDIgMDI6MDI6MDI7CiAgICAgICAgIyAgIER5bmFtaWNGaWVsZF9OYW1lWF9TbWFsbGVyVGhhbkVxdWFscz0yMDAyLTAyLTAyIDAyOjAyOjAyOwogICAgICAgIGVsc2lmICggJEtleSA9fiBte1xBIChEeW5hbWljRmllbGRfLis/KSBfICguKz8pIFx6fXN4bSApIHsKCiAgICAgICAgICAgICMgcHJldmVudCBhZGRpbmcgUHJvY2Vzc01hbmFnZW1lbnQgc2VhcmNoIHBhcmFtZXRlcnMgKGZvciBQcm9jZXNzV2lkZ2V0KQogICAgICAgICAgICBpZiAoICRTZWxmLT57Q29uZmlnfS0+e0lzUHJvY2Vzc1dpZGdldH0gKSB7CiAgICAgICAgICAgICAgICBuZXh0IFNUUklORyBpZiAkMiBlcSAkU2VsZi0+e1Byb2Nlc3NNYW5hZ2VtZW50UHJvY2Vzc0lEfTsKICAgICAgICAgICAgICAgIG5leHQgU1RSSU5HIGlmICQyIGVxICRTZWxmLT57UHJvY2Vzc01hbmFnZW1lbnRBY3Rpdml0eUlEfTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgJER5bmFtaWNGaWVsZHNQYXJhbWV0ZXJzeyQxfS0+eyQyfSA9ICRWYWx1ZTsKICAgICAgICB9CgogICAgICAgIGVsc2lmICggIWRlZmluZWQgJFRpY2tldFNlYXJjaHskS2V5fSApIHsKCiAgICAgICAgICAgICMgY2hhbmdlIHNvcnQgYnksIGlmIG5lZWRlZAogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAkS2V5IGVxICdTb3J0QnknCiAgICAgICAgICAgICAgICAmJiAkU2VsZi0+e1NvcnRCeX0KICAgICAgICAgICAgICAgICYmICRTZWxmLT57VmFsaWRTb3J0YWJsZUNvbHVtbnN9LT57ICRTZWxmLT57U29ydEJ5fSB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRWYWx1ZSA9ICRTZWxmLT57U29ydEJ5fTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNpZiAoICRLZXkgZXEgJ1NvcnRCeScgJiYgISRTZWxmLT57VmFsaWRTb3J0YWJsZUNvbHVtbnN9LT57JFZhbHVlfSApIHsKICAgICAgICAgICAgICAgICRWYWx1ZSA9ICdBZ2UnOwogICAgICAgICAgICB9CiAgICAgICAgICAgICRUaWNrZXRTZWFyY2h7JEtleX0gPSAkVmFsdWU7CiAgICAgICAgfQogICAgICAgIGVsc2lmICggIXJlZiAkVGlja2V0U2VhcmNoeyRLZXl9ICkgewogICAgICAgICAgICBteSAkVmFsdWVUbXAgPSAkVGlja2V0U2VhcmNoeyRLZXl9OwogICAgICAgICAgICAkVGlja2V0U2VhcmNoeyRLZXl9ID0gWyRWYWx1ZVRtcF07CiAgICAgICAgICAgIHB1c2ggQHsgJFRpY2tldFNlYXJjaHskS2V5fSB9LCAkVmFsdWU7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICBwdXNoIEB7ICRUaWNrZXRTZWFyY2h7JEtleX0gfSwgJFZhbHVlOwogICAgICAgIH0KICAgIH0KICAgICVUaWNrZXRTZWFyY2ggPSAoCiAgICAgICAgJVRpY2tldFNlYXJjaCwKICAgICAgICAlRHluYW1pY0ZpZWxkc1BhcmFtZXRlcnMsCiAgICAgICAgUGVybWlzc2lvbiA9PiAkU2VsZi0+e0NvbmZpZ30tPntQZXJtaXNzaW9ufSB8fCAncm8nLAogICAgICAgIFVzZXJJRCA9PiAkU2VsZi0+e1VzZXJJRH0sCiAgICApOwoKICAgICMgQ3VzdG9tZXJJbmZvcm1hdGlvbkNlbnRlciBzaG93cyBkYXRhIHBlciBDdXN0b21lcklECiAgICBpZiAoICRQYXJhbXtDdXN0b21lcklEfSApIHsKICAgICAgICAkVGlja2V0U2VhcmNoe0N1c3RvbWVySURSYXd9ID0gJFBhcmFte0N1c3RvbWVySUR9OwogICAgfQoKICAgICMgZGVmaW5lIGZpbHRlciBhdHRyaWJ1dGVzCiAgICBteSBATXlRdWV1ZXMgPSAkUXVldWVPYmplY3QtPkdldEFsbEN1c3RvbVF1ZXVlcygKICAgICAgICBVc2VySUQgPT4gJFNlbGYtPntVc2VySUR9LAogICAgKTsKICAgIGlmICggIUBNeVF1ZXVlcyApIHsKICAgICAgICBATXlRdWV1ZXMgPSAoOTk5Xzk5OSk7CiAgICB9CgogICAgIyBnZXQgYWxsIHF1ZXVlcyB0aGUgYWdlbnQgaXMgYWxsb3dlZCB0byBzZWUgKGZvciBteSBzZXJ2aWNlcykKICAgIG15ICVWaWV3YWJsZVF1ZXVlcyA9ICRRdWV1ZU9iamVjdC0+R2V0QWxsUXVldWVzKAogICAgICAgIFVzZXJJRCA9PiAkU2VsZi0+e1VzZXJJRH0sCiAgICAgICAgVHlwZSAgID0+ICdybycsCiAgICApOwogICAgbXkgQFZpZXdhYmxlUXVldWVJRHMgPSBzb3J0IGtleXMgJVZpZXdhYmxlUXVldWVzOwoKICAgICMgZ2V0IHRoZSBjdXN0b20gc2VydmljZXMgZnJvbSBhZ2VudCBwcmVmZXJlbmNlcwogICAgIyBzZXQgdGhlIHNlcnZpY2UgaWRzIHRvIGFuIGFycmF5IG9mIG5vbiBleGlzdGluZyBzZXJ2aWNlIGlkcyAoMCkKICAgIG15IEBNeVNlcnZpY2VJRHMgPSAoMCk7CiAgICBpZiAoICRTZWxmLT57VXNlVGlja2V0U2VydmljZX0gKSB7CiAgICAgICAgQE15U2VydmljZUlEcyA9ICRLZXJuZWw6Ok9NLT5HZXQoJ0tlcm5lbDo6U3lzdGVtOjpTZXJ2aWNlJyktPkdldEFsbEN1c3RvbVNlcnZpY2VzKAogICAgICAgICAgICBVc2VySUQgPT4gJFNlbGYtPntVc2VySUR9LAogICAgICAgICk7CgogICAgICAgIGlmICggIWRlZmluZWQgJE15U2VydmljZUlEc1swXSApIHsKICAgICAgICAgICAgQE15U2VydmljZUlEcyA9ICgwKTsKICAgICAgICB9CiAgICB9CgogICAgbXkgJVRpY2tldFNlYXJjaFN1bW1hcnkgPSAoCgkJT3BlbiA9PiB7CgkJCQlPd25lcklEcyA9PiBbICRTZWxmLT57VXNlcklEfSwgXSwKCQkJCVN0YXRlVHlwZSA9PiBbICdvcGVuJywgXSwKCQkJCUxvY2tJRHMgICAgICA9PiAkVGlja2V0U2VhcmNoe0xvY2tJRHN9IC8vIHVuZGVmLAoJCX0sCgkJUmVtaW5kZXIgPT4gewoJCQkJT3duZXJJRHMgPT4gWyAkU2VsZi0+e1VzZXJJRH0sIF0sCgkJCQlTdGF0ZVR5cGUgPT4gWyAncGVuZGluZyByZW1pbmRlcicsIF0sCgkJCQlMb2NrSURzICAgICAgPT4gJFRpY2tldFNlYXJjaHtMb2NrSURzfSAvLyB1bmRlZiwKCQl9LAoJCVBlbmRpbmcgPT4gewoJCQkJT3duZXJJRHMgPT4gWyAkU2VsZi0+e1VzZXJJRH0sIF0sCgkJCQlTdGF0ZVR5cGUgPT4gWyAncGVuZGluZyBhdXRvJywgXSwKCQkJCUxvY2tJRHMgICAgICA9PiAkVGlja2V0U2VhcmNoe0xvY2tJRHN9IC8vIHVuZGVmLAoJCX0sCiAgICApOwoKICAgIGlmICggZGVmaW5lZCAkVGlja2V0U2VhcmNoe1F1ZXVlSURzfSB8fCBkZWZpbmVkICRUaWNrZXRTZWFyY2h7UXVldWVzfSApIHsKICAgICAgICBkZWxldGUgJFRpY2tldFNlYXJjaFN1bW1hcnl7TXlRdWV1ZXN9OwogICAgfQoKICAgIGlmICggISRTZWxmLT57VXNlVGlja2V0U2VydmljZX0gKSB7CiAgICAgICAgZGVsZXRlICRUaWNrZXRTZWFyY2hTdW1tYXJ5e015U2VydmljZXN9OwogICAgfQoKICAgIHJldHVybiAoCiAgICAgICAgQ29sdW1ucyAgICAgICAgICAgICA9PiBcQENvbHVtbnMsCiAgICAgICAgVGlja2V0U2VhcmNoICAgICAgICA9PiBcJVRpY2tldFNlYXJjaCwKICAgICAgICBUaWNrZXRTZWFyY2hTdW1tYXJ5ID0+IFwlVGlja2V0U2VhcmNoU3VtbWFyeSwKICAgICk7Cn0KCnN1YiBfRGVmYXVsdENvbHVtblNvcnQgewogICAgbXkgKCAkU2VsZiwgJVBhcmFtICkgPSBAXzsKCiAgICBteSAlRGVmYXVsdENvbHVtbnMgPSAoCiAgICAgICAgVGlja2V0TnVtYmVyICAgICAgICAgICA9PiAxMDAsCiAgICAgICAgQWdlICAgICAgICAgICAgICAgICAgICA9PiAxMTAsCiAgICAgICAgQ2hhbmdlZCAgICAgICAgICAgICAgICA9PiAxMTEsCiAgICAgICAgUGVuZGluZ1RpbWUgICAgICAgICAgICA9PiAxMTIsCiAgICAgICAgRXNjYWxhdGlvblRpbWUgICAgICAgICA9PiAxMTMsCiAgICAgICAgRXNjYWxhdGlvblNvbHV0aW9uVGltZSA9PiAxMTQsCiAgICAgICAgRXNjYWxhdGlvblJlc3BvbnNlVGltZSA9PiAxMTUsCiAgICAgICAgRXNjYWxhdGlvblVwZGF0ZVRpbWUgICA9PiAxMTYsCiAgICAgICAgVGl0bGUgICAgICAgICAgICAgICAgICA9PiAxMjAsCiAgICAgICAgU3RhdGUgICAgICAgICAgICAgICAgICA9PiAxMzAsCiAgICAgICAgTG9jayAgICAgICAgICAgICAgICAgICA9PiAxNDAsCiAgICAgICAgUXVldWUgICAgICAgICAgICAgICAgICA9PiAxNTAsCiAgICAgICAgT3duZXIgICAgICAgICAgICAgICAgICA9PiAxNjAsCiAgICAgICAgUmVzcG9uc2libGUgICAgICAgICAgICA9PiAxNjEsCiAgICAgICAgQ3VzdG9tZXJJRCAgICAgICAgICAgICA9PiAxNzAsCiAgICAgICAgQ3VzdG9tZXJOYW1lICAgICAgICAgICA9PiAxNzEsCiAgICAgICAgQ3VzdG9tZXJVc2VySUQgICAgICAgICA9PiAxNzIsCiAgICAgICAgVHlwZSAgICAgICAgICAgICAgICAgICA9PiAxODAsCiAgICAgICAgU2VydmljZSAgICAgICAgICAgICAgICA9PiAxOTEsCiAgICAgICAgU0xBICAgICAgICAgICAgICAgICAgICA9PiAxOTIsCiAgICAgICAgUHJpb3JpdHkgICAgICAgICAgICAgICA9PiAxOTMsCiAgICApOwoKICAgICMgc2V0IGRlZmF1bHQgb3JkZXIgb2YgUHJvY2Vzc01hbmFnZW1lbnQgY29sdW1ucyAoZm9yIHByb2Nlc3Mgd2lkZ2V0cykKICAgIGlmICggJFNlbGYtPntDb25maWd9LT57SXNQcm9jZXNzV2lkZ2V0fSApIHsKICAgICAgICAkRGVmYXVsdENvbHVtbnN7IkR5bmFtaWNGaWVsZF8kU2VsZi0+e1Byb2Nlc3NNYW5hZ2VtZW50UHJvY2Vzc0lEfSJ9ICA9IDEwMTsKICAgICAgICAkRGVmYXVsdENvbHVtbnN7IkR5bmFtaWNGaWVsZF8kU2VsZi0+e1Byb2Nlc3NNYW5hZ2VtZW50QWN0aXZpdHlJRH0ifSA9IDEwMjsKICAgIH0KCiAgICAjIGR5bmFtaWMgZmllbGRzIGNhbiBub3QgYmUgb24gdGhlIERlZmF1bHRDb2x1bW5zIHNvcnRpbmcgaGFzaAogICAgIyB3aGVuIGNvbXBhcmluZyAyIGR5bmFtaWMgZmllbGRzIHNvcnRpbmcgbXVzdCBiZSBhbHBoYWJldGljYWwKICAgIGlmICggISREZWZhdWx0Q29sdW1uc3skYX0gJiYgISREZWZhdWx0Q29sdW1uc3skYn0gKSB7CiAgICAgICAgcmV0dXJuICRhIGNtcCAkYjsKICAgIH0KCiAgICAjIHdoZW4gYSBkeW5hbWljIGZpZWxkIGlzIGNvbXBhcmVkIHRvIGEgdGlja2V0IGF0dHJpYnV0ZSBpdCBtdXN0IGJlIGhpZ2hlcgogICAgZWxzaWYgKCAhJERlZmF1bHRDb2x1bW5zeyRhfSApIHsKICAgICAgICByZXR1cm4gMTsKICAgIH0KCiAgICAjIHdoZW4gYSB0aWNrZXQgYXR0cmlidXRlIGlzIGNvbXBhcmVkIHRvIGEgZHluYW1pYyBmaWVsZCBpdCBtdXN0IGJlIGxvd2VyCiAgICBlbHNpZiAoICEkRGVmYXVsdENvbHVtbnN7JGJ9ICkgewogICAgICAgIHJldHVybiAtMTsKICAgIH0KCiAgICAjIG90aGVyd2lzZSBkbyBhIG51bWVyaWNhbCBjb21wYXJpc29uIHdpdGggdGhlIHRpY2tldCBhdHRyaWJ1dGVzCiAgICByZXR1cm4gJERlZmF1bHRDb2x1bW5zeyRhfSA8PT4gJERlZmF1bHRDb2x1bW5zeyRifTsKfQoKMTsKCj1iYWNrCg==</File>
        <File Location="Kernel/Output/HTML/Templates/Standard/AgentDashboardTicketMyTicketsDashlet.tt" Permission="644" Encode="Base64">IyAtLQojIEFnZW50RGFzaGJvYXJkVGlja2V0TXlUaWNrZXRzRGFzaGxldC50dCAtIHByb3ZpZGVzIEhUTUwgZm9yIGdsb2JhbCBkYXNoYm9hcmQKIyAtLQojIFRoaXMgc29mdHdhcmUgY29tZXMgd2l0aCBBQlNPTFVURUxZIE5PIFdBUlJBTlRZLiBGb3IgZGV0YWlscywgc2VlCiMgdGhlIGVuY2xvc2VkIGZpbGUgQ09QWUlORyBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbiAoQUdQTCkuIElmIHlvdQojIGRpZCBub3QgcmVjZWl2ZSB0aGlzIGZpbGUsIHNlZSBodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvYWdwbC50eHQuCiMgLS0KClslIFJlbmRlckJsb2NrU3RhcnQoIkNvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNGaWx0ZXIiKSAlXQo8dWwgY2xhc3M9IlRhYiBBY3Rpb25zIj4KICAgIDxsaSBjbGFzcz0iWyUgRGF0YS5pdGVtKCJPcGVuOjpTZWxlY3RlZCIpIHwgaHRtbCAlXSI+PGEgaHJlZj0iIyIgaWQ9IkRhc2hib2FyZFslIERhdGEuTmFtZSB8IGh0bWwgJV1PcGVuIiBkYXRhLWZpbHRlcj0iT3BlbiI+WyUgVHJhbnNsYXRlKCJPcGVuIHRpY2tldHMiKSB8IGh0bWwgJV0gKFslIERhdGEuT3BlbiB8IGh0bWwgJV0pPC9hPjwvbGk+CiAgICA8bGkgY2xhc3M9IlslIERhdGEuaXRlbSgiUmVtaW5kZXI6OlNlbGVjdGVkIikgfCBodG1sICVdIj48YSBocmVmPSIjIiBpZD0iRGFzaGJvYXJkWyUgRGF0YS5OYW1lIHwgaHRtbCAlXVJlbWluZGVyIiBkYXRhLWZpbHRlcj0iUmVtaW5kZXIiPlslIFRyYW5zbGF0ZSgiUmVtaW5kZXIgdGlja2V0cyIpIHwgaHRtbCAlXSAoWyUgRGF0YS5SZW1pbmRlciB8IGh0bWwgJV0pPC9hPjwvbGk+CiAgICA8bGkgY2xhc3M9IlslIERhdGEuaXRlbSgiUGVuZGluZzo6U2VsZWN0ZWQiKSB8IGh0bWwgJV0iPjxhIGhyZWY9IiMiIGlkPSJEYXNoYm9hcmRbJSBEYXRhLk5hbWUgfCBodG1sICVdUGVuZGluZyIgZGF0YS1maWx0ZXI9IlBlbmRpbmciPlslIFRyYW5zbGF0ZSgiUGVuZGluZyB0aWNrZXRzIikgfCBodG1sICVdIChbJSBEYXRhLlBlbmRpbmcgfCBodG1sICVdKTwvYT48L2xpPgo8L3VsPgpbJSBSZW5kZXJCbG9ja1N0YXJ0KCJDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljRmlsdGVyTmF2QmFyIikgJV0KPHNwYW4gY2xhc3M9IlBhZ2luYXRpb24iPgogICAgWyUgRGF0YS5TaXRlTmF2QmFyICVdCjwvc3Bhbj4KWyUgUmVuZGVyQmxvY2tFbmQoIkNvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNGaWx0ZXJOYXZCYXIiKSAlXQpbJSBSZW5kZXJCbG9ja0VuZCgiQ29udGVudExhcmdlVGlja2V0R2VuZXJpY0ZpbHRlciIpICVdCgojPCEtLSBUaGlzIGZvcm0gd2lsbCBub3QgYmUgc3VibWl0dGVkLCB3ZSBuZWVkIGl0IGZvciB0aGUgQUpBWCBjYWxscy4gLS0+Cjxmb3JtIGFjdGlvbj0iWyUgRW52KCJDR0lIYW5kbGUiKSAlXSIgbWV0aG9kPSJwb3N0IiBlbmN0eXBlPSJtdWx0aXBhcnQvZm9ybS1kYXRhIj4KICAgIDxpbnB1dCB0eXBlPSJoaWRkZW4iIG5hbWU9IkN1c3RvbWVySUQiIHZhbHVlPSJbJSBEYXRhLkN1c3RvbWVySUQgfCBodG1sICVdIi8+CiAgICA8aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJGaWx0ZXJbJSBEYXRhLk5hbWUgfCBodG1sICVdIiBpZD0iRmlsdGVyWyUgRGF0YS5OYW1lIHwgaHRtbCAlXSIgdmFsdWU9IlslIERhdGEuRmlsdGVyVmFsdWUgfCBodG1sICVdIiAvPgogICAgPHRhYmxlIGNsYXNzPSJEYXRhVGFibGUiPgogICAgICAgIDx0aGVhZD4KWyUgUmVuZGVyQmxvY2tTdGFydCgiQ29udGVudExhcmdlVGlja2V0R2VuZXJpY0hlYWRlciIpICVdCiAgICAgICAgICAgIDx0cj4KClslIFJlbmRlckJsb2NrU3RhcnQoIkdlbmVyYWxPdmVydmlld0hlYWRlciIpICVdCgpbJSBSZW5kZXJCbG9ja1N0YXJ0KCJDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljSGVhZGVyTWV0YSIpICVdCiAgICAgICAgICAgICAgICA8dGggY2xhc3M9IkRhc2hib2FyZEhlYWRlciBbJSBEYXRhLkNTUyB8IGh0bWwgJV0iPgpbJSBSZW5kZXJCbG9ja1N0YXJ0KCJDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljSGVhZGVyTWV0YUxpbmsiKSAlXQogICAgICAgICAgICAgICAgICAgIDxhIGlkPSJbJSBEYXRhLkhlYWRlckNvbHVtbk5hbWUgfCBodG1sICVdT3ZlcnZpZXdDb250cm9sWyUgRGF0YS5OYW1lIHwgaHRtbCAlXSIgbmFtZT0iWyUgRGF0YS5IZWFkZXJDb2x1bW5OYW1lIHwgaHRtbCAlXU92ZXJ2aWV3Q29udHJvbFslIERhdGEuTmFtZSB8IGh0bWwgJV0iIGhyZWY9IiMiIHRpdGxlPSJbJSBEYXRhLlRpdGxlIHwgaHRtbCAlXSIgPjwvYT4KClslIFdSQVBQRVIgSlNPbkRvY3VtZW50Q29tcGxldGUgJV0KPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPi8vPCFbQ0RBVEFbCiAgICAkKCcjWyUgRGF0YS5IZWFkZXJDb2x1bW5OYW1lIHwgaHRtbCAlXU92ZXJ2aWV3Q29udHJvbFslIERhdGEuTmFtZSB8IGh0bWwgJV0nKS51bmJpbmQoJ2NsaWNrJykuYmluZCgnY2xpY2snLCBmdW5jdGlvbiAoRXZlbnQpIHsKICAgICAgICB2YXIgRmlsdGVyLCBMaW5rUGFnZSwgQ29sdW1uRmlsdGVyTmFtZSwgQ3VzdG9tZXJJRDsKCiAgICAgICAgRmlsdGVyICA9ICQoJyNGaWx0ZXJbJSBEYXRhLk5hbWUgfCBodG1sICVdJykudmFsKCkgfHwgJ0FsbCc7CiAgICAgICAgTGlua1BhZ2UgPSAnJzsKICAgICAgICBDdXN0b21lcklEID0gJCgnaW5wdXRbbmFtZT1DdXN0b21lcklEXScpLnZhbCgpIHx8ICcnOwoKICAgICAgICAvLyBnZXQgYWxsIGNvbHVtbiBmaWx0ZXJzCiAgICAgICAgJCgnLkNvbHVtbkZpbHRlcicpLmVhY2goZnVuY3Rpb24oKXsKICAgICAgICAgICAgQ29sdW1uRmlsdGVyTmFtZSAgPSAkKHRoaXMpLmF0dHIoJ25hbWUnKTsKCiAgICAgICAgICAgIC8vIGdldCBhbGwgb3B0aW9ucyBvZiBjdXJyZW50IGNvbHVtbiBmaWx0ZXIKICAgICAgICAgICAgJCh0aGlzKS5jaGlsZHJlbigpLmVhY2goIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgaWYgKCAkKHRoaXMpLmF0dHIoJ3ZhbHVlJykgJiYgJCh0aGlzKS5hdHRyKCdzZWxlY3RlZCcpICkgewogICAgICAgICAgICAgICAgICAgIExpbmtQYWdlID0gTGlua1BhZ2UgKyBDb2x1bW5GaWx0ZXJOYW1lICsgJz0nICsgJCh0aGlzKS5hdHRyKCd2YWx1ZScpICsgJzsnOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9KTsKCiAgICAgICAgJCgnI0Rhc2hib2FyZFslIERhdGEuTmFtZSB8IGh0bWwgJV0tYm94JykuYWRkQ2xhc3MoJ0xvYWRpbmcnKTsKICAgICAgICBDb3JlLkFKQVguQ29udGVudFVwZGF0ZSgkKCcjRGFzaGJvYXJkWyUgRGF0YS5OYW1lIHwgaHRtbCAlXScpLCAnWyUgRW52KCJCYXNlbGluayIpICVdQWN0aW9uPVslIEVudigiQWN0aW9uIikgJV07U3ViYWN0aW9uPUVsZW1lbnQ7TmFtZT1bJSBEYXRhLk5hbWUgfCBodG1sICVdO0ZpbHRlcj0nICsgRmlsdGVyICsgJzsnICsgTGlua1BhZ2UgKyAnO0N1c3RvbWVySUQ9JyArIEN1c3RvbWVySUQgKyAnO1NvcnRCeT1bJSBEYXRhLkhlYWRlckNvbHVtbk5hbWUgfCBodG1sICVdO09yZGVyQnk9WyUgRGF0YS5PcmRlckJ5IHwgaHRtbCAlXScsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgQ29yZS5VSS5UYWJsZS5Jbml0Q1NTUHNldWRvQ2xhc3NlcygkKCcjRGFzaGJvYXJkWyUgRGF0YS5OYW1lIHwgaHRtbCAlXScpKTsKICAgICAgICAgICAgJCgnI0Rhc2hib2FyZFslIERhdGEuTmFtZSB8IGh0bWwgJV0tYm94JykucmVtb3ZlQ2xhc3MoJ0xvYWRpbmcnKTsKICAgICAgICB9KTsKICAgICAgICBFdmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0pOwovL11dPjwvc2NyaXB0PgpbJSBFTkQgJV0KClslIFJlbmRlckJsb2NrRW5kKCJDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljSGVhZGVyTWV0YUxpbmsiKSAlXQpbJSBSZW5kZXJCbG9ja1N0YXJ0KCJDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljSGVhZGVyTWV0YUVtcHR5IikgJV0KICAgICAgICAgICAgICAgICAgICA8c3BhbiB0aXRsZT0iWyUgVHJhbnNsYXRlKERhdGEuSGVhZGVyQ29sdW1uTmFtZSkgfCBodG1sICVdIj48L3NwYW4+ClslIFJlbmRlckJsb2NrRW5kKCJDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljSGVhZGVyTWV0YUVtcHR5IikgJV0KCiAgICAgICAgICAgICAgICA8L3RoPgpbJSBSZW5kZXJCbG9ja0VuZCgiQ29udGVudExhcmdlVGlja2V0R2VuZXJpY0hlYWRlck1ldGEiKSAlXQoKWyUgUmVuZGVyQmxvY2tTdGFydCgiQ29udGVudExhcmdlVGlja2V0R2VuZXJpY0hlYWRlclRpY2tldEhlYWRlciIpICVdClslIFJlbmRlckJsb2NrU3RhcnQoIkNvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNIZWFkZXJUaWNrZXROdW1iZXJDb2x1bW4iKSAlXQogICAgICAgICAgICAgICAgPHRoIGNsYXNzPSJEYXNoYm9hcmRIZWFkZXIgVGlja2V0TnVtYmVyIFslIERhdGEuQ1NTIHwgaHRtbCAlXSIgZGF0YS1jb2x1bW49IlRpY2tldE51bWJlciI+CiAgICAgICAgICAgICAgICAgICAgPGEgaWQ9IlRpY2tldE51bWJlck92ZXJ2aWV3Q29udHJvbFslIERhdGEuTmFtZSB8IGh0bWwgJV0iIG5hbWU9IlRpY2tldE51bWJlck92ZXJ2aWV3Q29udHJvbFslIERhdGEuTmFtZSB8IGh0bWwgJV0iIGhyZWY9IiMiIHRpdGxlPSJbJSBEYXRhLlRpdGxlIHwgaHRtbCAlXSIgPlslIENvbmZpZygiVGlja2V0OjpIb29rIikgJV08L2E+ClslIFdSQVBQRVIgSlNPbkRvY3VtZW50Q29tcGxldGUgJV0KPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPi8vPCFbQ0RBVEFbCiAgICAkKCcjVGlja2V0TnVtYmVyT3ZlcnZpZXdDb250cm9sWyUgRGF0YS5OYW1lIHwgaHRtbCAlXScpLnVuYmluZCgnY2xpY2snKS5iaW5kKCdjbGljaycsIGZ1bmN0aW9uIChFdmVudCkgewogICAgICAgIHZhciBGaWx0ZXIsIExpbmtQYWdlLCBDb2x1bW5GaWx0ZXJOYW1lLCBDdXN0b21lcklEOwoKICAgICAgICBGaWx0ZXIgID0gJCgnI0ZpbHRlclslIERhdGEuTmFtZSB8IGh0bWwgJV0nKS52YWwoKSB8fCAnQWxsJzsKICAgICAgICBMaW5rUGFnZSA9ICcnOwogICAgICAgIEN1c3RvbWVySUQgPSAkKCdpbnB1dFtuYW1lPUN1c3RvbWVySURdJykudmFsKCkgfHwgJyc7CgogICAgICAgIC8vIGdldCBhbGwgY29sdW1uIGZpbHRlcnMKICAgICAgICAkKCcuQ29sdW1uRmlsdGVyJykuZWFjaChmdW5jdGlvbigpewogICAgICAgICAgICBDb2x1bW5GaWx0ZXJOYW1lICA9ICQodGhpcykuYXR0cignbmFtZScpOwoKICAgICAgICAgICAgLy8gZ2V0IGFsbCBvcHRpb25zIG9mIGN1cnJlbnQgY29sdW1uIGZpbHRlcgogICAgICAgICAgICAkKHRoaXMpLmNoaWxkcmVuKCkuZWFjaCggZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICBpZiAoICQodGhpcykuYXR0cigndmFsdWUnKSAmJiAkKHRoaXMpLmF0dHIoJ3NlbGVjdGVkJykgKSB7CiAgICAgICAgICAgICAgICAgICAgTGlua1BhZ2UgPSBMaW5rUGFnZSArIENvbHVtbkZpbHRlck5hbWUgKyAnPScgKyAkKHRoaXMpLmF0dHIoJ3ZhbHVlJykgKyAnOyc7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0pOwoKICAgICAgICAkKCcjRGFzaGJvYXJkWyUgRGF0YS5OYW1lIHwgaHRtbCAlXS1ib3gnKS5hZGRDbGFzcygnTG9hZGluZycpOwogICAgICAgIENvcmUuQUpBWC5Db250ZW50VXBkYXRlKCQoJyNEYXNoYm9hcmRbJSBEYXRhLk5hbWUgfCBodG1sICVdJyksICdbJSBFbnYoIkJhc2VsaW5rIikgJV1BY3Rpb249WyUgRW52KCJBY3Rpb24iKSAlXTtTdWJhY3Rpb249RWxlbWVudDtOYW1lPVslIERhdGEuTmFtZSB8IGh0bWwgJV07RmlsdGVyPScgKyBGaWx0ZXIgKyAnOycgKyBMaW5rUGFnZSArICc7Q3VzdG9tZXJJRD0nICsgQ3VzdG9tZXJJRCArICc7U29ydEJ5PVRpY2tldE51bWJlcjtPcmRlckJ5PVslIERhdGEuT3JkZXJCeSB8IGh0bWwgJV0nLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIENvcmUuVUkuVGFibGUuSW5pdENTU1BzZXVkb0NsYXNzZXMoJCgnI0Rhc2hib2FyZFslIERhdGEuTmFtZSB8IGh0bWwgJV0nKSk7CiAgICAgICAgICAgICQoJyNEYXNoYm9hcmRbJSBEYXRhLk5hbWUgfCBodG1sICVdLWJveCcpLnJlbW92ZUNsYXNzKCdMb2FkaW5nJyk7CiAgICAgICAgfSk7CiAgICAgICAgRXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9KTsKLy9dXT48L3NjcmlwdD4KWyUgRU5EICVdCiAgICAgICAgICAgICAgICA8L3RoPgpbJSBSZW5kZXJCbG9ja0VuZCgiQ29udGVudExhcmdlVGlja2V0R2VuZXJpY0hlYWRlclRpY2tldE51bWJlckNvbHVtbiIpICVdCgpbJSBSZW5kZXJCbG9ja1N0YXJ0KCJDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljSGVhZGVyQ29sdW1uIikgJV0KICAgICAgICAgICAgICAgIDx0aCBjbGFzcz0iRGFzaGJvYXJkSGVhZGVyIFslIERhdGEuSGVhZGVyQ29sdW1uTmFtZSB8IGh0bWwgJV0gWyUgRGF0YS5DU1MgfCBodG1sICVdIiBkYXRhLWNvbHVtbj0iWyUgRGF0YS5IZWFkZXJDb2x1bW5OYW1lIHwgaHRtbCAlXSI+CgpbJSBSZW5kZXJCbG9ja1N0YXJ0KCJDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljSGVhZGVyQ29sdW1uRmlsdGVyTGluayIpICVdCiAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj0iIyIgY2xhc3M9IkNvbHVtblNldHRpbmdzVHJpZ2dlciIgdGl0bGU9IlslIERhdGEuRmlsdGVyVGl0bGUgfCBodG1sICVdIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9ImZhIGZhLWZpbHRlciI+PC9pPgogICAgICAgICAgICAgICAgICAgIDwvYT4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJDb2x1bW5TZXR0aW5nc0NvbnRhaW5lciI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9IkNvbHVtblNldHRpbmdzQm94Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFslIERhdGEuQ29sdW1uRmlsdGVyU3RyZyAlXQpbJSBSZW5kZXJCbG9ja1N0YXJ0KCJDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljSGVhZGVyQ29sdW1uRmlsdGVyTGlua0N1c3RvbWVySURTZWFyY2giKSAlXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGNsYXNzPSJDdXN0b21lcklEQXV0b0NvbXBsZXRlIiBhdXRvY29tcGxldGU9Im9mZiIgLz4KWyUgV1JBUFBFUiBKU09uRG9jdW1lbnRDb21wbGV0ZSAlXQo8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+Ly88IVtDREFUQVsKQ29yZS5Db25maWcuU2V0KCdDdXN0b21lcklEQXV0b2NvbXBsZXRlLlF1ZXJ5RGVsYXknLCAiWyUgRGF0YS5xdWVyeURlbGF5IHwgaHRtbCAlXSIpOwpDb3JlLkNvbmZpZy5TZXQoJ0N1c3RvbWVySURBdXRvY29tcGxldGUuTWF4UmVzdWx0c0Rpc3BsYXllZCcsICJbJSBEYXRhLm1heFJlc3VsdHNEaXNwbGF5ZWQgfCBodG1sICVdIik7CkNvcmUuQ29uZmlnLlNldCgnQ3VzdG9tZXJJREF1dG9jb21wbGV0ZS5NaW5RdWVyeUxlbmd0aCcsICJbJSBEYXRhLm1pblF1ZXJ5TGVuZ3RoIHwgaHRtbCAlXSIpOwpDb3JlLkFnZW50LkRhc2hib2FyZC5Jbml0Q3VzdG9tZXJJREF1dG9jb21wbGV0ZSggJCgiLkN1c3RvbWVySURBdXRvQ29tcGxldGUiKSApOwovL11dPjwvc2NyaXB0PgpbJSBFTkQgJV0KWyUgUmVuZGVyQmxvY2tFbmQoIkNvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNIZWFkZXJDb2x1bW5GaWx0ZXJMaW5rQ3VzdG9tZXJJRFNlYXJjaCIpICVdCgpbJSBSZW5kZXJCbG9ja1N0YXJ0KCJDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljSGVhZGVyQ29sdW1uRmlsdGVyTGlua1VzZXJTZWFyY2giKSAlXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGNsYXNzPSJVc2VyQXV0b0NvbXBsZXRlIiBhdXRvY29tcGxldGU9Im9mZiIgLz4KWyUgV1JBUFBFUiBKU09uRG9jdW1lbnRDb21wbGV0ZSAlXQo8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+Ly88IVtDREFUQVsKQ29yZS5Db25maWcuU2V0KCdVc2VyQXV0b2NvbXBsZXRlLlF1ZXJ5RGVsYXknLCAiWyUgRGF0YS5xdWVyeURlbGF5IHwgaHRtbCAlXSIpOwpDb3JlLkNvbmZpZy5TZXQoJ1VzZXJBdXRvY29tcGxldGUuTWF4UmVzdWx0c0Rpc3BsYXllZCcsICJbJSBEYXRhLm1heFJlc3VsdHNEaXNwbGF5ZWQgfCBodG1sICVdIik7CkNvcmUuQ29uZmlnLlNldCgnVXNlckF1dG9jb21wbGV0ZS5NaW5RdWVyeUxlbmd0aCcsICJbJSBEYXRhLm1pblF1ZXJ5TGVuZ3RoIHwgaHRtbCAlXSIpOwpDb3JlLkFnZW50LkRhc2hib2FyZC5Jbml0VXNlckF1dG9jb21wbGV0ZSggJCgiLlVzZXJBdXRvQ29tcGxldGUiKSApOwovL11dPjwvc2NyaXB0PgpbJSBFTkQgJV0KWyUgUmVuZGVyQmxvY2tFbmQoIkNvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNIZWFkZXJDb2x1bW5GaWx0ZXJMaW5rVXNlclNlYXJjaCIpICVdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPSIjIiBjbGFzcz0iRGVsZXRlRmlsdGVyIEhpZGRlbiI+PGkgY2xhc3M9ImZhIGZhLXRyYXNoLW8iPjwvaT48L2E+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgICA8YSBpZD0iWyUgRGF0YS5IZWFkZXJDb2x1bW5OYW1lIHwgaHRtbCAlXU92ZXJ2aWV3Q29udHJvbFslIERhdGEuTmFtZSB8IGh0bWwgJV0iIG5hbWU9IlslIERhdGEuSGVhZGVyQ29sdW1uTmFtZSB8IGh0bWwgJV1PdmVydmlld0NvbnRyb2xbJSBEYXRhLk5hbWUgfCBodG1sICVdIiBocmVmPSIjIiB0aXRsZT0iWyUgRGF0YS5UaXRsZSB8IGh0bWwgJV0iID5bJSBEYXRhLkhlYWRlck5hbWVUcmFuc2xhdGVkIHwgaHRtbCAlXTwvYT4KWyUgV1JBUFBFUiBKU09uRG9jdW1lbnRDb21wbGV0ZSAlXQo8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+Ly88IVtDREFUQVsKICAgICQoJyNDb2x1bW5GaWx0ZXJbJSBEYXRhLkhlYWRlckNvbHVtbk5hbWUgfCBodG1sICVdWyUgRGF0YS5OYW1lIHwgaHRtbCAlXScpLnVuYmluZCgnY2hhbmdlJykuYmluZCgnY2hhbmdlJywgZnVuY3Rpb24oKXsKICAgICAgICB2YXIgTGlua1BhZ2UsIENvbHVtbkZpbHRlck5hbWUsIEZpbHRlciwgQ29sdW1uRmlsdGVySUQsIEN1c3RvbWVySUQ7CgogICAgICAgIExpbmtQYWdlID0gJyc7CiAgICAgICAgRmlsdGVyICAgPSAkKCcjRmlsdGVyWyUgRGF0YS5OYW1lIHwgaHRtbCAlXScpLnZhbCgpIHx8ICdBbGwnOwogICAgICAgIEN1c3RvbWVySUQgPSAkKCdpbnB1dFtuYW1lPUN1c3RvbWVySURdJykudmFsKCkgfHwgJyc7CgogICAgICAgIC8vIHNldCBDb2x1bW5GaWx0ZXIgdmFsdWUgZm9yIGN1cnJlbnQgQ29sdW1uRmlsdGVyCiAgICAgICAgQ29sdW1uRmlsdGVyTmFtZSA9ICQodGhpcykuYXR0cignbmFtZScpOwogICAgICAgIExpbmtQYWdlID0gTGlua1BhZ2UgKyBDb2x1bW5GaWx0ZXJOYW1lICsgJz0nICsgJCh0aGlzKS52YWwoKSArICc7JzsKCiAgICAgICAgLy8gcmVtZW1iZXIgdGhlIGN1cnJlbnQgQ29sdW1uRmlsdGVyIElECiAgICAgICAgQ29sdW1uRmlsdGVySUQgPSAkKHRoaXMpLmF0dHIoJ0lEJyk7CgogICAgICAgIC8vIGdldCBhbGwgY29sdW1uIGZpbHRlcnMKICAgICAgICAkKCcuQ29sdW1uRmlsdGVyJykuZWFjaChmdW5jdGlvbigpewogICAgICAgICAgICBDb2x1bW5GaWx0ZXJOYW1lICA9ICQodGhpcykuYXR0cignbmFtZScpOwoKICAgICAgICAgICAgLy8gZXhjbHVkZSBjdXJyZW50IGNvbHVtbiBmaWx0ZXIsIGFwcGFyZW50bHkgdGhlIHNlbGVjdGVkIG9wdGlvbiBpcyBub3Qgc2V0IHRvCiAgICAgICAgICAgIC8vIHNlbGVjdGVkIGF0IHRoaXMgcG9pbnQgYW5kIHVzZXMgdGhlIG9sZCB2YWx1ZQogICAgICAgICAgICBpZiAoJCh0aGlzKS5hdHRyKCdJRCcpICE9PSBDb2x1bW5GaWx0ZXJJRCkgewoKICAgICAgICAgICAgICAgIC8vIGdldCBhbGwgb3B0aW9ucyBvZiBjdXJyZW50IGNvbHVtbiBmaWx0ZXIKICAgICAgICAgICAgICAgICQodGhpcykuY2hpbGRyZW4oKS5lYWNoKCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoICQodGhpcykuYXR0cigndmFsdWUnKSAmJiAkKHRoaXMpLmF0dHIoJ3NlbGVjdGVkJykgKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIExpbmtQYWdlID0gTGlua1BhZ2UgKyBDb2x1bW5GaWx0ZXJOYW1lICsgJz0nICsgJCh0aGlzKS5hdHRyKCd2YWx1ZScpICsgJzsnOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICAgICQoJyNEYXNoYm9hcmRbJSBEYXRhLk5hbWUgfCBodG1sICVdLWJveCcpLmFkZENsYXNzKCdMb2FkaW5nJyk7CiAgICAgICAgQ29yZS5BSkFYLkNvbnRlbnRVcGRhdGUoJCgnI0Rhc2hib2FyZFslIERhdGEuTmFtZSB8IGh0bWwgJV0nKSwgJ1slIEVudigiQmFzZWxpbmsiKSAlXUFjdGlvbj1bJSBFbnYoIkFjdGlvbiIpICVdO1N1YmFjdGlvbj1FbGVtZW50O05hbWU9WyUgRGF0YS5OYW1lIHwgaHRtbCAlXTtGaWx0ZXI9JyArIEZpbHRlciArICc7Q3VzdG9tZXJJRD0nICsgQ3VzdG9tZXJJRCArICc7U29ydEJ5PVslIERhdGEuU29ydEJ5IHwgaHRtbCAlXTtPcmRlckJ5PVslIERhdGEuT3JkZXJCeSB8IGh0bWwgJV07JyArIExpbmtQYWdlLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIENvcmUuVUkuVGFibGUuSW5pdENTU1BzZXVkb0NsYXNzZXMoJCgnI0Rhc2hib2FyZFslIERhdGEuTmFtZSB8IGh0bWwgJV0nKSk7CiAgICAgICAgICAgICQoJyNEYXNoYm9hcmRbJSBEYXRhLk5hbWUgfCBodG1sICVdLWJveCcpLnJlbW92ZUNsYXNzKCdMb2FkaW5nJyk7CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSk7CgogICAgJCgnI1slIERhdGEuSGVhZGVyQ29sdW1uTmFtZSB8IGh0bWwgJV1PdmVydmlld0NvbnRyb2xbJSBEYXRhLk5hbWUgfCBodG1sICVdJykudW5iaW5kKCdjbGljaycpLmJpbmQoJ2NsaWNrJywgZnVuY3Rpb24gKEV2ZW50KSB7CiAgICAgICAgdmFyIExpbmtQYWdlLCBDb2x1bW5GaWx0ZXJOYW1lLCBGaWx0ZXIsIENvbHVtbkZpbHRlcklELCBDdXN0b21lcklEOwoKICAgICAgICBMaW5rUGFnZSA9ICcnOwogICAgICAgIEZpbHRlciAgID0gJCgnI0ZpbHRlclslIERhdGEuTmFtZSB8IGh0bWwgJV0nKS52YWwoKSB8fCAnQWxsJzsKICAgICAgICBDdXN0b21lcklEID0gJCgnaW5wdXRbbmFtZT1DdXN0b21lcklEXScpLnZhbCgpIHx8ICcnOwoKICAgICAgICAvLyBzZXQgQ29sdW1uRmlsdGVyIHZhbHVlIGZvciBjdXJyZW50IENvbHVtbkZpbHRlcgogICAgICAgIENvbHVtbkZpbHRlck5hbWUgPSAkKHRoaXMpLmF0dHIoJ25hbWUnKTsKICAgICAgICBMaW5rUGFnZSA9IExpbmtQYWdlICsgQ29sdW1uRmlsdGVyTmFtZSArICc9JyArICQodGhpcykudmFsKCkgKyAnOyc7CgogICAgICAgIC8vIHJlbWVtYmVyIHRoZSBjdXJyZW50IENvbHVtbkZpbHRlciBJRAogICAgICAgIENvbHVtbkZpbHRlcklEID0gJCh0aGlzKS5hdHRyKCdJRCcpOwoKICAgICAgICAvLyBnZXQgYWxsIGNvbHVtbiBmaWx0ZXJzCiAgICAgICAgJCgnLkNvbHVtbkZpbHRlcicpLmVhY2goZnVuY3Rpb24oKXsKICAgICAgICAgICAgQ29sdW1uRmlsdGVyTmFtZSAgPSAkKHRoaXMpLmF0dHIoJ25hbWUnKTsKCiAgICAgICAgICAgIC8vIGV4Y2x1ZGUgY3VycmVudCBjb2x1bW4gZmlsdGVyLCBhcHBhcmVudGx5IHRoZSBzZWxlY3RlZCBvcHRpb24gaXMgbm90IHNldCB0bwogICAgICAgICAgICAvLyBzZWxlY3RlZCBhdCB0aGlzIHBvaW50IGFuZCB1c2VzIHRoZSBvbGQgdmFsdWUKICAgICAgICAgICAgaWYgKCQodGhpcykuYXR0cignSUQnKSAhPT0gQ29sdW1uRmlsdGVySUQpIHsKCiAgICAgICAgICAgICAgICAvLyBnZXQgYWxsIG9wdGlvbnMgb2YgY3VycmVudCBjb2x1bW4gZmlsdGVyCiAgICAgICAgICAgICAgICAkKHRoaXMpLmNoaWxkcmVuKCkuZWFjaCggZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCAkKHRoaXMpLmF0dHIoJ3ZhbHVlJykgJiYgJCh0aGlzKS5hdHRyKCdzZWxlY3RlZCcpICkgewogICAgICAgICAgICAgICAgICAgICAgICBMaW5rUGFnZSA9IExpbmtQYWdlICsgQ29sdW1uRmlsdGVyTmFtZSArICc9JyArICQodGhpcykuYXR0cigndmFsdWUnKSArICc7JzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICAkKCcjRGFzaGJvYXJkWyUgRGF0YS5OYW1lIHwgaHRtbCAlXS1ib3gnKS5hZGRDbGFzcygnTG9hZGluZycpOwogICAgICAgIENvcmUuQUpBWC5Db250ZW50VXBkYXRlKCQoJyNEYXNoYm9hcmRbJSBEYXRhLk5hbWUgfCBodG1sICVdJyksICdbJSBFbnYoIkJhc2VsaW5rIikgJV1BY3Rpb249WyUgRW52KCJBY3Rpb24iKSAlXTtTdWJhY3Rpb249RWxlbWVudDtOYW1lPVslIERhdGEuTmFtZSB8IGh0bWwgJV07RmlsdGVyPScgKyBGaWx0ZXIgKyAnO0N1c3RvbWVySUQ9JyArIEN1c3RvbWVySUQgKyAnO1NvcnRCeT1bJSBEYXRhLkhlYWRlckNvbHVtbk5hbWUgfCBodG1sICVdO09yZGVyQnk9WyUgRGF0YS5PcmRlckJ5IHwgaHRtbCAlXTsnICsgTGlua1BhZ2UsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgQ29yZS5VSS5UYWJsZS5Jbml0Q1NTUHNldWRvQ2xhc3NlcygkKCcjRGFzaGJvYXJkWyUgRGF0YS5OYW1lIHwgaHRtbCAlXScpKTsKICAgICAgICAgICAgJCgnI0Rhc2hib2FyZFslIERhdGEuTmFtZSB8IGh0bWwgJV0tYm94JykucmVtb3ZlQ2xhc3MoJ0xvYWRpbmcnKTsKICAgICAgICB9KTsKICAgICAgICBFdmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0pOwovL11dPjwvc2NyaXB0PgpbJSBFTkQgJV0KWyUgUmVuZGVyQmxvY2tFbmQoIkNvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNIZWFkZXJDb2x1bW5GaWx0ZXJMaW5rIikgJV0KClslIFJlbmRlckJsb2NrU3RhcnQoIkNvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNIZWFkZXJDb2x1bW5MaW5rIikgJV0KICAgICAgICAgICAgICAgICAgICA8YSBpZD0iWyUgRGF0YS5IZWFkZXJDb2x1bW5OYW1lIHwgaHRtbCAlXU92ZXJ2aWV3Q29udHJvbFslIERhdGEuTmFtZSB8IGh0bWwgJV0iIG5hbWU9IlslIERhdGEuSGVhZGVyQ29sdW1uTmFtZSB8IGh0bWwgJV1PdmVydmlld0NvbnRyb2xbJSBEYXRhLk5hbWUgfCBodG1sICVdIiBocmVmPSIjIiB0aXRsZT0iWyUgRGF0YS5UaXRsZSB8IGh0bWwgJV0iID5bJSBEYXRhLkhlYWRlck5hbWVUcmFuc2xhdGVkIHwgaHRtbCAlXTwvYT4KWyUgV1JBUFBFUiBKU09uRG9jdW1lbnRDb21wbGV0ZSAlXQo8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+Ly88IVtDREFUQVsKICAgICQoJyNbJSBEYXRhLkhlYWRlckNvbHVtbk5hbWUgfCBodG1sICVdT3ZlcnZpZXdDb250cm9sWyUgRGF0YS5OYW1lIHwgaHRtbCAlXScpLnVuYmluZCgnY2xpY2snKS5iaW5kKCdjbGljaycsIGZ1bmN0aW9uIChFdmVudCkgewogICAgICAgIHZhciBMaW5rUGFnZSwgQ29sdW1uRmlsdGVyTmFtZSwgRmlsdGVyLCBDb2x1bW5GaWx0ZXJJRCwgQ3VzdG9tZXJJRDsKCiAgICAgICAgTGlua1BhZ2UgPSAnJzsKICAgICAgICBGaWx0ZXIgICA9ICQoJyNGaWx0ZXJbJSBEYXRhLk5hbWUgfCBodG1sICVdJykudmFsKCkgfHwgJ0FsbCc7CiAgICAgICAgQ3VzdG9tZXJJRCA9ICQoJ2lucHV0W25hbWU9Q3VzdG9tZXJJRF0nKS52YWwoKSB8fCAnJzsKCiAgICAgICAgLy8gc2V0IENvbHVtbkZpbHRlciB2YWx1ZSBmb3IgY3VycmVudCBDb2x1bW5GaWx0ZXIKICAgICAgICBDb2x1bW5GaWx0ZXJOYW1lID0gJCh0aGlzKS5hdHRyKCduYW1lJyk7CiAgICAgICAgTGlua1BhZ2UgPSBMaW5rUGFnZSArIENvbHVtbkZpbHRlck5hbWUgKyAnPScgKyAkKHRoaXMpLnZhbCgpICsgJzsnOwoKICAgICAgICAvLyByZW1lbWJlciB0aGUgY3VycmVudCBDb2x1bW5GaWx0ZXIgSUQKICAgICAgICBDb2x1bW5GaWx0ZXJJRCA9ICQodGhpcykuYXR0cignSUQnKTsKCiAgICAgICAgLy8gZ2V0IGFsbCBjb2x1bW4gZmlsdGVycwogICAgICAgICQoJy5Db2x1bW5GaWx0ZXInKS5lYWNoKGZ1bmN0aW9uKCl7CiAgICAgICAgICAgIENvbHVtbkZpbHRlck5hbWUgID0gJCh0aGlzKS5hdHRyKCduYW1lJyk7CgogICAgICAgICAgICAvLyBleGNsdWRlIGN1cnJlbnQgY29sdW1uIGZpbHRlciwgYXBwYXJlbnRseSB0aGUgc2VsZWN0ZWQgb3B0aW9uIGlzIG5vdCBzZXQgdG8KICAgICAgICAgICAgLy8gc2VsZWN0ZWQgYXQgdGhpcyBwb2ludCBhbmQgdXNlcyB0aGUgb2xkIHZhbHVlCiAgICAgICAgICAgIGlmICgkKHRoaXMpLmF0dHIoJ0lEJykgIT09IENvbHVtbkZpbHRlcklEKSB7CgogICAgICAgICAgICAgICAgLy8gZ2V0IGFsbCBvcHRpb25zIG9mIGN1cnJlbnQgY29sdW1uIGZpbHRlcgogICAgICAgICAgICAgICAgJCh0aGlzKS5jaGlsZHJlbigpLmVhY2goIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIGlmICggJCh0aGlzKS5hdHRyKCd2YWx1ZScpICYmICQodGhpcykuYXR0cignc2VsZWN0ZWQnKSApIHsKICAgICAgICAgICAgICAgICAgICAgICAgTGlua1BhZ2UgPSBMaW5rUGFnZSArIENvbHVtbkZpbHRlck5hbWUgKyAnPScgKyAkKHRoaXMpLmF0dHIoJ3ZhbHVlJykgKyAnOyc7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICAgICAgJCgnI0Rhc2hib2FyZFslIERhdGEuTmFtZSB8IGh0bWwgJV0tYm94JykuYWRkQ2xhc3MoJ0xvYWRpbmcnKTsKICAgICAgICBDb3JlLkFKQVguQ29udGVudFVwZGF0ZSgkKCcjRGFzaGJvYXJkWyUgRGF0YS5OYW1lIHwgaHRtbCAlXScpLCAnWyUgRW52KCJCYXNlbGluayIpICVdQWN0aW9uPVslIEVudigiQWN0aW9uIikgJV07U3ViYWN0aW9uPUVsZW1lbnQ7TmFtZT1bJSBEYXRhLk5hbWUgfCBodG1sICVdO0ZpbHRlcj0nICsgRmlsdGVyICsgJztDdXN0b21lcklEPScgKyBDdXN0b21lcklEICsnO1NvcnRCeT1bJSBEYXRhLkhlYWRlckNvbHVtbk5hbWUgfCBodG1sICVdO09yZGVyQnk9WyUgRGF0YS5PcmRlckJ5IHwgaHRtbCAlXTsnICsgTGlua1BhZ2UsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgQ29yZS5VSS5UYWJsZS5Jbml0Q1NTUHNldWRvQ2xhc3NlcygkKCcjRGFzaGJvYXJkWyUgRGF0YS5OYW1lIHwgaHRtbCAlXScpKTsKICAgICAgICAgICAgJCgnI0Rhc2hib2FyZFslIERhdGEuTmFtZSB8IGh0bWwgJV0tYm94JykucmVtb3ZlQ2xhc3MoJ0xvYWRpbmcnKTsKICAgICAgICB9KTsKICAgICAgICBFdmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0pOwovL11dPjwvc2NyaXB0PgpbJSBFTkQgJV0KClslIFJlbmRlckJsb2NrRW5kKCJDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljSGVhZGVyQ29sdW1uTGluayIpICVdCgpbJSBSZW5kZXJCbG9ja1N0YXJ0KCJDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljSGVhZGVyQ29sdW1uRmlsdGVyIikgJV0KICAgICAgICAgICAgICAgICAgICA8YSBocmVmPSIjIiBjbGFzcz0iQ29sdW1uU2V0dGluZ3NUcmlnZ2VyIiB0aXRsZT0iWyUgRGF0YS5GaWx0ZXJUaXRsZSB8IGh0bWwgJV0iPgogICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz0iZmEgZmEtZmlsdGVyIj48L2k+CiAgICAgICAgICAgICAgICAgICAgPC9hPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9IkNvbHVtblNldHRpbmdzQ29udGFpbmVyIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iQ29sdW1uU2V0dGluZ3NCb3giPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgWyUgRGF0YS5Db2x1bW5GaWx0ZXJTdHJnICVdClslIFJlbmRlckJsb2NrU3RhcnQoIkNvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNIZWFkZXJDb2x1bW5GaWx0ZXJMaW5rQ3VzdG9tZXJVc2VyU2VhcmNoIikgJV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBjbGFzcz0iQ3VzdG9tZXJVc2VyQXV0b0NvbXBsZXRlIiBhdXRvY29tcGxldGU9Im9mZiIgLz4KWyUgV1JBUFBFUiBKU09uRG9jdW1lbnRDb21wbGV0ZSAlXQo8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+Ly88IVtDREFUQVsKQ29yZS5Db25maWcuU2V0KCdDdXN0b21lclVzZXJBdXRvY29tcGxldGUuUXVlcnlEZWxheScsICJbJSBEYXRhLnF1ZXJ5RGVsYXkgfCBodG1sICVdIik7CkNvcmUuQ29uZmlnLlNldCgnQ3VzdG9tZXJVc2VyQXV0b2NvbXBsZXRlLk1heFJlc3VsdHNEaXNwbGF5ZWQnLCAiWyUgRGF0YS5tYXhSZXN1bHRzRGlzcGxheWVkIHwgaHRtbCAlXSIpOwpDb3JlLkNvbmZpZy5TZXQoJ0N1c3RvbWVyVXNlckF1dG9jb21wbGV0ZS5NaW5RdWVyeUxlbmd0aCcsICJbJSBEYXRhLm1pblF1ZXJ5TGVuZ3RoIHwgaHRtbCAlXSIpOwpDb3JlLkFnZW50LkRhc2hib2FyZC5Jbml0Q3VzdG9tZXJVc2VyQXV0b2NvbXBsZXRlKCAkKCIuQ3VzdG9tZXJVc2VyQXV0b0NvbXBsZXRlIikgKTsKLy9dXT48L3NjcmlwdD4KWyUgRU5EICVdClslIFJlbmRlckJsb2NrRW5kKCJDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljSGVhZGVyQ29sdW1uRmlsdGVyTGlua0N1c3RvbWVyVXNlclNlYXJjaCIpICVdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPSIjIiBjbGFzcz0iRGVsZXRlRmlsdGVyIEhpZGRlbiI+PGkgY2xhc3M9ImZhIGZhLXRyYXNoLW8iPjwvaT48L2E+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKWyUgV1JBUFBFUiBKU09uRG9jdW1lbnRDb21wbGV0ZSAlXQo8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+Ly88IVtDREFUQVsKICAgICQoJyNDb2x1bW5GaWx0ZXJbJSBEYXRhLkhlYWRlckNvbHVtbk5hbWUgfCBodG1sICVdWyUgRGF0YS5OYW1lIHwgaHRtbCAlXScpLnVuYmluZCgnY2hhbmdlJykuYmluZCgnY2hhbmdlJywgZnVuY3Rpb24oKXsKICAgICAgICB2YXIgTGlua1BhZ2UsIENvbHVtbkZpbHRlck5hbWUsIEZpbHRlciwgQ29sdW1uRmlsdGVySUQsIEN1c3RvbWVySUQ7CgogICAgICAgIExpbmtQYWdlID0gJyc7CiAgICAgICAgRmlsdGVyICAgPSAkKCcjRmlsdGVyWyUgRGF0YS5OYW1lIHwgaHRtbCAlXScpLnZhbCgpIHx8ICdBbGwnOwogICAgICAgIEN1c3RvbWVySUQgPSAkKCdpbnB1dFtuYW1lPUN1c3RvbWVySURdJykudmFsKCkgfHwgJyc7CgogICAgICAgIC8vIHNldCBDb2x1bW5GaWx0ZXIgdmFsdWUgZm9yIGN1cnJlbnQgQ29sdW1uRmlsdGVyCiAgICAgICAgQ29sdW1uRmlsdGVyTmFtZSA9ICQodGhpcykuYXR0cignbmFtZScpOwogICAgICAgIExpbmtQYWdlID0gTGlua1BhZ2UgKyBDb2x1bW5GaWx0ZXJOYW1lICsgJz0nICsgJCh0aGlzKS52YWwoKSArICc7JzsKCiAgICAgICAgLy8gcmVtZW1iZXIgdGhlIGN1cnJlbnQgQ29sdW1uRmlsdGVyIElECiAgICAgICAgQ29sdW1uRmlsdGVySUQgPSAkKHRoaXMpLmF0dHIoJ0lEJyk7CgogICAgICAgIC8vIGdldCBhbGwgY29sdW1uIGZpbHRlcnMKICAgICAgICAkKCcuQ29sdW1uRmlsdGVyJykuZWFjaChmdW5jdGlvbigpewogICAgICAgICAgICBDb2x1bW5GaWx0ZXJOYW1lICA9ICQodGhpcykuYXR0cignbmFtZScpOwoKICAgICAgICAgICAgLy8gZXhjbHVkZSBjdXJyZW50IGNvbHVtbiBmaWx0ZXIsIGFwcGFyZW50bHkgdGhlIHNlbGVjdGVkIG9wdGlvbiBpcyBub3Qgc2V0IHRvCiAgICAgICAgICAgIC8vIHNlbGVjdGVkIGF0IHRoaXMgcG9pbnQgYW5kIHVzZXMgdGhlIG9sZCB2YWx1ZQogICAgICAgICAgICBpZiAoJCh0aGlzKS5hdHRyKCdJRCcpICE9PSBDb2x1bW5GaWx0ZXJJRCkgewoKICAgICAgICAgICAgICAgIC8vIGdldCBhbGwgb3B0aW9ucyBvZiBjdXJyZW50IGNvbHVtbiBmaWx0ZXIKICAgICAgICAgICAgICAgICQodGhpcykuY2hpbGRyZW4oKS5lYWNoKCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoICQodGhpcykuYXR0cigndmFsdWUnKSAmJiAkKHRoaXMpLmF0dHIoJ3NlbGVjdGVkJykgKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIExpbmtQYWdlID0gTGlua1BhZ2UgKyBDb2x1bW5GaWx0ZXJOYW1lICsgJz0nICsgJCh0aGlzKS5hdHRyKCd2YWx1ZScpICsgJzsnOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICAgICQoJyNEYXNoYm9hcmRbJSBEYXRhLk5hbWUgfCBodG1sICVdLWJveCcpLmFkZENsYXNzKCdMb2FkaW5nJyk7CiAgICAgICAgQ29yZS5BSkFYLkNvbnRlbnRVcGRhdGUoJCgnI0Rhc2hib2FyZFslIERhdGEuTmFtZSB8IGh0bWwgJV0nKSwgJ1slIEVudigiQmFzZWxpbmsiKSAlXUFjdGlvbj1bJSBFbnYoIkFjdGlvbiIpICVdO1N1YmFjdGlvbj1FbGVtZW50O05hbWU9WyUgRGF0YS5OYW1lIHwgaHRtbCAlXTtGaWx0ZXI9JyArIEZpbHRlciArICc7Q3VzdG9tZXJJRD0nICsgQ3VzdG9tZXJJRCArICc7U29ydEJ5PVslIERhdGEuU29ydEJ5IHwgaHRtbCAlXTtPcmRlckJ5PVslIERhdGEuT3JkZXJCeSB8IGh0bWwgJV07JyArIExpbmtQYWdlLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIENvcmUuVUkuVGFibGUuSW5pdENTU1BzZXVkb0NsYXNzZXMoJCgnI0Rhc2hib2FyZFslIERhdGEuTmFtZSB8IGh0bWwgJV0nKSk7CiAgICAgICAgICAgICQoJyNEYXNoYm9hcmRbJSBEYXRhLk5hbWUgfCBodG1sICVdLWJveCcpLnJlbW92ZUNsYXNzKCdMb2FkaW5nJyk7CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSk7Ci8vXV0+PC9zY3JpcHQ+ClslIEVORCAlXQogICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJHcmF5IiB0aXRsZT0iWyUgRGF0YS5UaXRsZSB8IGh0bWwgJV0iID5bJSBEYXRhLkhlYWRlck5hbWVUcmFuc2xhdGVkIHwgaHRtbCAlXTwvc3Bhbj4KWyUgUmVuZGVyQmxvY2tFbmQoIkNvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNIZWFkZXJDb2x1bW5GaWx0ZXIiKSAlXQoKWyUgUmVuZGVyQmxvY2tTdGFydCgiQ29udGVudExhcmdlVGlja2V0R2VuZXJpY0hlYWRlckNvbHVtbkVtcHR5IikgJV0KICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iR3JheSIgdGl0bGU9IlslIERhdGEuVGl0bGUgfCBodG1sICVdIiA+WyUgRGF0YS5IZWFkZXJOYW1lVHJhbnNsYXRlZCAlXTwvc3Bhbj4KWyUgUmVuZGVyQmxvY2tFbmQoIkNvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNIZWFkZXJDb2x1bW5FbXB0eSIpICVdCiAgICAgICAgICAgICAgICA8L3RoPgpbJSBSZW5kZXJCbG9ja0VuZCgiQ29udGVudExhcmdlVGlja2V0R2VuZXJpY0hlYWRlckNvbHVtbiIpICVdClslIFJlbmRlckJsb2NrRW5kKCJDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljSGVhZGVyVGlja2V0SGVhZGVyIikgJV0KClslIFJlbmRlckJsb2NrRW5kKCJHZW5lcmFsT3ZlcnZpZXdIZWFkZXIiKSAlXQoKICAgICAgICAgICAgPC90cj4KClslIFdSQVBQRVIgSlNPbkRvY3VtZW50Q29tcGxldGUgJV0KPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPi8vPCFbQ0RBVEFbCiQoJy5EYXNoYm9hcmRIZWFkZXInKS5vZmYoJ2NsaWNrJykub24oJ2NsaWNrJywgJy5Db2x1bW5TZXR0aW5nc1RyaWdnZXInLCBmdW5jdGlvbigpIHsKCiAgICB2YXIgJFRyaWdnZXJPYmogPSAkKHRoaXMpLAogICAgICAgICRDb2x1bW5TZXR0aW5nc0NvbnRhaW5lciA9ICRUcmlnZ2VyT2JqLm5leHQoJy5Db2x1bW5TZXR0aW5nc0NvbnRhaW5lcicpLAogICAgICAgIEZpbHRlck5hbWU7CgogICAgaWYgKCRUcmlnZ2VyT2JqLmhhc0NsYXNzKCdBY3RpdmUnKSkgewoKICAgICAgICAkVHJpZ2dlck9iagogICAgICAgICAgICAubmV4dCgnLkNvbHVtblNldHRpbmdzQ29udGFpbmVyJykKICAgICAgICAgICAgLmZpbmQoJy5Db2x1bW5TZXR0aW5nc0JveCcpCiAgICAgICAgICAgIC5mYWRlT3V0KCdmYXN0JywgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAkVHJpZ2dlck9iai5yZW1vdmVDbGFzcygnQWN0aXZlJyk7CiAgICAgICAgICAgIH0pOwogICAgfQogICAgZWxzZSB7CgogICAgICAgIC8vIHNsaWRlIHVwIGFsbCBvcGVuIHNldHRpbmdzIHdpZGdldHMKICAgICAgICAkKCcuQ29sdW1uU2V0dGluZ3NUcmlnZ2VyJykKICAgICAgICAgICAgLm5leHQoJy5Db2x1bW5TZXR0aW5nc0NvbnRhaW5lcicpCiAgICAgICAgICAgIC5maW5kKCcuQ29sdW1uU2V0dGluZ3NCb3gnKQogICAgICAgICAgICAuZmFkZU91dCgnZmFzdCcsIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5wcmV2KCcuQ29sdW1uU2V0dGluZ3NUcmlnZ2VyJykucmVtb3ZlQ2xhc3MoJ0FjdGl2ZScpOwogICAgICAgICAgICB9KTsKCiAgICAgICAgLy8gc2hvdyBUSElTIHNldHRpbmdzIHdpZGdldAogICAgICAgICRDb2x1bW5TZXR0aW5nc0NvbnRhaW5lcgogICAgICAgICAgICAuZmluZCgnLkNvbHVtblNldHRpbmdzQm94JykKICAgICAgICAgICAgLmZhZGVJbignZmFzdCcsIGZ1bmN0aW9uKCkgewoKICAgICAgICAgICAgICAgICRUcmlnZ2VyT2JqLmFkZENsYXNzKCdBY3RpdmUnKTsKCiAgICAgICAgICAgICAgICAvLyBvbmx5IHNob3cgYW5kIHVzZSB0aGUgZGVsZXRlIGZpbHRlciBpY29uIGluIGNhc2Ugb2YgYXV0b2NvbXBsZXRlIGZpZWxkcwogICAgICAgICAgICAgICAgLy8gYmVjYXVzZSBpbiByZWd1bGFyIGRyb3Bkb3ducyB3ZSBoYXZlIGEgZGlmZmVyZW50IHdheSB0byBkZWxldGUgdGhlIGZpbHRlcgogICAgICAgICAgICAgICAgaWYgKCRUcmlnZ2VyT2JqLmNsb3Nlc3QoJ3RoJykuaGFzQ2xhc3MoJ0ZpbHRlckFjdGl2ZScpICYmICRDb2x1bW5TZXR0aW5nc0NvbnRhaW5lci5maW5kKCdzZWxlY3QuQ29sdW1uRmlsdGVyJykuaGFzQ2xhc3MoJ0hpZGRlbicpKSB7CiAgICAgICAgICAgICAgICAgICAgJENvbHVtblNldHRpbmdzQ29udGFpbmVyCiAgICAgICAgICAgICAgICAgICAgICAgIC5maW5kKCcuRGVsZXRlRmlsdGVyJykKICAgICAgICAgICAgICAgICAgICAgICAgLnJlbW92ZUNsYXNzKCdIaWRkZW4nKQogICAgICAgICAgICAgICAgICAgICAgICAub2ZmKCkKICAgICAgICAgICAgICAgICAgICAgICAgLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jbG9zZXN0KCcuQ29sdW1uU2V0dGluZ3NDb250YWluZXInKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5maW5kKCdzZWxlY3QnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC52YWwoJ0RlbGV0ZUZpbHRlcicpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRyaWdnZXIoJ2NoYW5nZScpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8gcmVmcmVzaCBmaWx0ZXIgZHJvcGRvd24KICAgICAgICAgICAgICAgIEZpbHRlck5hbWUgPSAkQ29sdW1uU2V0dGluZ3NDb250YWluZXIKICAgICAgICAgICAgICAgICAgICAuZmluZCgnc2VsZWN0JykKICAgICAgICAgICAgICAgICAgICAuYXR0cignbmFtZScpOwoKICAgICAgICAgICAgICAgIGlmICggJFRyaWdnZXJPYmouY2xvc2VzdCgndGgnKS5oYXNDbGFzcygnQ3VzdG9tZXJJRCcpIHx8ICRUcmlnZ2VyT2JqLmNsb3Nlc3QoJ3RoJykuaGFzQ2xhc3MoJ0N1c3RvbWVyVXNlcklEJykgfHwgJFRyaWdnZXJPYmouY2xvc2VzdCgndGgnKS5oYXNDbGFzcygnUmVzcG9uc2libGUnKSB8fCAkVHJpZ2dlck9iai5jbG9zZXN0KCd0aCcpLmhhc0NsYXNzKCdPd25lcicpICkgewoKICAgICAgICAgICAgICAgICAgICBpZiAoISRUcmlnZ2VyT2JqLnBhcmVudCgpLmZpbmQoJy5TZWxlY3RlZFZhbHVlJykubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIENvcmUuQUpBWC5Gb3JtVXBkYXRlKCRUcmlnZ2VyT2JqLnBhcmVudHMoJ2Zvcm0nKSwgJ0FKQVhGaWx0ZXJVcGRhdGUnLCBGaWx0ZXJOYW1lLCBbIEZpbHRlck5hbWUgXSwgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgQXV0b0NvbXBsZXRlVmFsdWUgPSAkQ29sdW1uU2V0dGluZ3NDb250YWluZXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbmQoJ3NlbGVjdCcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC52YWwoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvQ29tcGxldGVUZXh0ICA9ICRDb2x1bW5TZXR0aW5nc0NvbnRhaW5lcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmluZCgnc2VsZWN0JykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbmQoJ29wdGlvbjpzZWxlY3RlZCcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50ZXh0KCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEF1dG9Db21wbGV0ZVZhbHVlICE9PSAnRGVsZXRlRmlsdGVyJykgewoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkQ29sdW1uU2V0dGluZ3NDb250YWluZXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbmQoJ3NlbGVjdCcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZnRlcignPHNwYW4gY2xhc3M9IlNlbGVjdGVkVmFsdWUgSGlkZGVuIj48c3BhbiB0aXRsZT0iJyArIEF1dG9Db21wbGV0ZVRleHQgKyAnICgnICsgQXV0b0NvbXBsZXRlVmFsdWUgKyAnKSI+JyArIEF1dG9Db21wbGV0ZVRleHQgKyAnICgnICsgQXV0b0NvbXBsZXRlVmFsdWUgKyAnKTwvc3Bhbj48L3NwYW4+Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIENvcmUuQUpBWC5Gb3JtVXBkYXRlKCRUcmlnZ2VyT2JqLnBhcmVudHMoJ2Zvcm0nKSwgJ0FKQVhGaWx0ZXJVcGRhdGUnLCBGaWx0ZXJOYW1lLCBbIEZpbHRlck5hbWUgXSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9CgogICAgcmV0dXJuIGZhbHNlOwp9KTsKCi8vXV0+PC9zY3JpcHQ+ClslIEVORCAlXQoKWyUgUmVuZGVyQmxvY2tFbmQoIkNvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNIZWFkZXIiKSAlXQogICAgICAgIDwvdGhlYWQ+CgogICAgICAgIDx0Ym9keT4KWyUgUmVuZGVyQmxvY2tTdGFydCgiQ29udGVudExhcmdlVGlja2V0R2VuZXJpY1JvdyIpICVdCiAgICAgICAgICAgIDx0ciBjbGFzcz0iTWFzdGVyQWN0aW9uIj4KClslIFJlbmRlckJsb2NrU3RhcnQoIkdlbmVyYWxPdmVydmlld1JvdyIpICVdCgpbJSBSZW5kZXJCbG9ja1N0YXJ0KCJDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljUm93TWV0YSIpICVdCiAgICAgICAgICAgICAgICA8dGQgY2xhc3M9IlslIERhdGEuQ2xhc3NUYWJsZSB8IGh0bWwgJV0gRmxhZ3MiIHRpdGxlPSJbJSBUcmFuc2xhdGUoRGF0YS5UaXRsZSkgfCBodG1sICVdIj4KWyUgUmVuZGVyQmxvY2tTdGFydCgiQ29udGVudExhcmdlVGlja2V0R2VuZXJpY1Jvd01ldGFJbWFnZSIpICVdCiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iWyUgRGF0YS5DbGFzcyB8IGh0bWwgJV0gU21hbGwiIHRpdGxlPSJbJSBUcmFuc2xhdGUoRGF0YS5UaXRsZSkgfCBodG1sICVdIj4KICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9IlslIERhdGEuQ2xhc3NTcGFuIHwgaHRtbCAlXSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz0iZmEgZmEtc3RhciI+PC9pPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9ImZhIGZhLXN0YXIiPjwvaT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxlbT5bJSBUcmFuc2xhdGUoRGF0YS5UaXRsZSkgfCBodG1sICVdPC9lbT4KICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgpbJSBSZW5kZXJCbG9ja0VuZCgiQ29udGVudExhcmdlVGlja2V0R2VuZXJpY1Jvd01ldGFJbWFnZSIpICVdCiAgICAgICAgICAgICAgICA8L3RkPgpbJSBSZW5kZXJCbG9ja0VuZCgiQ29udGVudExhcmdlVGlja2V0R2VuZXJpY1Jvd01ldGEiKSAlXQoKIyAgICAgICAgICAgIDx0ZCBjbGFzcz0iVzEwcGMiPgojICAgICAgICAgICAgICAgIDxhIGhyZWY9IlslIEVudigiQmFzZWxpbmsiKSAlXUFjdGlvbj1BZ2VudFRpY2tldFpvb207VGlja2V0SUQ9WyUgRGF0YS5UaWNrZXRJRCAlXSIgdGl0bGU9IlslIERhdGEuVGl0bGUgfCBodG1sICVdIiBjbGFzcz0iQXNCbG9jayBNYXN0ZXJBY3Rpb25MaW5rIj5bJSBEYXRhLlRpY2tldE51bWJlciAlXTwvYT4KIyAgICAgICAgICAgIDwvdGQ+CiMgICAgICAgICAgICA8dGQgY2xhc3M9Ilc1MHBjIj4KIyAgICAgICAgICAgICAgICA8ZGl2IHRpdGxlPSJbJSBEYXRhLlRpdGxlIHwgaHRtbCAlXSI+WyUgRGF0YS5UaXRsZSB8IHRydW5jYXRlKDcwKSB8IGh0bWwgJV08L2Rpdj4KIyAgICAgICAgICAgIDwvdGQ+CiMgICAgICAgICAgICA8dGQ+WyUgRGF0YS5UaW1lIHwgaHRtbCAlXTwvdGQ+CgpbJSBSZW5kZXJCbG9ja1N0YXJ0KCJDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljVGlja2V0Q29sdW1uIikgJV0KWyUgUmVuZGVyQmxvY2tTdGFydCgiQ29udGVudExhcmdlVGlja2V0R2VuZXJpY1RpY2tldE51bWJlciIpICVdCiAgICAgICAgICAgICAgICA8dGQ+CiAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj0iWyUgRW52KCJCYXNlbGluayIpICVdQWN0aW9uPUFnZW50VGlja2V0Wm9vbTtUaWNrZXRJRD1bJSBEYXRhLlRpY2tldElEICVdIiB0aXRsZT0iWyUgRGF0YS5UaXRsZSB8IGh0bWwgJV0iIGNsYXNzPSJBc0Jsb2NrIE1hc3RlckFjdGlvbkxpbmsiPlslIERhdGEuVGlja2V0TnVtYmVyICVdPC9hPgogICAgICAgICAgICAgICAgPC90ZD4KWyUgUmVuZGVyQmxvY2tFbmQoIkNvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNUaWNrZXROdW1iZXIiKSAlXQpbJSBSZW5kZXJCbG9ja1N0YXJ0KCJDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljRXNjYWxhdGlvblRpbWUiKSAlXQogICAgICAgICAgICAgICAgPHRkPgogICAgICAgICAgICAgICAgICAgIDxkaXYgdGl0bGU9IlslIFRyYW5zbGF0ZSgiU2VydmljZSBUaW1lIikgfCBodG1sICVdOiBbJSBEYXRhLkVzY2FsYXRpb25UaW1lV29ya2luZ1RpbWUgfCBodG1sICVdIC0gWyUgRGF0YS5Fc2NhbGF0aW9uRGVzdGluYXRpb25EYXRlIHwgTG9jYWxpemUoIlRpbWVTaG9ydCIpICVdIiBjbGFzcz0iWyUgRGF0YS5Fc2NhbGF0aW9uQ2xhc3MgfCBodG1sICVdIj5bJSBEYXRhLkVzY2FsYXRpb25UaW1lSHVtYW4gfCBodG1sICVdPGJyLz5bJSBEYXRhLlVwZGF0ZVRpbWVEZXN0aW5hdGlvbkRhdGUgfCBMb2NhbGl6ZSgiVGltZVNob3J0IikgJV08L2Rpdj4KICAgICAgICAgICAgICAgIDwvdGQ+ClslIFJlbmRlckJsb2NrRW5kKCJDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljRXNjYWxhdGlvblRpbWUiKSAlXQpbJSBSZW5kZXJCbG9ja1N0YXJ0KCJDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljQ29sdW1uIikgJV0KICAgICAgICAgICAgICAgIDx0ZD4KICAgICAgICAgICAgICAgICAgICA8ZGl2IHRpdGxlPSJbJSBEYXRhLkdlbmVyaWNWYWx1ZSB8IGh0bWwgJV0iPlslIERhdGEuR2VuZXJpY1ZhbHVlIHwgdHJ1bmNhdGUoNzgpIHwgaHRtbCAlXTwvZGl2PgogICAgICAgICAgICAgICAgPC90ZD4KWyUgUmVuZGVyQmxvY2tFbmQoIkNvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNDb2x1bW4iKSAlXQpbJSBSZW5kZXJCbG9ja1N0YXJ0KCJDb250ZW50TGFyZ2VUaWNrZXRUaXRsZSIpICVdCiAgICAgICAgICAgICAgICA8dGQ+CiAgICAgICAgICAgICAgICAgICAgPGRpdiB0aXRsZT0iWyUgRGF0YS5XaG9sZVRpdGxlIHwgaHRtbCAlXSI+WyUgRGF0YS5UaXRsZSB8IGh0bWwgJV08L2Rpdj4KICAgICAgICAgICAgICAgIDwvdGQ+ClslIFJlbmRlckJsb2NrRW5kKCJDb250ZW50TGFyZ2VUaWNrZXRUaXRsZSIpICVdClslIFJlbmRlckJsb2NrU3RhcnQoIkNvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNDb2x1bW5UcmFuc2xhdGFibGUiKSAlXQogICAgICAgICAgICAgICAgPHRkPgogICAgICAgICAgICAgICAgICAgIDxkaXYgdGl0bGU9IlslIFRyYW5zbGF0ZShEYXRhLkdlbmVyaWNWYWx1ZSkgfCBodG1sICVdIj5bJSBUcmFuc2xhdGUoRGF0YS5HZW5lcmljVmFsdWUpIHwgaHRtbCAlXTwvZGl2PgogICAgICAgICAgICAgICAgPC90ZD4KWyUgUmVuZGVyQmxvY2tFbmQoIkNvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNDb2x1bW5UcmFuc2xhdGFibGUiKSAlXQpbJSBSZW5kZXJCbG9ja1N0YXJ0KCJDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljQ29sdW1uVGltZSIpICVdCiAgICAgICAgICAgICAgICA8dGQ+CiAgICAgICAgICAgICAgICAgICAgPGRpdiB0aXRsZT0iWyUgRGF0YS5HZW5lcmljVmFsdWUgfCBMb2NhbGl6ZSgiVGltZVNob3J0IikgfCBodG1sICVdIj5bJSBEYXRhLkdlbmVyaWNWYWx1ZSB8IExvY2FsaXplKCJUaW1lU2hvcnQiKSAlXTwvZGl2PgogICAgICAgICAgICAgICAgPC90ZD4KWyUgUmVuZGVyQmxvY2tFbmQoIkNvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNDb2x1bW5UaW1lIikgJV0KWyUgUmVuZGVyQmxvY2tTdGFydCgiQ29udGVudExhcmdlVGlja2V0R2VuZXJpY0NvbHVtbkVzY2FsYXRpb24iKSAlXQogICAgICAgICAgICAgICAgPHRkPgogICAgICAgICAgICAgICAgICAgIDxkaXYgdGl0bGU9IlslIERhdGEuR2VuZXJpY1ZhbHVlIHwgaHRtbCAlXSIgY2xhc3M9IlslIERhdGEuQ2xhc3MgfCBodG1sICVdIj5bJSBEYXRhLkdlbmVyaWNWYWx1ZSB8IGh0bWwgJV08L2Rpdj4KICAgICAgICAgICAgICAgIDwvdGQ+ClslIFJlbmRlckJsb2NrRW5kKCJDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljQ29sdW1uRXNjYWxhdGlvbiIpICVdClslIFJlbmRlckJsb2NrRW5kKCJDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljVGlja2V0Q29sdW1uIikgJV0KClslIFJlbmRlckJsb2NrU3RhcnQoIkNvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNEeW5hbWljRmllbGQiKSAlXQogICAgICAgICAgICAgICAgPHRkPgogICAgICAgICAgICAgICAgICAgIDxkaXYgdGl0bGU9IlslIERhdGEuVGl0bGUgfCBodG1sICVdIj4KWyUgUmVuZGVyQmxvY2tTdGFydCgiQ29udGVudExhcmdlVGlja2V0R2VuZXJpY0R5bmFtaWNGaWVsZExpbmsiKSAlXQogICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPSJbJSBEYXRhLkxpbmsgfCBJbnRlcnBvbGF0ZSAlXSIgIHRhcmdldD0iX2JsYW5rIiBjbGFzcz0iRHluYW1pY0ZpZWxkTGluayI+WyUgRGF0YS5WYWx1ZSAlXTwvYT4KWyUgUmVuZGVyQmxvY2tFbmQoIkNvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNEeW5hbWljRmllbGRMaW5rIikgJV0KWyUgUmVuZGVyQmxvY2tTdGFydCgiQ29udGVudExhcmdlVGlja2V0R2VuZXJpY0R5bmFtaWNGaWVsZFBsYWluIikgJV0KICAgICAgICAgICAgICAgICAgICAgICAgWyUgRGF0YS5WYWx1ZSAlXQpbJSBSZW5kZXJCbG9ja0VuZCgiQ29udGVudExhcmdlVGlja2V0R2VuZXJpY0R5bmFtaWNGaWVsZFBsYWluIikgJV0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvdGQ+ClslIFJlbmRlckJsb2NrRW5kKCJDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljRHluYW1pY0ZpZWxkIikgJV0KClslIFJlbmRlckJsb2NrRW5kKCJHZW5lcmFsT3ZlcnZpZXdSb3ciKSAlXQoKICAgICAgICAgICAgPC90cj4KWyUgUmVuZGVyQmxvY2tFbmQoIkNvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNSb3ciKSAlXQpbJSBSZW5kZXJCbG9ja1N0YXJ0KCJDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljTm9uZSIpICVdCiAgICAgICAgICAgIDx0cj4KICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz0iQXV0b0NvbHNwYW4iPgogICAgICAgICAgICAgICAgICAgIFslIFRyYW5zbGF0ZSgibm9uZSIpIHwgaHRtbCAlXQogICAgICAgICAgICAgICAgPC90ZD4KICAgICAgICAgICAgPC90cj4KWyUgV1JBUFBFUiBKU09uRG9jdW1lbnRDb21wbGV0ZSAlXQo8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+Ly88IVtDREFUQVsKJCgnLkF1dG9Db2xzcGFuJykuZWFjaChmdW5jdGlvbigpIHsKICAgIHZhciBDb2xzcGFuQ291bnQgPSAkKHRoaXMpLmNsb3Nlc3QoJ3RhYmxlJykuZmluZCgndGgnKS5sZW5ndGg7CiAgICAkKHRoaXMpLmF0dHIoJ2NvbHNwYW4nLCBDb2xzcGFuQ291bnQpOwp9KTsKLy9dXT48L3NjcmlwdD4KWyUgRU5EICVdCgpbJSBSZW5kZXJCbG9ja0VuZCgiQ29udGVudExhcmdlVGlja2V0R2VuZXJpY05vbmUiKSAlXQogICAgICAgIDwvdGJvZHk+CiAgICA8L3RhYmxlPgo8L2Zvcm0+CgpbJSBSZW5kZXJCbG9ja1N0YXJ0KCJDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljUmVmcmVzaCIpICVdClslIFdSQVBQRVIgSlNPbkRvY3VtZW50Q29tcGxldGUgJV0KPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPi8vPCFbQ0RBVEFbCkNvcmUuQ29uZmlnLlNldCgnUmVmcmVzaFNlY29uZHNfWyUgRGF0YS5OYW1lSFRNTCB8IGh0bWwgJV0nLCBwYXJzZUludCgiWyUgRGF0YS5SZWZyZXNoVGltZSB8IGh0bWwgJV0iLCAxMCkgfHwgMCk7CmlmIChDb3JlLkNvbmZpZy5HZXQoJ1JlZnJlc2hTZWNvbmRzX1slIERhdGEuTmFtZUhUTUwgfCBodG1sICVdJykpIHsKICAgIENvcmUuQ29uZmlnLlNldCgnVGltZXJfWyUgRGF0YS5OYW1lSFRNTCB8IGh0bWwgJV0nLCB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHsKCiAgICAgICAgLy8gZ2V0IGFjdGl2ZSBmaWx0ZXIKICAgICAgICB2YXIgRmlsdGVyICAgICAgPSAkKCcjRGFzaGJvYXJkWyUgRGF0YS5OYW1lIHwgaHRtbCAlXS1ib3gnKS5maW5kKCcuVGFiLkFjdGlvbnMgbGkuU2VsZWN0ZWQgYScpLmF0dHIoJ2RhdGEtZmlsdGVyJyksCiAgICAgICAgICAgICRPcmRlckJ5T2JqID0gJCgnI0Rhc2hib2FyZFslIERhdGEuTmFtZSB8IGh0bWwgJV0tYm94JykuZmluZCgndGguU29ydERlc2NlbmRpbmdMYXJnZSwgdGguU29ydEFzY2VuZGluZ0xhcmdlJyksCiAgICAgICAgICAgIFNvcnRCeSAgICAgID0gJE9yZGVyQnlPYmouYXR0cignZGF0YS1jb2x1bW4nKSB8fCAnJywKICAgICAgICAgICAgT3JkZXJCeSAgICAgPSAnJzsKCiAgICAgICAgaWYgKCRPcmRlckJ5T2JqICYmICRPcmRlckJ5T2JqLmhhc0NsYXNzKCdTb3J0RGVzY2VuZGluZ0xhcmdlJykpIHsKICAgICAgICAgICAgT3JkZXJCeSA9ICdVcCc7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKCRPcmRlckJ5T2JqICYmICRPcmRlckJ5T2JqLmhhc0NsYXNzKCdTb3J0QXNjZW5kaW5nTGFyZ2UnKSkgewogICAgICAgICAgICBPcmRlckJ5ID0gJ0Rvd24nOwogICAgICAgIH0KCiAgICAgICAgJCgnI0Rhc2hib2FyZFslIERhdGEuTmFtZSB8IGh0bWwgJV0tYm94JykuYWRkQ2xhc3MoJ0xvYWRpbmcnKTsKICAgICAgICBDb3JlLkFKQVguQ29udGVudFVwZGF0ZSgkKCcjRGFzaGJvYXJkWyUgRGF0YS5OYW1lIHwgaHRtbCAlXScpLCAnWyUgRW52KCJCYXNlbGluayIpICVdQWN0aW9uPVslIEVudigiQWN0aW9uIikgJV07U3ViYWN0aW9uPUVsZW1lbnQ7TmFtZT1bJSBEYXRhLk5hbWUgfCBodG1sICVdO0ZpbHRlcj0nICsgRmlsdGVyICsgJztDdXN0b21lcklEPVslIERhdGEuQ3VzdG9tZXJJRCB8IGh0bWwgJV07U29ydEJ5PScgKyBTb3J0QnkgKyAnO09yZGVyQnk9JyArIE9yZGVyQnksIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgQ29yZS5VSS5UYWJsZS5Jbml0Q1NTUHNldWRvQ2xhc3NlcygkKCcjRGFzaGJvYXJkWyUgRGF0YS5OYW1lIHwgaHRtbCAlXScpKTsKICAgICAgICAgICAgJCgnI0Rhc2hib2FyZFslIERhdGEuTmFtZSB8IGh0bWwgJV0tYm94JykucmVtb3ZlQ2xhc3MoJ0xvYWRpbmcnKTsKICAgICAgICB9KTsKICAgICAgICBjbGVhclRpbWVvdXQoQ29yZS5Db25maWcuR2V0KCdUaW1lcl9bJSBEYXRhLk5hbWVIVE1MIHwgaHRtbCAlXScpKTsKICAgIH0sIENvcmUuQ29uZmlnLkdldCgnUmVmcmVzaFNlY29uZHNfWyUgRGF0YS5OYW1lSFRNTCB8IGh0bWwgJV0nKSAqIDEwMDApKTsKfQovL11dPjwvc2NyaXB0PgpbJSBFTkQgJV0KWyUgUmVuZGVyQmxvY2tFbmQoIkNvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNSZWZyZXNoIikgJV0KClslIFJlbmRlckJsb2NrU3RhcnQoIkNvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNSZW1vdmVGaWx0ZXJzIikgJV0KWyUgV1JBUFBFUiBKU09uRG9jdW1lbnRDb21wbGV0ZSAlXQo8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+Ly88IVtDREFUQVsKaWYgKCEkKCcjRGFzaGJvYXJkWyUgRGF0YS5OYW1lIHwgaHRtbCAlXS1ib3gnKS5maW5kKCcuQWN0aW9uTWVudScpLmZpbmQoJy5SZW1vdmVGaWx0ZXJzJykubGVuZ3RoKSB7CiAgICAkKCcjRGFzaGJvYXJkWyUgRGF0YS5OYW1lIHwgaHRtbCAlXS1ib3gnKQogICAgICAgIC5maW5kKCcuQWN0aW9uTWVudScpCiAgICAgICAgLnByZXBlbmQoJzxkaXYgY2xhc3M9IldpZGdldEFjdGlvbiBSZW1vdmVGaWx0ZXJzIj48YSBocmVmPSIjIiBpZD0iRGFzaGJvYXJkWyUgRGF0YS5OYW1lIHwgaHRtbCAlXS1yZW1vdmUtZmlsdGVycyIgdGl0bGU9IlslIFRyYW5zbGF0ZSgiUmVtb3ZlIGFjdGl2ZSBmaWx0ZXJzIGZvciB0aGlzIHdpZGdldC4iKSB8IGh0bWwgJV0iPjxpIGNsYXNzPSJmYSBmYS10cmFzaC1vIj48L2k+PC9hPjwvZGl2PicpCiAgICAgICAgLmZpbmQoJy5SZW1vdmVGaWx0ZXJzJykKICAgICAgICAub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7CgogICAgICAgICAgICAvLyBnZXQgYWN0aXZlIGZpbHRlcgogICAgICAgICAgICB2YXIgRmlsdGVyID0gJCgnI0Rhc2hib2FyZFslIERhdGEuTmFtZSB8IGh0bWwgJV0tYm94JykuZmluZCgnLlRhYi5BY3Rpb25zIGxpLlNlbGVjdGVkIGEnKS5hdHRyKCdkYXRhLWZpbHRlcicpOwogICAgICAgICAgICAkKCcjRGFzaGJvYXJkWyUgRGF0YS5OYW1lIHwgaHRtbCAlXS1ib3gnKS5hZGRDbGFzcygnTG9hZGluZycpOwogICAgICAgICAgICBDb3JlLkFKQVguQ29udGVudFVwZGF0ZSgkKCcjRGFzaGJvYXJkWyUgRGF0YS5OYW1lIHwgaHRtbCAlXScpLCAnWyUgRW52KCJCYXNlbGluayIpICVdQWN0aW9uPVslIEVudigiQWN0aW9uIikgJV07U3ViYWN0aW9uPUVsZW1lbnQ7TmFtZT1bJSBEYXRhLk5hbWUgfCBodG1sICVdO0ZpbHRlcj0nICsgRmlsdGVyICsgJztDdXN0b21lcklEPVslIERhdGEuQ3VzdG9tZXJJRCB8IGh0bWwgJV07UmVtb3ZlRmlsdGVycz0xJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgQ29yZS5VSS5UYWJsZS5Jbml0Q1NTUHNldWRvQ2xhc3NlcygkKCcjRGFzaGJvYXJkWyUgRGF0YS5OYW1lIHwgaHRtbCAlXScpKTsKICAgICAgICAgICAgICAgICQoJyNEYXNoYm9hcmRbJSBEYXRhLk5hbWUgfCBodG1sICVdLWJveCcpLnJlbW92ZUNsYXNzKCdMb2FkaW5nJyk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfSk7Cn0KLy9dXT48L3NjcmlwdD4KWyUgRU5EICVdClslIFJlbmRlckJsb2NrRW5kKCJDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljUmVtb3ZlRmlsdGVycyIpICVdCgpbJSBSZW5kZXJCbG9ja1N0YXJ0KCJDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljUmVtb3ZlRmlsdGVyc1JlbW92ZSIpICVdClslIFdSQVBQRVIgSlNPbkRvY3VtZW50Q29tcGxldGUgJV0KPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPi8vPCFbQ0RBVEFbCiQoJyNEYXNoYm9hcmRbJSBEYXRhLk5hbWUgfCBodG1sICVdLWJveCcpLmZpbmQoJy5SZW1vdmVGaWx0ZXJzJykucmVtb3ZlKCk7Ci8vXV0+PC9zY3JpcHQ+ClslIEVORCAlXQpbJSBSZW5kZXJCbG9ja0VuZCgiQ29udGVudExhcmdlVGlja2V0R2VuZXJpY1JlbW92ZUZpbHRlcnNSZW1vdmUiKSAlXQoKWyUgV1JBUFBFUiBKU09uRG9jdW1lbnRDb21wbGV0ZSAlXQo8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+Ly88IVtDREFUQVsKICAgICQoJy5NYXN0ZXJBY3Rpb24nKS5iaW5kKCdjbGljaycsIGZ1bmN0aW9uIChFdmVudCkgewogICAgICAgIHZhciAkTWFzdGVyQWN0aW9uTGluayA9ICQodGhpcykuZmluZCgnLk1hc3RlckFjdGlvbkxpbmsnKTsKICAgICAgICAvLyBwcmV2ZW50IE1hc3RlckFjdGlvbiBvbiBEeW5hbWljIEZpZWxkcyBsaW5rcwogICAgICAgIGlmICgkKEV2ZW50LnRhcmdldCkuaGFzQ2xhc3MoJ0R5bmFtaWNGaWVsZExpbmsnKSkgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgLy8gb25seSBhY3QgaWYgdGhlIGxpbmsgd2FzIG5vdCBjbGlja2VkIGRpcmVjdGx5CiAgICAgICAgaWYgKEV2ZW50LnRhcmdldCAhPT0gJE1hc3RlckFjdGlvbkxpbmsuZ2V0KDApKSB7CiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbiA9ICRNYXN0ZXJBY3Rpb25MaW5rLmF0dHIoJ2hyZWYnKTsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgIH0pOwoKICAgICQoJyNEYXNoYm9hcmRbJSBEYXRhLk5hbWUgfCBodG1sICVdLWJveCcpLmZpbmQoJy5UYWIuQWN0aW9ucyBsaSBhJykudW5iaW5kKCdjbGljaycpLmJpbmQoJ2NsaWNrJywgZnVuY3Rpb24oKSB7CiAgICAgICAgdmFyIEZpbHRlciA9ICQodGhpcykuYXR0cignZGF0YS1maWx0ZXInKSwKICAgICAgICBDdXN0b21lcklEOwoKICAgICAgICBDdXN0b21lcklEID0gJCgnaW5wdXRbbmFtZT1DdXN0b21lcklEXScpLnZhbCgpIHx8ICcnOwoKICAgICAgICAkKCcjRGFzaGJvYXJkWyUgRGF0YS5OYW1lIHwgaHRtbCAlXS1ib3gnKS5hZGRDbGFzcygnTG9hZGluZycpOwogICAgICAgIENvcmUuQUpBWC5Db250ZW50VXBkYXRlKCQoJyNEYXNoYm9hcmRbJSBEYXRhLk5hbWUgfCBodG1sICVdJyksICdbJSBFbnYoIkJhc2VsaW5rIikgJV1BY3Rpb249WyUgRW52KCJBY3Rpb24iKSAlXTtTdWJhY3Rpb249RWxlbWVudDtOYW1lPVslIERhdGEuTmFtZSB8IGh0bWwgJV07RmlsdGVyPScgKyBGaWx0ZXIgKyAnO0N1c3RvbWVySUQ9JyArIGVuY29kZVVSSUNvbXBvbmVudChDdXN0b21lcklEKSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICBDb3JlLlVJLlRhYmxlLkluaXRDU1NQc2V1ZG9DbGFzc2VzKCQoJyNEYXNoYm9hcmRbJSBEYXRhLk5hbWUgfCBodG1sICVdJykpOwogICAgICAgICAgICAkKCcjRGFzaGJvYXJkWyUgRGF0YS5OYW1lIHwgaHRtbCAlXS1ib3gnKS5yZW1vdmVDbGFzcygnTG9hZGluZycpOwogICAgICAgIH0pOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0pOwovL11dPjwvc2NyaXB0PgpbJSBFTkQgJV0K</File>
        <File Location="doc/en/MyTicketsDashlet.pod" Permission="644" Encode="Base64">PXBvZAoKPWhlYWQxIE5hbWUKCk15VGlja2V0c0Rhc2hsZXQKCj1oZWFkMSBEZXNjcmlwdGlvbgoKVGhpcyBwYWNrYWdlcyBwcm92aWRlcyBkYXNoYm9hcmQgbW9kdWxlIHRoYXQgc2hvd3Mgb25seSBteSB0aWNrZXRzLgoKPWhlYWQxIFByZXJlcXVpc2l0ZXMKCj1vdmVyCgo9aXRlbSAqIE9UUlMgNS4wCgo9YmFjawoKPWhlYWQxIEluc3RhbGxhdGlvbgoKRG93bmxvYWQgdGhlIHBhY2thZ2UgYW5kIGluc3RhbGwgaXQgdmlhIGFkbWluIGludGVyZmFjZSAtPiBwYWNrYWdlIG1hbmFnZXIuCgo9aGVhZDEgQ29uZmlndXJhdGlvbgoKPW92ZXIKCj1pdGVtICogQ29uZmlndXJlIGl0IHZpYSBhZG1pbiBpbnRlcmZhY2UgLT4gU3lzQ29uZmlnCgo9aXRlbSAqIFRpY2tldCAtPiBGcm9udGVuZDo6QWdlbnQ6OkRhc2hib2FyZCAtPiBEYXNoYm9hcmRCYWNrZW5kIyMjMDA5MC1NeVRpY2tldHNEYXNobGV0Cgo9aXRlbSAqIEJ5IGRlZmF1bHQgdGhlIG1vZHVsZSBpcyBlbmFibGVkLgoKPWJhY2sKCj1oZWFkMSBTb3VyY2UgQ29kZQoKRm9yayBtZSBvbiBnaXRodWIgTDxodHRwczovL2dpdGh1Yi5jb20vZnJlbmV0aWNmL015VGlja2V0c0Rhc2hsZXQ+Cgo9aGVhZDEgTGljZW5zZQoKVGhpcyBzb2Z0d2FyZSBjb21lcyB3aXRoIEFCU09MVVRFTFkgTk8gV0FSUkFOVFkuIEZvciBkZXRhaWxzLCBzZWUgdGhlIGVuY2xvc2VkIGZpbGUgQ09QWUlORyBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbiAoQUdQTCkuIElmIHlvdSBkaWQgbm90IHJlY2VpdmUgdGhpcyBmaWxlLCBzZWUgaHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzL2FncGwudHh0LgoKPWN1dAoK</File>
    </Filelist>
</otrs_package>